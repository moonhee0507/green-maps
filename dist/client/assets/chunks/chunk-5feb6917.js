import{r as g,j as e}from"./chunk-0ad0329c.js";import{S,T as d,P,a as j,u as T}from"./chunk-b82a1d50.js";import"./chunk-da345742.js";import{u as A,a as E}from"./chunk-b4acbe02.js";const m=g.forwardRef(R);function R(r,c){const{postInfo:i}=r,{_id:n,subject:o,owner:p,title:a,content:l,photo:t,like:s,registeredAt:f,comments:x}=i,h=I(l),u="80px";return e.jsx("li",{ref:c,children:e.jsxs("a",{href:`/community/${n}`,style:{width:"100%",display:"flex",padding:"20px"},children:[e.jsxs("dl",{style:{width:`calc(100% - ${t&&t.length>0?u:"0px"})`},children:[e.jsx(S,{subject:o}),e.jsx(d,{title:a}),e.jsx(P,{content:h}),e.jsx(j,{owner:p,like:s,registeredAt:f,comments:x})]}),t&&t.length>0?e.jsx("dd",{children:e.jsx("img",{src:t[0].src,alt:"",style:{width:u,height:u,objectFit:"cover"}})}):null]})})}function I(r){return r.replaceAll(/<[^>]*>/g,"").replaceAll(/&[a-zA-Z0-9]*;/g,"")}function _(r){const{posts:c,limit:i}=r,n=g.useRef(null),o=A(),p=E(),[a,l]=T(()=>{const t=Math.ceil(o.getState().postSlice.post.TOTAL/i);o.getState().postSlice.post.CURRENT_PAGE<t&&p({type:"postSlice/POST_IN_PAGE",TOTAL:o.getState().postSlice.post.TOTAL,CURRENT_PAGE:o.getState().postSlice.post.CURRENT_PAGE+1})});return g.useEffect(()=>{const t=Math.ceil(o.getState().postSlice.post.TOTAL/i),s=o.getState().postSlice.post.CURRENT_PAGE;s===t?l(n.current):s<t&&a(n.current)},[a,l]),e.jsx("ul",{className:"wrapper-posts",children:c.map((t,s)=>s===c.length-1?e.jsx(m,{postInfo:t,ref:n},s):e.jsx(m,{postInfo:t},s))})}export{_ as P};
