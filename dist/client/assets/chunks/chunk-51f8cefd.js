import{j as s,r as o}from"./chunk-93156e5d.js";import{u as d,b as c,A as C}from"./chunk-c1371adf.js";import{C as f,a as h,b as j,S as x,c as M,d as y,e as L}from"./chunk-0bbcfb89.js";import{a as g}from"./chunk-3258e6a6.js";import{i as A,c as N,s as E,o as I,a as _,m as T}from"../entries/pages_search_index.page.902679c5.js";import{R as k}from"./chunk-f0866dd8.js";import"./chunk-1ef25d43.js";import"./chunk-99ce4f1c.js";import"./chunk-101896b7.js";import"./chunk-58beb195.js";import"./chunk-c4b708ad.js";import"./chunk-80cebf31.js";import"./chunk-605f7eb6.js";import"./chunk-0cecfb14.js";import"./chunk-5ceb8754.js";import"./chunk-bb7c4fe4.js";import"./chunk-09c58e42.js";import"./chunk-1de3b966.js";import"./chunk-8764f3c0.js";import"./chunk-e8bc0b58.js";import"./chunk-1989159b.js";import"./chunk-3a1767e4.js";import"./chunk-4d100f1e.js";import"./chunk-35151331.js";function O(){return s.jsxs("div",{className:"wrapper-map-control-button",children:[s.jsxs("div",{className:"container-button-map-mode",children:[s.jsx(D,{}),s.jsx(v,{})]}),s.jsx("div",{children:s.jsx(w,{})})]})}function w(){const t=d(),n=()=>{e(),t(f(!0))};function e(){t(h(!1)),t(j(!1)),t(x(!1)),t(f(!1))}return s.jsx("button",{type:"button",onClick:n,children:"업종 필터"})}function v(){const t=d(),n=c(l=>l.mapSlice.mapMode);function e(){g(!0),i(),t(j(!0)),t(M("지역탐색 모드"))}function i(){t(h(!1)),t(j(!1)),t(x(!1)),t(f(!1))}return s.jsx("button",{onClick:e,className:`button-map-mode ${n==="지역탐색 모드"?"on":""}`,children:"지역 탐색 모드"})}function D(){const t=d(),n=c(p=>p.mapSlice.mapMode),e=c(p=>p.mapSlice.radius),[i,l]=o.useState(e),[r,m]=o.useState("m");o.useEffect(()=>{e<1e3?(l(e),m("m")):(l(e/1e3),m("km"))},[e]);const u=()=>{g(!0),S(),t(h(!0)),t(M("반경탐색 모드"))};function S(){t(h(!1)),t(j(!1)),t(x(!1)),t(f(!1))}return s.jsxs("button",{type:"button",onClick:u,className:`button-map-mode ${n==="반경탐색 모드"?"on":""}`,children:[s.jsx("span",{children:"반경 "}),s.jsx("span",{children:i}),s.jsx("span",{children:r}),s.jsx("span",{children:" 탐색 모드"})]})}function $({isLoggedIn:t}){const n=d(),e=c(a=>a.mapSlice.radius),[i,l]=o.useState(!1),[r,m]=o.useState(null),u=c(a=>a.mapSlice.selectedCategory);o.useEffect(()=>{_(t),A().then(a=>{l(!0),m([a.getLng(),a.getLat()])})},[]);const S=o.useCallback(async a=>{if(Array.isArray(a))return await(await fetch(`${C}/map/within-radius-of?radius=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentLocation:a,category:u})})).json()},[e,u,r]),p=o.useCallback(async a=>{if(Array.isArray(a))return await(await fetch(`${C}/map/nearest?top=5`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentLocation:a})})).json()},[e,r]);return o.useEffect(()=>{i&&(N(),E(e),r&&(S(r).then(a=>{a.success&&(n(y(a.lists)),I(e))}),p(r).then(a=>{a.success&&n(L(a.lists))})))},[e,i,u,r]),s.jsx("div",{id:"map"})}function z(){const t=d(),n=()=>{T(),t(x(!1))};return s.jsx("button",{type:"button",onClick:n,className:"button-move-to-my",title:"내 위치로","aria-label":"내 위치로 이동 버튼"})}function G(){const t=c(i=>i.mapSlice.currentSido),n=c(i=>i.mapSlice.currentSigungu),e=c(i=>i.mapSlice.resultInRadius);return e.length>0?s.jsxs("p",{className:"txt-result-in-radius",children:["내 위치(",`${t} ${n}`,")에 검색된 식당 ",s.jsx("span",{children:e.length}),"개"]}):s.jsxs("p",{className:"txt-result-in-radius",children:["결과가 없어요!😥",s.jsx("br",{}),"가장 가까운 식당 TOP 5"]})}function U(){return s.jsxs("div",{className:"wrapper-result-in-radius",children:[s.jsx(G,{}),s.jsx(k,{})]})}function dt({isLoggedIn:t}){return s.jsxs("main",{className:"main-map",children:[s.jsx(O,{}),s.jsx($,{isLoggedIn:t}),s.jsx(z,{}),s.jsx(U,{})]})}export{dt as default};
//# sourceMappingURL=chunk-51f8cefd.js.map
