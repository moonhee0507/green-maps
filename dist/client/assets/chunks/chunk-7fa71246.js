import{r as c,j as a}from"./chunk-93156e5d.js";import{a as T,b as o,A as u,B as m}from"./chunk-c1371adf.js";import"./chunk-1ef25d43.js";import{E}from"./chunk-99ce4f1c.js";function n(e){return e.trim().length===0}function h(){const e=T(),s=o(t=>t.postSlice.editMode),d=o(t=>t.postSlice.postId),i=o(t=>t.postSlice.SUBJECT),r=o(t=>t.postSlice.TITLE),l=o(t=>t.postSlice.CONTENT),p=c.useCallback(async()=>(await(await fetch(`${u}/users/`,{credentials:"include",method:"GET"})).json()).user,[]);c.useEffect(()=>{p().then(t=>{t?e({type:"postSlice/OWNER_STATE",NICKNAME:t.nickName}):console.log("사용자 정보가 없습니다. 로그인 하세요.")})},[p]);const S=async()=>{if(n(i))alert("말머리를 선택해주세요.");else if(n(r))alert("제목을 입력해주세요.");else if(n(l))alert("내용을 입력해주세요.");else try{const t={subject:i,title:r,content:l};(await(await fetch(`${u}/posts/${s?d:""}`,{credentials:"include",method:s?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success?alert("게시글이 등록되었습니다."):alert("다시 시도해주세요.")}catch(t){console.error(t)}finally{e({type:"postSlice/SUBJECT_STATE",SUBJECT:""}),e(E(!1)),history.back()}};return a.jsx("button",{type:"button",onClick:S,children:"등록"})}function N(e){const[s]=c.useState(e.title);return a.jsxs("div",{className:"top-bar",children:[a.jsx(m,{}),a.jsx("h2",{className:"top-title",children:s}),s==="글 쓰기"||s==="글 수정"?a.jsx(h,{}):null]})}export{N as T,n as i};
//# sourceMappingURL=chunk-7fa71246.js.map
