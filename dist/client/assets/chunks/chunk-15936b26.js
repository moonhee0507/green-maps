import{j as t,r as o}from"./chunk-0ad0329c.js";import{b as p,u as r,A as h}from"./chunk-f5cf074f.js";import{k as L,e as f,c as R,p as j,C as y,q as I,r as b}from"./chunk-b82d406b.js";import{a as x}from"./chunk-3258e6a6.js";import{i as A,c as N,s as E,o as M,a as _,m as O}from"../entries/pages_search_index.page.6db59823.js";import{c as k}from"./chunk-b4593cd6.js";import"./chunk-da345742.js";import"./chunk-41308c4f.js";import"./chunk-101896b7.js";import"./chunk-621f058a.js";import"./chunk-bf08ca9a.js";import"./chunk-a6e5261d.js";import"./chunk-2b326172.js";import"./chunk-f3107ac8.js";import"./chunk-87bfa915.js";import"./chunk-91c16fc8.js";import"./chunk-63b910cd.js";import"./chunk-370f01b3.js";import"./chunk-32ec8ef6.js";import"./chunk-0249643f.js";import"./chunk-20883e09.js";import"./chunk-e8bc0b58.js";import"./chunk-5b1b7faa.js";import"./chunk-3c838518.js";import"./chunk-aaa4175a.js";import"./chunk-c9eff144.js";import"./chunk-1591098a.js";function T(){return t.jsxs("div",{className:"wrapper-map-control-button",children:[t.jsxs("div",{className:"container-button-map-mode",children:[t.jsx(D,{}),t.jsx(v,{})]}),t.jsx("div",{children:t.jsx(w,{})})]})}function w(){const n=p(),i=r(a=>a.mapSlice.showListInRegionModalOn),s=()=>{n(L(!0)),i===!0&&n(f(!1))};return t.jsx("button",{type:"button",onClick:s,children:"ì—…ì¢… í•„í„°"})}function v(){const n=p(),i=r(a=>a.mapSlice.mapMode);function s(){x(!0),n(R(!0)),n(f(!1)),n(j("ì§€ì—­íƒìƒ‰ ëª¨ë“œ"))}return t.jsx("button",{onClick:s,className:`button-map-mode ${i==="ì§€ì—­íƒìƒ‰ ëª¨ë“œ"?"on":""}`,children:"ì§€ì—­ íƒìƒ‰ ëª¨ë“œ"})}function D(){const n=p(),i=r(l=>l.mapSlice.mapMode),s=r(l=>l.mapSlice.radius),[a,m]=o.useState(s),[c,d]=o.useState("m");o.useEffect(()=>{s<1e3?(m(s),d("m")):(m(s/1e3),d("km"))},[s]);const u=()=>{x(!0),n(y(!0)),n(j("ë°˜ê²½íƒìƒ‰ ëª¨ë“œ"))};return t.jsxs("button",{type:"button",onClick:u,className:`button-map-mode ${i==="ë°˜ê²½íƒìƒ‰ ëª¨ë“œ"?"on":""}`,children:[t.jsx("span",{children:"ë°˜ê²½ "}),t.jsx("span",{children:a}),t.jsx("span",{children:c}),t.jsx("span",{children:" íƒìƒ‰ ëª¨ë“œ"})]})}function $({isLoggedIn:n}){const i=p(),s=r(e=>e.mapSlice.radius),[a,m]=o.useState(!1),[c,d]=o.useState(null),u=r(e=>e.mapSlice.selectedCategory);o.useEffect(()=>{_(n),A().then(e=>{m(!0),d([e.getLng(),e.getLat()])})},[]);const l=o.useCallback(async e=>{if(Array.isArray(e))return await(await fetch(`${h}/map/within-radius-of?radius=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentLocation:e,category:u})})).json()},[s,u,c]),S=o.useCallback(async e=>{if(Array.isArray(e))return await(await fetch(`${h}/map/nearest?top=5`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentLocation:e})})).json()},[s,c]);return o.useEffect(()=>{a&&(N(),E(s),c&&(l(c).then(e=>{e.success&&(i(I(e.lists)),M(s))}),S(c).then(e=>{e.success&&i(b(e.lists))})))},[s,a,u,c]),t.jsx("div",{id:"map"})}function G(){const n=p(),i=()=>{O(),n(f(!1))};return t.jsx("button",{type:"button",onClick:i,className:"button-move-to-my",title:"ë‚´ ìœ„ì¹˜ë¡œ","aria-label":"ë‚´ ìœ„ì¹˜ë¡œ ì´ë™ ë²„íŠ¼"})}function U(){const n=r(a=>a.mapSlice.currentSido),i=r(a=>a.mapSlice.currentSigungu),s=r(a=>a.mapSlice.resultInRadius);return s.length>0?t.jsxs("p",{className:"txt-result-in-radius",children:["ë‚´ ìœ„ì¹˜(",`${n} ${i}`,")ì— ê²€ìƒ‰ëœ ì‹ë‹¹ ",t.jsx("span",{children:s.length}),"ê°œ"]}):t.jsxs("p",{className:"txt-result-in-radius",children:["ê²°ê³¼ê°€ ì—†ì–´ìš”!ğŸ˜¥",t.jsx("br",{}),"ê°€ì¥ ê°€ê¹Œìš´ ì‹ë‹¹ TOP 5"]})}function P(){return t.jsxs("div",{className:"wrapper-result-in-radius",children:[t.jsx(U,{}),t.jsx(k,{})]})}function ht({isLoggedIn:n}){return t.jsxs("main",{className:"main-map",children:[t.jsx(T,{}),t.jsx($,{isLoggedIn:n}),t.jsx(G,{}),t.jsx(P,{})]})}export{ht as default};
