{"version":3,"file":"chunk-41879ac8.js","sources":["../../../../pages/search/restaurant/RestaurantDetail/ReviewSection/component/Owner.tsx","../../../../pages/search/restaurant/RestaurantDetail/ReviewSection/component/Date.tsx","../../../../pages/search/restaurant/RestaurantDetail/ReviewSection/component/ReviewLikeButton.tsx","../../../../pages/search/restaurant/RestaurantDetail/ReviewSection/component/Content.tsx","../../../../pages/search/restaurant/RestaurantDetail/ReviewSection/component/MoreButton.tsx","../../../../pages/search/restaurant/RestaurantDetail/ReviewSection/ReviewListItem.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nexport { Owner };\r\n\r\nfunction Owner(props: { owner: string }) {\r\n    return (\r\n        <>\r\n            <dt className=\"sr-only\">작성자</dt>\r\n            <dd className=\"txt-review-owner\">{props.owner}</dd>\r\n        </>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { isSameDay } from '../../../../../../components/Date/isSameDay';\r\n\r\nexport { Date };\r\n\r\nfunction Date(props: { registeredAt: string }) {\r\n    const { registeredAt } = props;\r\n\r\n    const date = isSameDay(registeredAt)\r\n        ? `${registeredAt.split('. ').at(-1)?.split(':')[0]}:${registeredAt.split('. ').at(-1)?.split(':')[1]}`\r\n        : registeredAt.slice(0, 13);\r\n\r\n    return (\r\n        <>\r\n            <dt className=\"sr-only\">작성일자</dt>\r\n            <dd className=\"txt-review-date\">{date}</dd>\r\n        </>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { API_URL } from '../../../../../../renderer/CONSTANT_URL';\r\nimport imgHeart from '/images/icon-heart.svg';\r\n\r\nexport { ReviewLikeButton };\r\n\r\nfunction ReviewLikeButton(props: { reviewId: string; like: Array<{ user: string }> | undefined }) {\r\n    const { reviewId, like } = props;\r\n    const [userId, setUserId] = useState<string | null>(null);\r\n    const [likeCount, setLikeCount] = useState<number>(like ? like.length : 0);\r\n    const [buttonOn, setButtonOn] = useState<boolean>(false);\r\n\r\n    useEffect(() => {\r\n        getUserId();\r\n        async function getUserId() {\r\n            try {\r\n                const res = await fetch(`${API_URL}/users`);\r\n                const data = await res.json();\r\n\r\n                if (data.success) {\r\n                    setUserId(data.user.userId);\r\n                } else {\r\n                    setUserId(null);\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (like) {\r\n            setButtonOn(like.some((userInfo) => userInfo.user === userId));\r\n        }\r\n    }, [userId]);\r\n\r\n    function handleClick() {\r\n        buttonOn ? delLike() : addLike();\r\n        setButtonOn(buttonOn ? false : true);\r\n    }\r\n\r\n    async function addLike() {\r\n        const res = await fetch(`${API_URL}/reviews/${reviewId}/like`, {\r\n            credentials: 'include',\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ user: userId }),\r\n        });\r\n\r\n        if (res.ok) {\r\n            setLikeCount(likeCount + 1);\r\n        } else throw new Error();\r\n    }\r\n\r\n    async function delLike() {\r\n        const res = await fetch(`${API_URL}/reviews/${reviewId}/like`, {\r\n            credentials: 'include',\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ user: userId }),\r\n        });\r\n\r\n        if (res.ok) {\r\n            setLikeCount(likeCount - 1);\r\n        } else throw new Error();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <dt className=\"sr-only\">좋아요</dt>\r\n            <dd className=\"container-button-txt\">\r\n                <button className=\"button-review-like\" type=\"button\" onClick={handleClick}>\r\n                    <img src={imgHeart} alt=\"좋아요 이미지\" className={`img-like review ${buttonOn ? 'on' : ''}`} />\r\n                </button>\r\n                <span aria-label=\"좋아요 개수\">{likeCount}</span>\r\n            </dd>\r\n        </>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\nexport { Content };\r\n\r\nfunction Content(props: { content: string }) {\r\n    return (\r\n        <dl>\r\n            <dt className=\"sr-only\">내용</dt>\r\n            <dd className=\"txt-review-content\">{props.content}</dd>\r\n        </dl>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useAppDispatch } from '../../../../../../renderer/store/hooks';\r\nimport {\r\n    EDIT_DELETE_NOTIFY_MODAL,\r\n    SAME_USER_OWNER,\r\n    SET_RESTAURANT_ID,\r\n    SET_REVIEW_ID,\r\n} from '../../../../../../renderer/_reducers/_slices/reviewSlice';\r\nimport type { UserInfo } from '../../../../../../server/models/User';\r\n\r\nexport { MoreButton };\r\n\r\nfunction MoreButton({\r\n    userInfo,\r\n    owner,\r\n    reviewId,\r\n    restaurantId,\r\n}: {\r\n    userInfo: UserInfo | null;\r\n    owner: string;\r\n    reviewId: string;\r\n    restaurantId: string;\r\n}) {\r\n    const dispatch = useAppDispatch();\r\n\r\n    const [user, setUser] = useState<UserInfo | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (userInfo) setUser(userInfo);\r\n    }, [userInfo]);\r\n\r\n    const handleClick = () => {\r\n        const app = document.querySelector('.app');\r\n        app?.classList.add('modal-mode');\r\n\r\n        // 수정 삭제 신고 모달\r\n        dispatch(EDIT_DELETE_NOTIFY_MODAL(true));\r\n        dispatch(SAME_USER_OWNER(user?.userId === owner));\r\n        dispatch(SET_REVIEW_ID(reviewId));\r\n        dispatch(SET_RESTAURANT_ID(restaurantId));\r\n    };\r\n\r\n    return <button className=\"button-more reviewitem\" aria-label=\"더보기 버튼\" onClick={handleClick} />;\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Owner, Date, MoreButton, Image, ReviewLikeButton, Content } from './component/index.js';\r\nimport { useAppSelector } from '../../../../../renderer/store/hooks.js';\r\nimport type { Review } from '../../../../../server/models/Review';\r\nimport type { UserInfo } from '../../../../../server/models/User';\r\n\r\nexport { ReviewListItem };\r\n\r\nfunction ReviewListItem({\r\n    item,\r\n    userInfo,\r\n    restaurantId,\r\n    isFirst,\r\n}: {\r\n    item: Review;\r\n    userInfo: UserInfo | null;\r\n    restaurantId: string;\r\n    isFirst: boolean;\r\n}) {\r\n    const { _id, owner, registeredAt, photo, content, like, restaurant } = item;\r\n    const [myPage] = useState(window.location.pathname === '/my');\r\n\r\n    const listElement = useRef<HTMLLIElement>(null);\r\n    const currentPage = useAppSelector((state) => state.paginationSlice.currentPage);\r\n\r\n    useEffect(() => {\r\n        if (isFirst && listElement.current) {\r\n            if (currentPage !== 1) {\r\n                listElement.current.scrollIntoView({ block: 'center' });\r\n            }\r\n        }\r\n    }, [currentPage]);\r\n\r\n    return (\r\n        <li ref={listElement} className=\"list-review\">\r\n            {myPage ? (\r\n                <p className=\"txt-restaurant-in-my\">\r\n                    <em>{typeof restaurant !== 'string' ? restaurant.title : ''}</em>에 작성한 리뷰입니다.\r\n                </p>\r\n            ) : null}\r\n            <article className=\"container-reviewitem\">\r\n                <h5 className=\"sr-only\">개별 리뷰</h5>\r\n                <dl>\r\n                    <div className=\"style-wrapper-reviewitem\">\r\n                        <Owner owner={owner} />\r\n                        <Date registeredAt={registeredAt} />\r\n                        <MoreButton userInfo={userInfo} owner={owner} reviewId={_id} restaurantId={restaurantId} />\r\n                    </div>\r\n                    {photo && photo.length > 0 ? (\r\n                        <>\r\n                            <Image photoList={photo} />\r\n                            <div className=\"style-wrapper-reviewitem\">\r\n                                <ButtonGroup reviewId={_id} like={like || []} />\r\n                                <Content content={content} />\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"style-wrapper-reviewitem only-text\">\r\n                            <Content content={content} />\r\n                            <ButtonGroup reviewId={_id} like={like || []} />\r\n                        </div>\r\n                    )}\r\n                </dl>\r\n            </article>\r\n        </li>\r\n    );\r\n}\r\n\r\nfunction ButtonGroup({ reviewId, like }: { reviewId: string; like: Array<{ user: string }> }) {\r\n    return (\r\n        <dl className=\"container-like-comment\">\r\n            <ReviewLikeButton reviewId={reviewId} like={like} />\r\n            <ReviewCommentButton />\r\n        </dl>\r\n    );\r\n}\r\n\r\nfunction ReviewCommentButton() {\r\n    const handleClick = () => {\r\n        window.alert('준비 중인 서비스입니다.');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <dt className=\"sr-only\">댓글</dt>\r\n            <dd className=\"container-button-txt\">\r\n                <button\r\n                    type=\"button\"\r\n                    aria-label=\"리뷰 댓글 쓰기\"\r\n                    className=\"button-review-comment\"\r\n                    onClick={handleClick}\r\n                />\r\n                <span aria-label=\"댓글 개수\">0</span>\r\n            </dd>\r\n        </>\r\n    );\r\n}\r\n"],"names":["Owner","props","jsxs","Fragment","jsx","Date","registeredAt","date","isSameDay","_a","_b","ReviewLikeButton","reviewId","like","userId","setUserId","useState","likeCount","setLikeCount","buttonOn","setButtonOn","useEffect","getUserId","data","API_URL","err","userInfo","handleClick","delLike","addLike","imgHeart","Content","MoreButton","owner","restaurantId","dispatch","useAppDispatch","user","setUser","app","EDIT_DELETE_NOTIFY_MODAL","SAME_USER_OWNER","SET_REVIEW_ID","SET_RESTAURANT_ID","ReviewListItem","item","isFirst","_id","photo","content","restaurant","myPage","listElement","useRef","currentPage","useAppSelector","state","Image","ButtonGroup","ReviewCommentButton"],"mappings":"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"}