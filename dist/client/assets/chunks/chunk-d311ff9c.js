import{r as u,j as e}from"./chunk-0ad0329c.js";import{S as h,T as S,P as d,a as j,u as T}from"./chunk-b82a1d50.js";import"./chunk-da345742.js";import{b as A,c as E}from"./chunk-3185794e.js";const m=u.forwardRef(R);function R(r,c){const{postInfo:a}=r,{_id:n,subject:o,owner:p,title:l,content:i,photo:t,like:s,registeredAt:P,comments:f}=a,x=I(i),g="80px";return e.jsx("li",{ref:c,children:e.jsxs("a",{href:`/community/${n}`,style:{width:"100%",display:"flex",padding:"20px"},children:[e.jsxs("dl",{style:{width:`calc(100% - ${t&&t.length>0?g:"0px"})`},children:[e.jsx(h,{subject:o}),e.jsx(S,{title:l}),e.jsx(d,{content:x}),e.jsx(j,{owner:p,like:s,registeredAt:P,comments:f})]}),t&&t.length>0?e.jsx("dd",{children:e.jsx("img",{src:t[0].src,alt:"",style:{width:g,height:g,objectFit:"cover"}})}):null]})})}function I(r){return r.replaceAll(/<[^>]*>/g,"").replaceAll(/&[a-zA-Z0-9]*;/g,"")}function L(r){const{posts:c,limit:a}=r,n=u.useRef(null),o=A(),p=E(),[l,i]=T(()=>{const t=Math.ceil(o.getState().postSlice.post.TOTAL/a);o.getState().postSlice.post.CURRENT_PAGE<t&&p({type:"postSlice/POST_IN_PAGE",TOTAL:o.getState().postSlice.post.TOTAL,CURRENT_PAGE:o.getState().postSlice.post.CURRENT_PAGE+1})});return u.useEffect(()=>{const t=Math.ceil(o.getState().postSlice.post.TOTAL/a),s=o.getState().postSlice.post.CURRENT_PAGE;s===t?(i(n.current),console.log(`currentPage가 ${s}이고 lastPage가 ${t}여서 감시 중단`)):s<t&&(l(n.current),console.log(`currentPage가 ${s}이고 lastPage가 ${t}여서 감시 계속 =======`))},[l,i]),e.jsx("ul",{className:"wrapper-posts",children:c.map((t,s)=>s===c.length-1?e.jsx(m,{postInfo:t,ref:n},s):e.jsx(m,{postInfo:t},s))})}export{L as P};
