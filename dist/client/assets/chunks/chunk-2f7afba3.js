import{r as n,j as t}from"./chunk-0ad0329c.js";import{D as w}from"./chunk-b4209c58.js";import{a as j,A as p}from"./chunk-453d1d01.js";function N({restaurantId:i,restaurantTitle:s}){const[a,c]=n.useState(!1),o=n.useRef(null),u=j(e=>e.myListSlice.clicked);function m(){c(e=>!e)}n.useEffect(()=>(a&&window.addEventListener("click",d),()=>{window.addEventListener("click",d)}),[a]);function d(e){const r=e.target;o.current&&!o.current.contains(r)&&c(!1)}async function f(){try{const e=u==="북마크"?"bookmark":"like";confirm("해당 식당을 삭제하시겠습니까?")?(await(await fetch(`${p}/users/${e}/${i}`,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"}})).json()).success?(alert(`${s} 삭제가 완료되었습니다.`),window.location.reload()):alert("다시 시도해주세요."):c(!1)}catch(e){console.error(e)}}return t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button","aria-label":"더보기 버튼",className:"button-more",onClick:m,ref:o}),a&&t.jsx("div",{className:"container-more-option",children:t.jsx("ul",{children:t.jsx("li",{className:"list-option",onClick:f,children:t.jsx("div",{children:t.jsx("p",{className:"txt-delete",children:"삭제"})})})})})]})}function v({lists:i}){const[s,a]=n.useState([]),[c,o]=n.useState([]),[u,m]=n.useState([]);n.useEffect(()=>{(async()=>{const r=[];for(const l of i)try{if(typeof l._id=="string"){const h=await f(l._id);r.push(Object.assign(l,h))}}catch{console.error("북마크 그룹에 저장된 식당 _id에 대한 정보를 가져오는 데 실패했습니다.")}a(r)})()},[i]);const d=j(e=>e.myListSlice.groupNameOrder);n.useEffect(()=>{s.length!==0&&(o(s),m([...s].sort((e,r)=>e.restaurantInfo.title.localeCompare(r.restaurantInfo.title,"en"))))},[s]);async function f(e){return await(await fetch(`${p}/restaurants/${e}`)).json()}return s&&s.length>0?t.jsx("ul",{className:"ul-groupname",children:d==="등록순"?c.map(e=>t.jsx(x,{list:e},Math.random())):u.map(e=>t.jsx(x,{list:e},Math.random()))}):t.jsxs("div",{className:"style-wrapper-no-review",children:[t.jsx("div",{className:"txt-no-review",children:"😭"}),t.jsx("p",{children:"목록이 없어요."})]})}function x({list:i}){const{_id:s,title:a,location:c,address:o}=i.restaurantInfo;return t.jsxs("li",{className:"list-restaurant-inbookmark",children:[t.jsx("a",{href:`/search/${s}`,children:t.jsxs("div",{className:"container-restaurant-title-detail",children:[t.jsxs("div",{className:"style-container-title-date",children:[t.jsx("p",{className:"txt-title",children:a}),t.jsx("span",{className:"txt-date",children:i.registeredAt.slice(0,13)})]}),t.jsxs("div",{children:[t.jsx(w,{location:c.coordinates||[0,0]}),t.jsx("span",{className:"txt-address",children:o})]})]})}),t.jsx(N,{restaurantId:s,restaurantTitle:a})]})}export{v as B,x as L};
//# sourceMappingURL=chunk-2f7afba3.js.map
