import{r as n,j as t}from"./chunk-0ad0329c.js";import{D as w}from"./chunk-b4209c58.js";import{a as j,A as p}from"./chunk-453d1d01.js";function N({restaurantId:i,restaurantTitle:s}){const[a,c]=n.useState(!1),o=n.useRef(null),u=j(e=>e.myListSlice.clicked);function m(){c(e=>!e)}n.useEffect(()=>(a&&window.addEventListener("click",d),()=>{window.addEventListener("click",d)}),[a]);function d(e){const r=e.target;o.current&&!o.current.contains(r)&&c(!1)}async function f(){try{const e=u==="ë¶ë§ˆí¬"?"bookmark":"like";confirm("í•´ë‹¹ ì‹ë‹¹ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")?(await(await fetch(`${p}/users/${e}/${i}`,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"}})).json()).success?(alert(`${s} ì‚­ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`),window.location.reload()):alert("ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."):c(!1)}catch(e){console.error(e)}}return t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button","aria-label":"ë”ë³´ê¸° ë²„íŠ¼",className:"button-more",onClick:m,ref:o}),a&&t.jsx("div",{className:"container-more-option",children:t.jsx("ul",{children:t.jsx("li",{className:"list-option",onClick:f,children:t.jsx("div",{children:t.jsx("p",{className:"txt-delete",children:"ì‚­ì œ"})})})})})]})}function v({lists:i}){const[s,a]=n.useState([]),[c,o]=n.useState([]),[u,m]=n.useState([]);n.useEffect(()=>{(async()=>{const r=[];for(const l of i)try{if(typeof l._id=="string"){const h=await f(l._id);r.push(Object.assign(l,h))}}catch{console.error("ë¶ë§ˆí¬ ê·¸ë£¹ì— ì €ì¥ëœ ì‹ë‹¹ _idì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}a(r)})()},[i]);const d=j(e=>e.myListSlice.groupNameOrder);n.useEffect(()=>{s.length!==0&&(o(s),m([...s].sort((e,r)=>e.restaurantInfo.title.localeCompare(r.restaurantInfo.title,"en"))))},[s]);async function f(e){return await(await fetch(`${p}/restaurants/${e}`)).json()}return s&&s.length>0?t.jsx("ul",{className:"ul-groupname",children:d==="ë“±ë¡ìˆœ"?c.map(e=>t.jsx(x,{list:e},Math.random())):u.map(e=>t.jsx(x,{list:e},Math.random()))}):t.jsxs("div",{className:"style-wrapper-no-review",children:[t.jsx("div",{className:"txt-no-review",children:"ğŸ˜­"}),t.jsx("p",{children:"ëª©ë¡ì´ ì—†ì–´ìš”."})]})}function x({list:i}){const{_id:s,title:a,location:c,address:o}=i.restaurantInfo;return t.jsxs("li",{className:"list-restaurant-inbookmark",children:[t.jsx("a",{href:`/search/${s}`,children:t.jsxs("div",{className:"container-restaurant-title-detail",children:[t.jsxs("div",{className:"style-container-title-date",children:[t.jsx("p",{className:"txt-title",children:a}),t.jsx("span",{className:"txt-date",children:i.registeredAt.slice(0,13)})]}),t.jsxs("div",{children:[t.jsx(w,{location:c.coordinates||[0,0]}),t.jsx("span",{className:"txt-address",children:o})]})]})}),t.jsx(N,{restaurantId:s,restaurantTitle:a})]})}export{v as B,x as L};
//# sourceMappingURL=chunk-2f7afba3.js.map
