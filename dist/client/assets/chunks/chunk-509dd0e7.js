import{r as d,j as e}from"./chunk-0ad0329c.js";import{c as f,b as m,A as x}from"./chunk-0fac4abb.js";import{a as R,O as w,b,A as v,I as M,c as T,P as O,D as A,d as D,M as L,C,R as g,e as y,f as _}from"./chunk-1605fc2e.js";import{i as N}from"./chunk-e8bc0b58.js";import{I}from"./chunk-28eb4d4a.js";import{n as P}from"./chunk-c949b376.js";import{s as B}from"./chunk-b876d2a6.js";function U(){const s=f(),t=m(o=>o.myListSlice.groupNameOrder),n=m(o=>o.myListSlice.orderModalOn),[l,c]=d.useState(!1);d.useEffect(()=>{c(n===!0)},[n]);function r(o){s(R(o.currentTarget.innerText)),a()}function a(){const o=document.querySelector(".app");o==null||o.classList.remove("modal-mode"),s(w(!1))}return e.jsxs("article",{className:`modal-group-item ${l?"on":""}`,children:[e.jsx("h4",{children:"Ï†ïÎ†¨Í∏∞Ï§Ä"}),e.jsxs("div",{className:"container-button",children:[e.jsx("button",{type:"button",onClick:r,className:`button-groupname-order ${t==="Îì±Î°ùÏàú"?"on":""}`,children:"Îì±Î°ùÏàú"}),e.jsx("button",{type:"button",onClick:r,className:`button-groupname-order ${t==="Ïù¥Î¶ÑÏàú"?"on":""}`,children:"Ïù¥Î¶ÑÏàú"})]}),e.jsx("button",{type:"button",className:"button-close",onClick:a,children:e.jsx("img",{src:N,alt:"X ÏïÑÏù¥ÏΩò",className:"img-close"})})]})}function q(){const s=f(),t=m(r=>r.myListSlice.groupName),[n,l]=d.useState("");d.useEffect(()=>{t===""&&l("")},[t]);function c(r){l(r.target.value),s(b(r.target.value))}return e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"groupName",className:"sr-only",children:"Í∑∏Î£πÎ™Ö"}),e.jsx("input",{type:"text",id:"groupName",placeholder:"Í∑∏Î£πÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.",maxLength:20,minLength:1,onChange:c,value:n})]})}function H({userInfo:s}){const[t,n]=d.useState({disabled:!0}),l=m(a=>a.myListSlice.groupName),c=m(a=>a.myListSlice.selectedIcon);d.useEffect(()=>{l!==null?l.length!==0?n({disabled:!1}):n({disabled:!0}):n({disabled:!0})},[l]);async function r(){if(s!==null){const{userId:a}=s,i=await(await fetch(`${x}/bookmark/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,name:l,groupIcon:c})})).json();console.log(i),i.success===!0?window.location.reload():alert("Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.")}else alert(`Î°úÍ∑∏ÏïÑÏõÉ ÎêòÏóàÏäµÎãàÎã§.
Îã§Ïãú Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî.`),P("/login")}return e.jsx("button",{type:"button",className:`button-groupname-complete ${t?"on":""}`,onClick:r,children:"ÏôÑÎ£å"})}function X({userInfo:s}){const t=f(),n=m(a=>a.myListSlice.addGroupModalOn),[l,c]=d.useState(!1);d.useEffect(()=>{c(n===!0)},[n]);function r(){const a=document.querySelector(".app");a==null||a.classList.remove("modal-mode"),t(v(!1)),t(b("")),t(M("/images/icon-star.svg"))}return e.jsxs("article",{className:`modal-group-item ${l?"on":""}`,children:[e.jsx("h4",{children:"ÏÉà Í∑∏Î£π Ï∂îÍ∞Ä"}),e.jsxs("form",{children:[e.jsx(q,{}),e.jsx(I,{}),e.jsx(H,{userInfo:s})]}),e.jsx("button",{type:"button",className:"button-close",onClick:r,children:e.jsx("img",{src:N,alt:"X ÏïÑÏù¥ÏΩò",className:"img-close"})})]})}function F({bookmarkList:s}){return e.jsx("div",{children:s.length>0?s.map(t=>e.jsx(K,{list:t._id},Math.random())):e.jsxs("div",{className:"style-wrapper-no-review",children:[e.jsx("div",{className:"txt-no-review",children:"üò≠"}),e.jsx("p",{children:"Î™©Î°ùÏù¥ ÏóÜÏñ¥Ïöî."})]})})}function K({list:s}){const t=f(),{_id:n,title:l,address:c,category:r}=s,[a,o]=d.useState(!1),i=m(u=>u.myListSlice.restaurantToMove);d.useEffect(()=>{},[]);const h=u=>{if(o(u.target.checked),u.target.checked)t(T(1)),t(O([...i,n]));else{t(A(1));const p=[...i],j=p.indexOf(n);p.splice(j,1),t(D(p))}};return e.jsxs("label",{className:"label-bookmarklist",children:[e.jsx("input",{type:"checkbox",className:"checkbox-bookmarklist",checked:a,onChange:h}),e.jsx("div",{className:"wrapper-bookmarklist-edit",children:e.jsxs("dl",{children:[e.jsxs("dl",{className:"container-title-category",children:[e.jsx("dt",{className:"sr-only",children:"ÏãùÎãπ Ïù¥Î¶Ñ"}),e.jsx("dd",{className:"txt-title",children:l}),e.jsx("dt",{className:"sr-only",children:"ÏóÖÏ¢Ö"}),e.jsx("dd",{className:"txt-category",children:r})]}),e.jsxs("dl",{children:[e.jsx("dt",{className:"sr-only",children:"Ï£ºÏÜå"}),e.jsx("dd",{className:"txt-address",children:c})]})]})})]})}function V(){const s=f(),t=m(o=>o.myListSlice.countChecked),n=m(o=>o.myListSlice.restaurantToMove);function l(){s(L(!1)),s(C(!0))}async function c(){if(n.length>0){const o=n.map(i=>r(i));try{const i=await Promise.all(o);i.forEach((h,u)=>{u===i.length-1&&window.location.reload()})}catch(i){console.error("ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.",i)}}}async function r(o){return await(await fetch(`${x}/users/bookmark/${o}`,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"}})).json()}function a(){s(g()),s(y([]))}return e.jsxs("div",{className:"container-button-move",children:[e.jsx("button",{type:"reset",onClick:a,children:"ÏÑ†ÌÉù Ìï¥Ï†ú"}),e.jsxs("button",{type:"button",onClick:l,disabled:!t,children:[e.jsx("span",{className:"txt-copy-del",children:"Î≥µÏÇ¨"}),e.jsx("span",{children:t})]}),e.jsxs("button",{type:"button",disabled:!t,onClick:c,children:[e.jsx("span",{className:"txt-copy-del",children:"ÏÇ≠Ï†ú"}),e.jsx("span",{children:t})]})]})}function J({userInfo:s}){const[t,n]=d.useState(!1),[l,c]=d.useState([]),r=m(i=>i.myListSlice.moveListModalOn);d.useEffect(()=>{n(r===!0)},[r]);const a=m(i=>i.myListSlice.targetGroup);d.useEffect(()=>{s!==null&&o().then(i=>{if(i.success){const h=B.getState().myListSlice.targetGroup,u=i.bookmarkList.filter(p=>p.groupName===h);c(u)}})},[a]);async function o(){return await(await fetch(`${x}/users/bookmark`,{credentials:"include",method:"GET"})).json()}return e.jsxs("article",{className:`modal-group-item ${t?"on":""}`,children:[e.jsx("h4",{children:"Î™©Î°ù Ìé∏Ïßë"}),e.jsx(W,{bookmarkList:l}),e.jsx(Y,{})]})}function W({bookmarkList:s}){return e.jsxs("form",{children:[e.jsx(F,{bookmarkList:s}),e.jsx(V,{})]})}function Y(){const s=f();function t(){const n=document.querySelector(".app");n==null||n.classList.remove("modal-mode"),s(L(!1)),s(g()),s(y([]))}return e.jsx("button",{type:"button",className:"button-close",onClick:t,children:e.jsx("img",{src:N,alt:"X ÏïÑÏù¥ÏΩò",className:"img-close"})})}function z({userInfo:s,groupInfo:t,lists:n}){const{name:l,registeredAt:c,groupIcon:r}=t,[a]=d.useState(c.slice(0,13)),[o,i]=d.useState(0),[h,u]=d.useState(null);d.useEffect(()=>{if(n.length===0&&i(0),n.length>0){const k=n.filter(S=>S.groupName===l);i(k.length)}s!==null&&u(s)},[]);const p=m(k=>k.myListSlice.restaurantToMove);function j(){h!==null&&$(h.userId,l,p)}async function $(k,S,G){const E=await(await fetch(`${x}/users/update/bookmark`,{credentials:"include",method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:k,newGroupName:S,selectedRestaurant:G})})).json();E.success?(alert(`Î≥µÏÇ¨Í∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.
Î≥µÏÇ¨Í∞Ä ÏôÑÎ£åÎêú ÏõêÎ≥∏ÏùÄ ÏÇ≠Ï†úÎê©ÎãàÎã§.`),window.location.href="/my-lists"):console.error(E)}return e.jsx("li",{className:"li-bookmarkgroup copy",children:e.jsx("button",{onClick:j,children:e.jsxs("div",{className:"style-wrapper-groupname",children:[e.jsxs("div",{className:"style-wrapper-groupname-info",children:[e.jsx("div",{className:"container-groupicon",children:e.jsx("img",{src:r,alt:"Í∑∏Î£π ÏïÑÏù¥ÏΩò"})}),e.jsxs("div",{children:[e.jsx("p",{className:"txt-groupname",children:l}),e.jsxs("p",{className:"txt-restaurant-count",children:["Í∞úÏàò ",e.jsx("span",{className:"num-restaurant-count",children:o})]})]})]}),e.jsx("div",{className:"txt-group-date",children:a})]})})})}function Q(){const s=f();function t(){s(C(!1)),s(L(!0)),s(g()),s(y([]))}return e.jsx("button",{type:"button",className:"button-close",onClick:t,children:e.jsx("img",{src:N,alt:"X ÏïÑÏù¥ÏΩò",className:"img-close"})})}function Z({userInfo:s}){const t=m(u=>u.myListSlice.copyModalOn),n=m(u=>u.myListSlice.targetGroup),[l,c]=d.useState(!1),[r,a]=d.useState([]),[o,i]=d.useState([]);d.useEffect(()=>{c(t===!0)},[t]),d.useEffect(()=>{s!==null&&(h(s.userId).then(u=>{u.success&&a(u.groupList)}),i(s.bookmarkList))},[]);async function h(u){return await(await fetch(`${x}/bookmark/${u}`)).json()}return e.jsxs("article",{className:`modal-group-item ${l?"on":""}`,children:[e.jsx("h4",{children:"Î≥µÏÇ¨Ìï† Í∑∏Î£π ÏÑ†ÌÉù"}),e.jsx("ul",{className:"ul-groupname",children:r.filter(u=>u.name!==n).map(u=>e.jsx(z,{groupInfo:u,lists:o,userInfo:s},Math.random()))}),e.jsx(Q,{})]})}function pe({userInfo:s}){const t=m(a=>a.myListSlice.orderModalOn||a.myListSlice.addGroupModalOn||a.myListSlice.moveListModalOn||a.myListSlice.copyModalOn||a.myListSlice.deleteLikeListModalOn),[n,l]=d.useState(!1),c=f();d.useEffect(()=>{l(t===!0)},[t]),d.useEffect(()=>(n&&document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}),[n]);function r(a){if(a.target.className==="app modal-mode"){const o=document.querySelector(".app");o==null||o.classList.remove("modal-mode"),c(w(!1)),c(v(!1)),c(L(!1)),c(C(!1)),c(_(!1)),c(b("")),c(M("/images/icon-star.svg")),c(g()),c(y([]))}}return e.jsxs("div",{className:`modal-group ${n?"on":""}`,children:[e.jsx(U,{}),e.jsx(X,{userInfo:s}),e.jsx(J,{userInfo:s}),e.jsx(Z,{userInfo:s}),e.jsx(ee,{userInfo:s})]})}function ee({userInfo:s}){const[t,n]=d.useState(!1),[l,c]=d.useState([]),r=m(o=>o.myListSlice.deleteLikeListModalOn);d.useEffect(()=>{n(!!r)},[r]),d.useEffect(()=>{s!==null&&a().then(o=>{o.success&&c(o.likeList)})},[s]);async function a(){return await(await fetch(`${x}/users/like`,{credentials:"include",method:"GET"})).json()}return e.jsxs("article",{className:`modal-group-item ${t?"on":""}`,children:[e.jsx("h4",{children:"Î™©Î°ù ÏÇ≠Ï†ú"}),e.jsx(se,{likeList:l}),e.jsx(te,{})]})}function se({likeList:s}){return e.jsxs("form",{children:[e.jsx(ne,{likeList:s}),e.jsx(ae,{})]})}function te(){const s=f();function t(){const n=document.querySelector(".app");n==null||n.classList.remove("modal-mode"),s(_(!1)),s(g()),s(y([]))}return e.jsx("button",{type:"button",className:"button-close",onClick:t,children:e.jsx("img",{src:N,alt:"X ÏïÑÏù¥ÏΩò",className:"img-close"})})}function ne({likeList:s}){return e.jsx("div",{children:s.length>0?s.map(t=>e.jsx(oe,{list:t._id},Math.random())):e.jsxs("div",{className:"style-wrapper-no-review",children:[e.jsx("div",{className:"txt-no-review",children:"üò≠"}),e.jsx("p",{children:"Î™©Î°ùÏù¥ ÏóÜÏñ¥Ïöî."})]})})}function oe({list:s}){const t=f(),{_id:n,title:l,address:c,category:r}=s,[a,o]=d.useState(!1),i=m(u=>u.myListSlice.restaurantToMove),h=u=>{if(o(u.target.checked),u.target.checked)t(T(1)),t(O([...i,n]));else{t(A(1));const p=[...i],j=p.indexOf(n);p.splice(j,1),t(D(p))}};return e.jsxs("label",{className:"label-bookmarklist",children:[e.jsx("input",{type:"checkbox",className:"checkbox-bookmarklist",checked:a,onChange:h}),e.jsx("div",{className:"wrapper-bookmarklist-edit",children:e.jsxs("dl",{children:[e.jsxs("dl",{className:"container-title-category",children:[e.jsx("dt",{className:"sr-only",children:"ÏãùÎãπ Ïù¥Î¶Ñ"}),e.jsx("dd",{className:"txt-title",children:l}),e.jsx("dt",{className:"sr-only",children:"ÏóÖÏ¢Ö"}),e.jsx("dd",{className:"txt-category",children:r})]}),e.jsxs("dl",{children:[e.jsx("dt",{className:"sr-only",children:"Ï£ºÏÜå"}),e.jsx("dd",{className:"txt-address",children:c})]})]})})]})}function ae(){const s=f(),t=m(a=>a.myListSlice.countChecked),n=m(a=>a.myListSlice.restaurantToMove);async function l(){if(n.length>0){const a=n.map(o=>c(o));try{const o=await Promise.all(a);o.forEach((i,h)=>{h===o.length-1&&window.location.reload()})}catch(o){console.error("ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.",o)}}}async function c(a){return await(await fetch(`${x}/users/like/${a}`,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"}})).json()}function r(){s(g()),s(y([]))}return e.jsxs("div",{className:"container-button-move like",children:[e.jsx("button",{type:"reset",onClick:r,children:"ÏÑ†ÌÉù Ìï¥Ï†ú"}),e.jsxs("button",{type:"button",disabled:!t,onClick:l,children:[e.jsx("span",{className:"txt-copy-del",children:"ÏÇ≠Ï†ú"}),e.jsx("span",{children:t})]})]})}export{pe as M};
