import{j as s,r}from"./chunk-0ad0329c.js";import{I as L,c as E,A as j}from"./chunk-0fac4abb.js";import{P as C,a as P,S as I,b as M,d as A}from"./chunk-91c16fc8.js";import{R as v}from"./chunk-53b3a789.js";import{P as R}from"./chunk-db086f10.js";import"./chunk-da345742.js";import"./chunk-41308c4f.js";import"./chunk-dfbf6de9.js";import"./chunk-9ae07e36.js";import"./chunk-2b326172.js";import"./chunk-b82a1d50.js";import"./chunk-4a7b83e5.js";function b({host:e}){return s.jsx("div",{className:"container-notice profile",children:s.jsx("em",{children:s.jsxs("span",{children:[(()=>{switch(e){case"local":return"ìì²´ ê³„ì •";case"kakao":return"ë‹¤ìŒì¹´ì¹´ì˜¤ ê³„ì •";case"naver":return"ë„¤ì´ë²„ ê³„ì •";default:return"ìì²´ ê³„ì •"}})()," ","íšŒì› ì…ë‹ˆë‹¤."]})})})}const S="/images/default-profile.png";function O({userInfo:e}){return s.jsxs("li",{className:"style-wrapper-profile",children:[s.jsx(T,{userInfo:e}),s.jsx($,{userInfo:e})]})}function T({userInfo:e}){const{profileImage:t}=e,[a,n]=r.useState(S);return r.useEffect(()=>{e.profileImage?t.includes("http://")?n(t):t&&n(`${L}/${t}`):n(S)},[e]),s.jsxs("dl",{children:[s.jsx("dt",{className:"sr-only",children:"í”„ë¡œí•„ ì‚¬ì§„"}),s.jsx("dd",{children:s.jsx("div",{className:"container-profile-img",children:s.jsx("img",{src:a,alt:"í”„ë¡œí•„ ì‚¬ì§„"})})})]})}function $({userInfo:e}){const{nickName:t,bookmarkList:a,likeList:n,userId:l}=e;return s.jsxs("dl",{className:"wrapper-id-bookmark",children:[s.jsxs("dl",{className:"container-id-nick",children:[s.jsx("dt",{className:"sr-only",children:"ì•„ì´ë””"}),s.jsx("dd",{className:"txt-profile-userId",children:l}),s.jsx("dt",{className:"sr-only",children:"ë‹‰ë„¤ì„"}),s.jsx("dd",{className:"txt-profile-nickName",children:t})]}),s.jsxs("dl",{className:"container-profile-bookmark-like",children:[s.jsx("dt",{children:"ë¶ë§ˆí¬"}),s.jsx("dd",{className:"num-profile-bookmark",children:a.length}),s.jsx("dt",{children:"ì¢‹ì•„ìš”"}),s.jsx("dd",{className:"num-profile-like",children:n.length})]})]})}function _({userInfo:e}){const{nickName:t,userId:a}=e,n=E(),l=()=>{c(),n(C(!0))},o=()=>{c(),n(P(!0)),n(I(t))},m=()=>{c(),n(M(!0)),n(A(a))};function c(){const u=document.querySelector(".app");u==null||u.classList.add("modal-mode")}return s.jsxs("li",{className:"list-account",children:[s.jsx("p",{children:"ê³„ì •"}),s.jsxs("ul",{children:[s.jsx("li",{onClick:l,className:"list-edit",children:"í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½"}),s.jsx("li",{onClick:o,className:"list-edit",children:"ë‹‰ë„¤ì„ ë³€ê²½"}),s.jsx("li",{onClick:m,className:"list-edit",children:"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½"})]})]})}function D(){return s.jsxs("li",{className:"list-account",children:[s.jsx("p",{children:"ì•ˆë‚´"}),s.jsxs("ul",{children:[s.jsx("li",{className:"list-edit",children:s.jsx("a",{href:"",children:"ê³µì§€ì‚¬í•­"})}),s.jsx("li",{className:"list-edit",children:s.jsx("a",{href:"",children:"1:1 ë¬¸ì˜"})}),s.jsx("li",{className:"list-edit",children:s.jsx("a",{href:"",children:"ìì£¼ ì°¾ëŠ” ì§ˆë¬¸"})})]})]})}function w({userInfo:e}){async function t(){e.host==="kakao"&&await fetch(`${j}/oauth/kakao/logout`,{method:"POST"}),(await fetch(`${j}/users/logout`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}})).ok===!0&&(window.localStorage.removeItem("#1"),window.localStorage.removeItem("#2"),window.location.href="/")}return s.jsxs("section",{children:[s.jsx("h3",{className:"sr-only",children:"í”„ë¡œí•„"}),s.jsx(b,{host:e.host}),s.jsxs("ul",{className:"ul-profile",children:[s.jsx(O,{userInfo:e}),s.jsx(_,{userInfo:e}),s.jsx(D,{})]}),s.jsx("div",{className:"style-wrapper-logout",children:s.jsx("button",{type:"button",onClick:t,className:"styled-button",children:"ë¡œê·¸ì•„ì›ƒ"})})]})}function q({userInfo:e,reviews:t}){const[a,n]=r.useState("");return r.useEffect(()=>{t&&t.length>0&&t.forEach(l=>{typeof l.restaurant=="string"?n(l.restaurant):n(l.restaurant._id)})},[t]),s.jsxs("section",{className:"section-review",children:[s.jsx("h3",{className:"sr-only",children:"ì‹ë‹¹ ë¦¬ë·°"}),s.jsx("div",{className:"wrapper-review",children:t&&t.length>0?t.map((l,o)=>s.jsx(v,{item:l,userInfo:e,restaurantId:a,isFirst:o===0},Math.random())):s.jsxs("div",{className:"style-wrapper-no-review",children:[s.jsx("div",{className:"txt-no-review",children:"ğŸ˜­"}),s.jsx("p",{children:"ë¦¬ë·°ê°€ ì•„ì§ ì—†ì–´ìš”."})]})})]})}const F=["ì‘ì„±í•œ ê¸€","ëŒ“ê¸€ ë‹¨ ê¸€"];function U({userInfo:e}){const[t,a]=r.useState(window.localStorage.getItem("#2")||"ì‘ì„±í•œ ê¸€"),[n,l]=r.useState(null),[o,m]=r.useState({ì‘ì„±í•œê¸€:0,ëŒ“ê¸€ë‹¨ê¸€:0}),{nickName:c}=e,u=r.useRef([]);r.useEffect(()=>{const i=window.localStorage.getItem("#2"),h=[...document.querySelectorAll(".list-summary-community")];if(u.current=h,i){const d=F.indexOf(i);d!==-1&&(h[d].classList.add("on"),a(i))}else h[0].classList.add("on"),a("ì‘ì„±í•œ ê¸€");p(c).then(d=>{m(f=>({...f,ì‘ì„±í•œê¸€:d.posts.length}))}),N(c).then(d=>{m(f=>({...f,ëŒ“ê¸€ë‹¨ê¸€:d.posts.length}))})},[]),r.useEffect(()=>{t==="ì‘ì„±í•œ ê¸€"?p(c).then(i=>{i.success===!0&&i.posts?l(i.posts):l(null)}):t==="ëŒ“ê¸€ ë‹¨ ê¸€"&&N(c).then(i=>{i.success===!0&&i.posts?l(i.posts):l(null)})},[t]);function g(){u.current.forEach(i=>{i&&i.classList.remove("on")})}const p=r.useCallback(async i=>await(await fetch(`${j}/posts/my?boundary=post&owner=${i}`)).json(),[]),N=r.useCallback(async i=>await(await fetch(`${j}/posts/my?boundary=comment&owner=${i}`)).json(),[]);function y(i,h){var f,k;const d=i.currentTarget;g(),d.classList.add("on"),h==="ì‘ì„±í•œ ê¸€"?p(c).then(x=>{x.success===!0&&x.posts?l(x.posts):l(null)}):h==="ëŒ“ê¸€ ë‹¨ ê¸€"&&N(c).then(x=>{x.success===!0&&x.posts?l(x.posts):l(null)}),(f=d.lastElementChild)!=null&&f.innerHTML&&window.localStorage.setItem("#2",(k=d.lastElementChild)==null?void 0:k.innerHTML)}return s.jsxs("section",{children:[s.jsx("h3",{className:"sr-only",children:"ë‚´ê°€ ì“´ ê²Œì‹œê¸€ ë° ëŒ“ê¸€"}),s.jsxs("ul",{className:"ul-summary-community",children:[s.jsxs("li",{className:`list-summary-community ${t==="ì‘ì„±í•œ ê¸€"?"on":""}`,onClick:i=>y(i,"ì‘ì„±í•œ ê¸€"),children:[s.jsx("p",{children:o.ì‘ì„±í•œê¸€}),s.jsx("p",{children:"ì‘ì„±í•œ ê¸€"})]}),s.jsxs("li",{className:`list-summary-community ${t==="ëŒ“ê¸€ ë‹¨ ê¸€"?"on":""}`,onClick:i=>y(i,"ëŒ“ê¸€ ë‹¨ ê¸€"),children:[s.jsx("p",{children:o.ëŒ“ê¸€ë‹¨ê¸€}),s.jsx("p",{children:"ëŒ“ê¸€ ë‹¨ ê¸€"})]})]}),n&&n.length>0?s.jsx(R,{posts:n,limit:20}):s.jsxs("div",{className:"style-wrapper-no-review",children:[s.jsx("div",{className:"txt-no-review",children:"ğŸ˜­"}),s.jsx("p",{children:"ëª©ë¡ì´ ì—†ì–´ìš”."})]})]})}function ss({userInfo:e,reviews:t}){const[a,n]=r.useState("í”„ë¡œí•„");r.useEffect(()=>{const o=window.localStorage.getItem("#1"),m=["í”„ë¡œí•„","ì‹ë‹¹ ë¦¬ë·°","ì»¤ë®¤ë‹ˆí‹° í™œë™"],c=Array.from(document.querySelectorAll(".list-title"));o?(c[m.indexOf(o)].classList.add("on"),n(o)):c[0].classList.add("on")},[]);function l(o){const m=o.currentTarget;Array.from(document.querySelectorAll(".list-title")).forEach(u=>u.classList.remove("on")),m.classList.add("on"),n(m.innerText),window.localStorage.setItem("#1",m.innerText)}return s.jsxs("main",{className:"main-my",children:[s.jsxs("ul",{className:"ul-title-bar",children:[s.jsx("li",{className:"list-title",onClick:l,children:"í”„ë¡œí•„"}),s.jsx("li",{className:"list-title",onClick:l,children:"ì‹ë‹¹ ë¦¬ë·°"}),s.jsx("li",{className:"list-title",onClick:l,children:"ì»¤ë®¤ë‹ˆí‹° í™œë™"})]}),(()=>{switch(a){case"í”„ë¡œí•„":return s.jsx(w,{userInfo:e});case"ì‹ë‹¹ ë¦¬ë·°":return s.jsx(q,{userInfo:e,reviews:t});case"ì»¤ë®¤ë‹ˆí‹° í™œë™":return s.jsx(U,{userInfo:e});default:return s.jsx(w,{userInfo:e})}})()]})}export{ss as default};
