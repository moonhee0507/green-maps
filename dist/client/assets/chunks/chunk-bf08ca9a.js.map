{"version":3,"file":"chunk-bf08ca9a.js","sources":["../../../../node_modules/vite-plugin-ssr/dist/esm/utils/isBrowser.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/isNodeJS.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/createErrorWithCleanStackTrace.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/getGlobalObject.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/unique.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/assertSingleInstance.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/projectInfo.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/assert.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/assertRoutingType.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/humanizeTime.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/callHookWithTimeout.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/slice.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/parseUrl.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/getCurrentUrl.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/isCallable.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/isObject.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/hasProp.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/objectAssign.js","../../../../node_modules/vite-plugin-ssr/dist/esm/client/utils.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/isScriptFile.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/sorter.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/compareString.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/isNotNullish.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/filesystemPathHandling.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/isNpmPackage.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/assertDefaultExport.js","../../../../node_modules/vite-plugin-ssr/dist/esm/utils/objectEntries.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/assertExports.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/getExports.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/determinePageIdOld.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/assertPageFilePath.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/error-page.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/fileTypes.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/getPageFileObject.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/assertPageConfigs.js","../../../../node_modules/@brillout/json-serializer/dist/esm/types.js","../../../../node_modules/@brillout/json-serializer/dist/esm/parse.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/parsePageConfigs.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/parseGlobResults.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/setPageFiles.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getPageFiles/getAllPageIdFiles.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/page-configs/findPageConfig.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/page-configs/loadPageCode.js","../../../../node_modules/vite-plugin-ssr/dist/esm/client/loadPageFilesClientSide.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/page-configs/utils.js","../../../../node_modules/vite-plugin-ssr/dist/esm/client/getPageContextSerializedInHtml.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/getHook.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/sortPageContext.js","../../../../node_modules/vite-plugin-ssr/dist/esm/shared/addIs404ToPageProps.js","../../../../node_modules/vite-plugin-ssr/dist/esm/client/releasePageContext.js","../../../../node_modules/vite-plugin-ssr/dist/esm/client/executeOnRenderClientHook.js"],"sourcesContent":["export function isBrowser() {\n    // Using `typeof window !== 'undefined'` alone is not enough because some users use https://www.npmjs.com/package/ssr-window\n    return typeof window !== 'undefined' && typeof window.scrollY === 'number';\n}\n","export function isNodeJS() {\n    if (typeof process === 'undefined')\n        return false;\n    if (!process.cwd)\n        return false;\n    // https://stackoverflow.com/questions/4224606/how-to-check-whether-a-script-is-running-under-node-js/35813135#35813135\n    if (!process.versions || typeof process.versions.node === 'undefined')\n        return false;\n    // https://stackoverflow.com/questions/4224606/how-to-check-whether-a-script-is-running-under-node-js/35813135#comment92529277_35813135\n    if (!process.release || process.release.name !== 'node')\n        return false;\n    return true;\n}\n","export { createErrorWithCleanStackTrace };\nimport { isNodeJS } from './isNodeJS';\nfunction createErrorWithCleanStackTrace(errorMessage, numberOfStackTraceLinesToRemove) {\n    let err;\n    {\n        var stackTraceLimit__original = Error.stackTraceLimit;\n        Error.stackTraceLimit = Infinity;\n        err = new Error(errorMessage);\n        Error.stackTraceLimit = stackTraceLimit__original;\n    }\n    if (isNodeJS()) {\n        err.stack = clean(err.stack, numberOfStackTraceLinesToRemove);\n    }\n    return err;\n}\nfunction clean(errStack, numberOfStackTraceLinesToRemove) {\n    if (!errStack) {\n        return errStack;\n    }\n    const stackLines = splitByLine(errStack);\n    let linesRemoved = 0;\n    const stackLine__cleaned = stackLines\n        .filter((line) => {\n        // Remove internal stack traces\n        if (line.includes(' (internal/') || line.includes(' (node:internal')) {\n            return false;\n        }\n        if (linesRemoved < numberOfStackTraceLinesToRemove && isStackTraceLine(line)) {\n            linesRemoved++;\n            return false;\n        }\n        return true;\n    })\n        .join('\\n');\n    return stackLine__cleaned;\n}\nfunction isStackTraceLine(line) {\n    return line.startsWith('    at ');\n}\nfunction splitByLine(str) {\n    // https://stackoverflow.com/questions/21895233/how-in-node-to-split-string-by-newline-n\n    return str.split(/\\r?\\n/);\n}\n","export function getGlobalObject(\n// We use the filename as key; each `getGlobalObject()` call should live in a unique filename.\nkey, defaultValue) {\n    const allGlobalObjects = (globalThis.__vite_plugin_ssr = globalThis.__vite_plugin_ssr || {});\n    const globalObject = (allGlobalObjects[key] = allGlobalObjects[key] || defaultValue);\n    return globalObject;\n}\n","export { unique };\nfunction unique(arr) {\n    return Array.from(new Set(arr));\n}\n","export { onClientEntry_ServerRouting };\nexport { onClientEntry_ClientRouting };\nexport { onProjectInfo };\n//  - Throw error if there are two different versions of vite-plugin-ssr loaded\n//  - Show warning if entry of Client Routing and entry of Server Routing are both loaded\n//  - Show warning if vite-plugin-ssr is loaded twice\nimport { unique } from './unique';\nimport { getGlobalObject } from './getGlobalObject';\n/* Use original assertUsage() & assertWarning() after all CJS is removed from node_modules/vite-plugin-ssr/dist/\nimport { assertUsage, assertWarning } from './assert'\n*/\nconst globalObject = getGlobalObject('assertPackageInstances.ts', {\n    instances: [],\n    alreadyLogged: new Set()\n});\nconst makeSure = \"Make sure your client-side code doesn't include(/bundle)\";\nconst clientEntryClonflict = `The client runtime of Server Routing and the client runtime of Client Routing are both being loaded. ${makeSure} both for a given page.`;\nconst clientNotSingleInstance = `Two vite-plugin-ssr client runtime instances are being loaded. ${makeSure} vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)`;\nfunction assertSingleInstance() {\n    {\n        const versions = unique(globalObject.instances);\n        if (versions.length > 1) {\n            const errMsg = `Both vite-plugin-ssr@${versions[0]} and vite-plugin-ssr@${versions[1]} loaded. Only one version should be loaded.`;\n            /*/ Not sure whether circular dependency can cause problems? In principle not since client-side code is ESM.\n            console.warn(errMsg)\n            /*/\n            assertUsage(false, errMsg);\n            //*/\n        }\n    }\n    if (globalObject.checkSingleInstance && globalObject.instances.length > 1) {\n        /*/ Not sure whether circular dependency can cause problems? In principle not since client-side code is ESM.\n        console.warn(clientNotSingleInstance)\n        /*/\n        assertWarning(false, clientNotSingleInstance, { onlyOnce: true, showStackTrace: true });\n        //*/\n    }\n}\nfunction onClientEntry_ServerRouting(isProduction) {\n    assertWarning(globalObject.isClientRouting !== true, clientEntryClonflict, { onlyOnce: true, showStackTrace: true });\n    assertWarning(globalObject.isClientRouting === undefined, clientNotSingleInstance, {\n        onlyOnce: true,\n        showStackTrace: true\n    });\n    globalObject.isClientRouting = false;\n    if (isProduction)\n        globalObject.checkSingleInstance = true;\n    assertSingleInstance();\n}\nfunction onClientEntry_ClientRouting(isProduction) {\n    assertWarning(globalObject.isClientRouting !== false, clientEntryClonflict, { onlyOnce: true, showStackTrace: true });\n    assertWarning(globalObject.isClientRouting === undefined, clientNotSingleInstance, {\n        onlyOnce: true,\n        showStackTrace: true\n    });\n    globalObject.isClientRouting = true;\n    if (isProduction)\n        globalObject.checkSingleInstance = true;\n    assertSingleInstance();\n}\n// Called by utils/projectInfo.ts which is loaded by all entries (since utils/asserts.ts depends on utils/projectInfo.ts, we can have confidence that onProjectInfo() is called by each entry). That way we don't have to call a callback for every entry (there are a *lot* of entries: `client/router/`, `client/`, `node/runtime/`, `node/plugin/`, `node/cli`).\nfunction onProjectInfo(projectVersion) {\n    globalObject.instances.push(projectVersion);\n    assertSingleInstance();\n}\nfunction assertUsage(condition, errorMessage) {\n    if (condition) {\n        return;\n    }\n    const errMsg = `[vite-plugin-ssr][Wrong Usage] ${errorMessage}`;\n    throw new Error(errMsg);\n}\nfunction assertWarning(condition, errorMessage, { onlyOnce, showStackTrace }) {\n    if (condition) {\n        return;\n    }\n    const msg = `[vite-plugin-ssr][Warning] ${errorMessage}`;\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = onlyOnce === true ? msg : onlyOnce;\n        if (alreadyLogged.has(key)) {\n            return;\n        }\n        else {\n            alreadyLogged.add(key);\n        }\n    }\n    if (showStackTrace) {\n        console.warn(new Error(msg));\n    }\n    else {\n        console.warn(msg);\n    }\n}\n","import { onProjectInfo } from './assertSingleInstance';\nconst PROJECT_VERSION = '0.4.131';\nexport const projectInfo = {\n    projectName: 'vite-plugin-ssr',\n    projectVersion: PROJECT_VERSION,\n    npmPackageName: 'vite-plugin-ssr',\n    githubRepository: 'https://github.com/brillout/vite-plugin-ssr'\n};\n// Trick: since `utils/asserts.ts` depends on this file (`utils/projectInfo.ts`), we can have confidence that this file is always instantiated. So that we don't have to initialize this code snippet at every possible entry. (There are a *lot* of entries: `client/router/`, `client/`, `node/`, `node/plugin/`, `node/cli`, etc.)\nonProjectInfo(projectInfo.projectVersion);\n","export { assert };\nexport { assertUsage };\nexport { assertWarning };\nexport { assertInfo };\nexport { getProjectError };\nexport { logPrefix };\nexport { addOnBeforeLogHook };\nimport { createErrorWithCleanStackTrace } from './createErrorWithCleanStackTrace';\nimport { getGlobalObject } from './getGlobalObject';\nimport { projectInfo } from './projectInfo';\nconst globalObject = getGlobalObject('assert.ts', {\n    alreadyLogged: new Set()\n});\nconst logPrefix = `[${projectInfo.npmPackageName}@${projectInfo.projectVersion}]`;\nconst internalErrorPrefix = `${logPrefix}[Bug]`;\nconst usageErrorPrefix = `${logPrefix}[Wrong Usage]`;\nconst warningPrefix = `${logPrefix}[Warning]`;\nconst infoPrefix = `${logPrefix}[Info]`;\nconst numberOfStackTraceLinesToRemove = 2;\nfunction assert(condition, debugInfo) {\n    var _a;\n    if (condition) {\n        return;\n    }\n    const debugStr = (() => {\n        if (!debugInfo) {\n            return null;\n        }\n        const debugInfoSerialized = typeof debugInfo === 'string' ? debugInfo : '`' + JSON.stringify(debugInfo) + '`';\n        return `Debug info (this is for the ${projectInfo.projectName} maintainers; you can ignore this): ${debugInfoSerialized}`;\n    })();\n    const internalError = createErrorWithCleanStackTrace([\n        `${internalErrorPrefix} You stumbled upon a bug in ${projectInfo.projectName}'s source code.`,\n        `Go to ${projectInfo.githubRepository}/issues/new and copy-paste this error. (The error's stack trace is usually enough to fix the problem).`,\n        'A maintainer will fix the bug (usually under 24 hours).',\n        `Don't hesitate to reach out as it makes ${projectInfo.projectName} more robust.`,\n        debugStr\n    ]\n        .filter(Boolean)\n        .join(' '), numberOfStackTraceLinesToRemove);\n    (_a = globalObject.onBeforeLog) === null || _a === void 0 ? void 0 : _a.call(globalObject);\n    throw internalError;\n}\nfunction assertUsage(condition, errorMessage) {\n    var _a;\n    if (condition) {\n        return;\n    }\n    const whiteSpace = errorMessage.startsWith('[') ? '' : ' ';\n    const errMsg = `${usageErrorPrefix}${whiteSpace}${errorMessage}`;\n    const usageError = createErrorWithCleanStackTrace(errMsg, numberOfStackTraceLinesToRemove);\n    (_a = globalObject.onBeforeLog) === null || _a === void 0 ? void 0 : _a.call(globalObject);\n    throw usageError;\n}\nfunction getProjectError(errorMessage) {\n    const sep = errorMessage.startsWith('[') ? '' : ' ';\n    const pluginError = createErrorWithCleanStackTrace(`${logPrefix}${sep}${errorMessage}`, numberOfStackTraceLinesToRemove);\n    return pluginError;\n}\nfunction assertWarning(condition, errorMessage, { onlyOnce = true, showStackTrace = false } = {}) {\n    var _a;\n    if (condition) {\n        return;\n    }\n    const msg = `${warningPrefix} ${errorMessage}`;\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = onlyOnce === true ? msg : onlyOnce;\n        if (alreadyLogged.has(key)) {\n            return;\n        }\n        else {\n            alreadyLogged.add(key);\n        }\n    }\n    (_a = globalObject.onBeforeLog) === null || _a === void 0 ? void 0 : _a.call(globalObject);\n    if (showStackTrace) {\n        console.warn(new Error(msg));\n    }\n    else {\n        console.warn(msg);\n    }\n}\nfunction assertInfo(condition, errorMessage, { onlyOnce }) {\n    var _a;\n    if (condition) {\n        return;\n    }\n    const msg = `${infoPrefix} ${errorMessage}`;\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = msg;\n        if (alreadyLogged.has(key)) {\n            return;\n        }\n        else {\n            alreadyLogged.add(key);\n        }\n    }\n    (_a = globalObject.onBeforeLog) === null || _a === void 0 ? void 0 : _a.call(globalObject);\n    console.log(msg);\n}\nfunction addOnBeforeLogHook(onBeforeLog) {\n    globalObject.onBeforeLog = onBeforeLog;\n}\n","export { assertClientRouting };\nexport { assertServerRouting };\nexport { checkIfClientRouting };\nimport { assertUsage, assertWarning } from './assert';\nimport { getGlobalObject } from './getGlobalObject';\nimport { isBrowser } from './isBrowser';\nconst state = getGlobalObject('utils/assertRouterType.ts', {});\nfunction assertClientRouting() {\n    assertNoContradiction(checkIfClientRouting());\n    state.isClientRouting = true;\n}\nfunction checkIfClientRouting() {\n    return state.isClientRouting !== false;\n}\nfunction assertServerRouting() {\n    assertNoContradiction(state.isClientRouting !== true);\n    state.isClientRouting = false;\n}\nfunction assertNoContradiction(noContradiction) {\n    // If an assertion fails because of a wrong usage, then we assume that the user is trying to import from 'vite-plugin-ssr/client/router' while not setting `clientRouting` to `true`. Note that 'vite-plugin-ssr/client' only exports the type `PageContextBuiltInClient` and that the package.json#exports entry 'vite-plugin-ssr/client' will eventually be removed.\n    assertUsage(isBrowser(), \"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side\");\n    assertWarning(noContradiction, \"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` when using Server Routing as these will unnecessarily bloat your client-side bundle.\", { showStackTrace: false, onlyOnce: true });\n}\n","export { humanizeTime };\nfunction humanizeTime(milliseconds) {\n    const seconds = milliseconds / 1000;\n    if (seconds < 120) {\n        const n = round(seconds);\n        return `${n} second${plural(n)}`;\n    }\n    {\n        const minutes = seconds / 60;\n        const n = round(minutes);\n        return `${n} minute${plural(n)}`;\n    }\n}\nfunction round(n) {\n    let rounded = n.toFixed(1);\n    if (rounded.endsWith('.0'))\n        rounded = rounded.slice(0, -2);\n    return rounded;\n}\nfunction plural(n) {\n    return n === '1' ? '' : 's';\n}\n","export { callHookWithTimeout };\nimport { logPrefix, getProjectError } from './assert';\nimport { humanizeTime } from './humanizeTime';\nfunction callHookWithTimeout(hookFn, hookName, hookFilePath) {\n    const { timeoutErr, timeoutWarn } = getTimeouts(hookName);\n    let resolve;\n    let reject;\n    const promise = new Promise((resolve_, reject_) => {\n        resolve = (ret) => {\n            clearTimeouts();\n            resolve_(ret);\n        };\n        reject = (err) => {\n            clearTimeouts();\n            reject_(err);\n        };\n    });\n    const clearTimeouts = () => {\n        clearTimeout(t1);\n        clearTimeout(t2);\n    };\n    const t1 = setTimeout(() => {\n        const msg = `${logPrefix}[Warning] The ${hookName}() hook defined by ${hookFilePath} is taking more than ${humanizeTime(timeoutWarn)}`;\n        console.warn(msg);\n    }, timeoutWarn);\n    const t2 = setTimeout(() => {\n        const err = getProjectError(`Hook timeout: the ${hookName}() hook defined by ${hookFilePath} didn't finish after ${humanizeTime(timeoutErr)}`);\n        reject(err);\n    }, timeoutErr);\n    (async () => {\n        try {\n            const ret = await hookFn();\n            resolve(ret);\n        }\n        catch (err) {\n            reject(err);\n        }\n    })();\n    return promise;\n}\nfunction getTimeouts(hookName) {\n    let timeoutErr = 40 * 1000;\n    let timeoutWarn = 4 * 1000;\n    if (hookName === 'onBeforeRoute') {\n        timeoutErr = 5 * 1000;\n        timeoutWarn = 1 * 1000;\n    }\n    if (hookName === 'onBeforePrerender') {\n        timeoutErr = 10 * 60 * 1000;\n        timeoutWarn = 30 * 1000;\n    }\n    return { timeoutErr, timeoutWarn };\n}\n","import { assert } from './assert';\nexport { slice };\nfunction slice(thing, from, to) {\n    if (typeof thing === 'string') {\n        return sliceArray(thing.split(''), from, to).join('');\n    }\n    else {\n        return sliceArray(thing, from, to);\n    }\n}\nfunction sliceArray(list, from, to) {\n    const listSlice = [];\n    let start = from >= 0 ? from : list.length + from;\n    assert(start >= 0 && start <= list.length);\n    let end = to >= 0 ? to : list.length + to;\n    assert(end >= 0 && end <= list.length);\n    while (true) {\n        if (start === end) {\n            break;\n        }\n        if (start === list.length) {\n            start = 0;\n        }\n        if (start === end) {\n            break;\n        }\n        const el = list[start];\n        assert(el !== undefined);\n        listSlice.push(el);\n        start++;\n    }\n    return listSlice;\n}\n","// Unit tests at ./parseUrl.spec.ts\nexport { parseUrl };\nexport { isParsable };\nexport { prependBase };\nexport { assertUsageBaseServer };\nexport { assertUsageUrl };\nexport { normalizeBaseServer };\nexport { isBaseServer };\nexport { isBaseAssets };\nimport { slice } from './slice';\nimport { assert, assertUsage } from './assert';\nfunction isParsable(url) {\n    // `parseUrl()` works with these URLs\n    return (url.startsWith('/') ||\n        url.startsWith('http') ||\n        url.startsWith('tauri://') ||\n        url.startsWith('.') ||\n        url.startsWith('?') ||\n        url.startsWith('#') ||\n        url === '');\n}\nfunction assertUsageUrl(url, errPrefix) {\n    assert(errPrefix.includes(' but '));\n    assertUsage(typeof url === 'string', `${errPrefix} should be a string`);\n    if (isParsable(url))\n        return;\n    if (!url.startsWith('/') && !url.includes(':')) {\n        assertUsage(false, `${errPrefix} is '${url}' and it should be '/${url}' instead (URL pathnames should start with a leading slash)`);\n    }\n    else {\n        assertUsage(false, `${errPrefix} isn't a valid URL`);\n    }\n}\nfunction parseUrl(url, baseServer) {\n    assert(isParsable(url), { url });\n    assert(baseServer.startsWith('/'), { url, baseServer });\n    // Hash\n    const [urlWithoutHash, ...hashList] = url.split('#');\n    assert(urlWithoutHash !== undefined);\n    const hashOriginal = ['', ...hashList].join('#') || null;\n    assert(hashOriginal === null || hashOriginal.startsWith('#'));\n    const hash = hashOriginal === null ? '' : decodeSafe(hashOriginal.slice(1));\n    // Search\n    const [urlWithoutSearch, ...searchList] = urlWithoutHash.split('?');\n    assert(urlWithoutSearch !== undefined);\n    const searchOriginal = ['', ...searchList].join('?') || null;\n    assert(searchOriginal === null || searchOriginal.startsWith('?'), { url, searchOriginal });\n    const search = {};\n    const searchAll = {};\n    Array.from(new URLSearchParams(searchOriginal || '')).forEach(([key, val]) => {\n        search[key] = val;\n        searchAll[key] = [...(searchAll[key] || []), val];\n    });\n    // Origin + pathname\n    const { origin, pathnameResolved } = parseWithNewUrl(urlWithoutSearch, baseServer);\n    assert(origin === null || origin === decodeSafe(origin), { origin }); // AFAICT decoding the origin is useless\n    assert(pathnameResolved.startsWith('/'), { url, pathnameResolved });\n    assert(origin === null || url.startsWith(origin), { url, origin });\n    // `pathnameOriginal`\n    const pathnameOriginal = urlWithoutSearch.slice((origin || '').length);\n    {\n        const urlRecreated = `${origin || ''}${pathnameOriginal}${searchOriginal || ''}${hashOriginal || ''}`;\n        assert(url === urlRecreated, { url, urlRecreated });\n    }\n    // Base URL\n    let { pathname, hasBaseServer } = analyzeBaseServer(pathnameResolved, baseServer);\n    pathname = decodePathname(pathname);\n    assert(pathname.startsWith('/'));\n    return {\n        origin,\n        pathname,\n        pathnameOriginal: pathnameOriginal,\n        hasBaseServer,\n        search,\n        searchAll,\n        searchOriginal,\n        hash,\n        hashOriginal\n    };\n}\nfunction decodeSafe(urlComponent) {\n    try {\n        return decodeURIComponent(urlComponent);\n    }\n    catch { }\n    try {\n        return decodeURI(urlComponent);\n    }\n    catch { }\n    return urlComponent;\n}\nfunction decodePathname(urlPathname) {\n    return urlPathname\n        .split('/')\n        .map((dir) => decodeSafe(dir).split('/').join('%2F'))\n        .join('/');\n}\nfunction parseWithNewUrl(urlWithoutSearch, baseServer) {\n    var _a;\n    // `new URL('//', 'https://example.org')` throws `ERR_INVALID_URL`\n    if (urlWithoutSearch.startsWith('//')) {\n        return { origin: null, pathnameResolved: urlWithoutSearch };\n    }\n    let isTauriProtocol = false;\n    const PROTOCOL_TAURI = 'tauri://';\n    const PROTOCOL_FAKE = 'http://';\n    if (urlWithoutSearch.startsWith(PROTOCOL_TAURI)) {\n        isTauriProtocol = true;\n        urlWithoutSearch = PROTOCOL_FAKE + urlWithoutSearch.slice(PROTOCOL_TAURI.length);\n    }\n    let origin;\n    let pathnameResolved;\n    try {\n        // `new URL(url)` throws an error if `url` doesn't have an origin\n        const urlParsed = new URL(urlWithoutSearch);\n        origin = urlParsed.origin;\n        pathnameResolved = urlParsed.pathname;\n    }\n    catch (err) {\n        // `url` has no origin\n        origin = null;\n        // In the browser, this is the Base URL of the current URL\n        let base = typeof window !== 'undefined' &&\n            (\n            // We need to access safely in case the user sets `window` in Node.js\n            (_a = window === null || window === void 0 ? void 0 : window.document) === null || _a === void 0 ? void 0 : _a.baseURI);\n        base = base || 'http://fake.example.org' + baseServer;\n        // `new Url()` supports:\n        //  - `url === '/absolute/path'`\n        //  - `url === './relative/path'`\n        //  - `url === '?queryWithoutPath'`\n        //  - `url === '''`\n        // `base` in `new URL(url, base)` is used for resolving relative paths (`new URL()` doesn't remove `base` from `pathname`)\n        const urlParsed = new URL(urlWithoutSearch, base);\n        pathnameResolved = urlParsed.pathname;\n    }\n    if (!pathnameResolved)\n        pathnameResolved = '/';\n    if (isTauriProtocol) {\n        assert(origin);\n        assert(origin.startsWith(PROTOCOL_FAKE));\n        origin = PROTOCOL_TAURI + origin.slice(PROTOCOL_FAKE.length);\n    }\n    assert(pathnameResolved.startsWith('/'), { urlWithoutSearch, pathnameResolved });\n    // The URL pathname should be the URL without origin, query string, and hash.\n    //  - https://developer.mozilla.org/en-US/docs/Web/API/URL/pathname\n    assert(pathnameResolved === pathnameResolved.split('?')[0].split('#')[0]);\n    return { origin, pathnameResolved };\n}\nfunction assertUsageBaseServer(baseServer, usageErrorMessagePrefix = '') {\n    assertUsage(!baseServer.startsWith('http'), usageErrorMessagePrefix +\n        '`base` is not allowed to start with `http`. Consider using `baseAssets` instead, see https://vite-plugin-ssr.com/base-url');\n    assertUsage(baseServer.startsWith('/'), usageErrorMessagePrefix + 'Wrong `base` value `' + baseServer + '`; `base` should start with `/`.');\n    assert(isBaseServer(baseServer));\n}\nfunction assertPathname(urlPathname) {\n    assert(urlPathname.startsWith('/'));\n    assert(!urlPathname.includes('?'));\n    assert(!urlPathname.includes('#'));\n}\nfunction analyzeBaseServer(urlPathnameWithBase, baseServer) {\n    assertPathname(urlPathnameWithBase);\n    assert(isBaseServer(baseServer));\n    // Mutable\n    let urlPathname = urlPathnameWithBase;\n    assert(urlPathname.startsWith('/'));\n    assert(baseServer.startsWith('/'));\n    if (baseServer === '/') {\n        const pathname = urlPathnameWithBase;\n        return { pathname, hasBaseServer: true };\n    }\n    // Support `url === '/some-base-url' && baseServer === '/some-base-url/'`\n    let baseServerNormalized = baseServer;\n    if (baseServer.endsWith('/') && urlPathname === slice(baseServer, 0, -1)) {\n        baseServerNormalized = slice(baseServer, 0, -1);\n        assert(urlPathname === baseServerNormalized);\n    }\n    if (!urlPathname.startsWith(baseServerNormalized)) {\n        const pathname = urlPathnameWithBase;\n        return { pathname, hasBaseServer: false };\n    }\n    assert(urlPathname.startsWith('/') || urlPathname.startsWith('http'));\n    assert(urlPathname.startsWith(baseServerNormalized));\n    urlPathname = urlPathname.slice(baseServerNormalized.length);\n    if (!urlPathname.startsWith('/'))\n        urlPathname = '/' + urlPathname;\n    assert(urlPathname.startsWith('/'));\n    return { pathname: urlPathname, hasBaseServer: true };\n}\nfunction prependBase(url, baseServer) {\n    if (baseServer.startsWith('http')) {\n        const baseAssets = baseServer;\n        const baseAssetsNormalized = normalizeBaseAssets(baseAssets);\n        assert(!baseAssetsNormalized.endsWith('/'));\n        assert(url.startsWith('/'));\n        return `${baseAssetsNormalized}${url}`;\n    }\n    assert(isBaseServer(baseServer));\n    const baseServerNormalized = normalizeBaseServer(baseServer);\n    if (baseServerNormalized === '/')\n        return url;\n    assert(!baseServerNormalized.endsWith('/'));\n    assert(url.startsWith('/'));\n    return `${baseServerNormalized}${url}`;\n}\nfunction normalizeBaseServer(baseServer) {\n    let baseServerNormalized = baseServer;\n    if (baseServerNormalized.endsWith('/') && baseServerNormalized !== '/') {\n        baseServerNormalized = slice(baseServerNormalized, 0, -1);\n    }\n    // We can and should expect `baseServer` to not contain `/` doublets.\n    assert(!baseServerNormalized.endsWith('/') || baseServerNormalized === '/');\n    return baseServerNormalized;\n}\nfunction isBaseServer(baseServer) {\n    return baseServer.startsWith('/');\n}\nfunction isBaseAssets(base) {\n    return base.startsWith('/') || base.startsWith('http://') || base.startsWith('https://');\n}\nfunction normalizeBaseAssets(baseAssets) {\n    let baseAssetsNormalized = baseAssets;\n    if (baseAssetsNormalized.endsWith('/')) {\n        baseAssetsNormalized = slice(baseAssetsNormalized, 0, -1);\n    }\n    assert(!baseAssetsNormalized.endsWith('/'));\n    return baseAssetsNormalized;\n}\n","export { getCurrentUrl };\nimport { parseUrl } from './parseUrl';\nimport { assert } from './assert';\nfunction getCurrentUrl(options) {\n    const url = window.location.href;\n    const { searchOriginal, hashOriginal, pathname } = parseUrl(url, '/');\n    let urlCurrent;\n    if (options === null || options === void 0 ? void 0 : options.withoutHash) {\n        urlCurrent = `${pathname}${searchOriginal || ''}`;\n    }\n    else {\n        urlCurrent = `${pathname}${searchOriginal || ''}${hashOriginal || ''}`;\n    }\n    assert(urlCurrent.startsWith('/'));\n    return urlCurrent;\n}\n","export function isCallable(thing) {\n    return thing instanceof Function || typeof thing === 'function';\n}\n","export function isObject(value) {\n    return typeof value === 'object' && value !== null;\n}\n","export { hasProp };\n// - https://2ality.com/2020/06/type-guards-assertion-functions-typescript.html\n// - https://www.typescriptlang.org/play?#code/GYVwdgxgLglg9mABDAzgFQJ4AcCmdgAUAbgIYA2IOAXIiWBgDSJTbWIDkARnHGTnewCUNUhRzIUibr35gA3AFgAUKEiwEEzLnzFylGnUbNWNdmBABbTjgBOQkXvGpE5q7cUrw0eElRa8hKL6tPRMLLimKFA2MGAA5vaIQU6SUTHxHqreGn6sOskGocYRHOAA1mBwAO5gickSiOWVNZle6r7oeYGOhUbhbGmxcYgAvKVgFdW1wlI8fHSIAN7KiMiExeIjW+OTNeyIgksrq4g2OFAgNkjRlMcAvsdnF1cb+EmOo9v9Hg9KyhAIKK0GhNKajRAAFgATMplCQUChbFACLltIQSEwzJZrHZBIJ-oCZAA6MhwOIEEj4v6eNQ+WgIpEEAFgAAmMHaIImzTAM3hiJsUEkzLZ7SOShOa0QTIQIp8hyelzAx1WUAAFjZqi4cFVEABRGwamwEdgAQQZArpADESDAyEJlHcgA\nimport { isCallable } from './isCallable';\nimport { isObject } from './isObject';\n// prettier-ignore\nfunction hasProp(obj, prop, type = 'unknown') {\n    if (!isObject(obj))\n        return false;\n    if (!(prop in obj)) {\n        return type === 'undefined';\n    }\n    if (type === 'unknown') {\n        return true;\n    }\n    const propValue = obj[prop];\n    if (type === 'array') {\n        return Array.isArray(propValue);\n    }\n    if (type === 'object') {\n        return isObject(propValue);\n    }\n    if (type === 'string[]') {\n        return Array.isArray(propValue) && propValue.every(el => typeof el === 'string');\n    }\n    if (type === 'function') {\n        return isCallable(propValue);\n    }\n    if (Array.isArray(type)) {\n        return typeof propValue === 'string' && type.includes(propValue);\n    }\n    if (type === 'null') {\n        return propValue === null;\n    }\n    if (type === 'undefined') {\n        return propValue === undefined;\n    }\n    if (type === 'true') {\n        return propValue === true;\n    }\n    if (type === 'false') {\n        return propValue === false;\n    }\n    return typeof propValue === type;\n}\n","export { objectAssign };\n// Same as `Object.assign()` but with type inference\nfunction objectAssign(obj, objAddendum) {\n    Object.assign(obj, objAddendum);\n}\n","// Utils needed by Server Routing.\n// Ensure we don't bloat the server-side with client utils\nimport { isBrowser } from '../utils/isBrowser';\nimport { assert } from '../utils/assert';\nassert(isBrowser());\nexport * from '../utils/assert';\nexport * from '../utils/assertSingleInstance';\nexport * from '../utils/callHookWithTimeout';\nexport * from '../utils/checkType'; // Only used by Server Routing (not needed for Client Routing)\nexport * from '../utils/getCurrentUrl';\nexport * from '../utils/getGlobalObject';\nexport * from '../utils/hasProp';\nexport * from '../utils/isCallable';\nexport * from '../utils/isObject';\nexport * from '../utils/objectAssign';\nexport * from '../utils/parseUrl';\nexport * from '../utils/projectInfo';\nexport * from '../utils/slice';\nexport * from '../utils/unique'; // Only used by Server Routing (not needed for Client Routing)\n","export { isScriptFile };\nexport { isTemplateFile };\nexport { scriptFileExtensions };\nexport { scriptFileExtensionList };\nimport { assert } from './assert';\n// We can't use a RegExp:\n//  - Needs to work with Micromatch: https://github.com/micromatch/micromatch because:\n//    - Vite's `import.meta.glob()` uses Micromatch\n//  - We need this to be a whitelist because:\n//   - A pattern `*([a-zA-Z0-9]` doesn't work.\n//     - Because of ReScript: `.res` are ReScript source files which need to be ignored. (The ReScript compiler generates `.js` files alongside `.res` files.)\n//   - Black listing doesn't work.\n//     - We cannot implement a blacklist with a glob pattern.\n//     - A post `import.meta.glob()` blacklist filtering doesn't work because Vite would still process the files (e.g. including them in the bundle).\n// prettier-ignore\nconst extJavaScript = [\n    'js',\n    'ts',\n    'cjs',\n    'cts',\n    'mjs',\n    'mts',\n    'jsx',\n    'tsx',\n    'cjsx',\n    'ctsx',\n    'mjsx',\n    'mtsx',\n];\n// prettier-ignore\nconst extTemplates = [\n    'vue',\n    'svelte',\n    'marko',\n    'md',\n    'mdx'\n];\nconst scriptFileExtensionList = [...extJavaScript, ...extTemplates];\nconst scriptFileExtensions = '(' + scriptFileExtensionList.join('|') + ')';\nfunction isScriptFile(filePath) {\n    const yes = scriptFileExtensionList.some((ext) => filePath.endsWith('.' + ext));\n    assert(!isJavaScriptFile(filePath) || yes);\n    return yes;\n}\nfunction isJavaScriptFile(filePath) {\n    return /\\.(c|m)?(j|t)sx?$/.test(filePath);\n}\nfunction isTemplateFile(filePath) {\n    return extTemplates.some((ext) => filePath.endsWith('.' + ext));\n}\n","import { assert } from './assert';\nexport { higherFirst };\nexport { lowerFirst };\nexport { makeFirst };\nexport { makeLast };\n// -1 => element1 first (i.e. `indexOf(element1) < indexOf(element2)`)\n// +1 => element2 first (i.e. `indexOf(element2) < indexOf(element1)`)\n// 0 => keep original order of element1 and element2\nfunction higherFirst(getValue) {\n    return (element1, element2) => {\n        const val1 = getValue(element1);\n        const val2 = getValue(element2);\n        if (val1 === val2) {\n            return 0;\n        }\n        return val1 > val2 ? -1 : 1;\n    };\n}\nfunction lowerFirst(getValue) {\n    return (element1, element2) => {\n        const val1 = getValue(element1);\n        const val2 = getValue(element2);\n        if (val1 === val2) {\n            return 0;\n        }\n        return val1 < val2 ? -1 : 1;\n    };\n}\nfunction makeFirst(getValue) {\n    return (element1, element2) => {\n        const val1 = getValue(element1);\n        const val2 = getValue(element2);\n        assert([true, false, null].includes(val1));\n        assert([true, false, null].includes(val2));\n        if (val1 === val2) {\n            return 0;\n        }\n        if (val1 === true || val2 === false) {\n            return -1;\n        }\n        if (val2 === true || val1 === false) {\n            return 1;\n        }\n        assert(false);\n    };\n}\nfunction makeLast(getValue) {\n    return makeFirst((element) => {\n        const val = getValue(element);\n        if (val === null) {\n            return null;\n        }\n        else {\n            return !val;\n        }\n    });\n}\n","export { compareString };\nfunction compareString(str1, str2) {\n    if (str1.toLowerCase() < str2.toLowerCase())\n        return -1;\n    if (str1.toLowerCase() > str2.toLowerCase())\n        return 1;\n    return 0;\n}\n","export const isNotNullish = (p) => p !== null && p !== undefined;\n","export { toPosixPath };\nexport { assertPosixPath };\nexport { toSystemPath };\nexport { isPosixPath };\nimport { assert } from './assert';\nconst sepPosix = '/';\nconst sepWin32 = '\\\\';\nfunction isPosixPath(path) {\n    return !path.includes(sepWin32);\n}\nfunction toPosixPath(path) {\n    const pathPosix = path.split(sepWin32).join(sepPosix);\n    assertPosixPath(pathPosix);\n    return pathPosix;\n}\nfunction assertPosixPath(path) {\n    const errMsg = (msg) => `Not a posix path: ${msg}`;\n    assert(path !== null, errMsg('null'));\n    assert(typeof path === 'string', errMsg(`typeof path === '${typeof path}'`));\n    assert(path !== '', errMsg('(empty string)'));\n    assert(path);\n    assert(!path.includes(sepWin32), errMsg(path));\n}\nfunction toSystemPath(path) {\n    if (isPosixEnv()) {\n        return toPosixPath(path);\n    }\n    if (isWin32Env()) {\n        return path.split(sepPosix).join(sepWin32);\n    }\n    assert(false);\n}\nfunction isWin32Env() {\n    return process.platform === 'win32';\n}\nfunction isPosixEnv() {\n    return !isWin32Env();\n}\n","export { isNpmPackageImport };\nexport { isNpmPackageName };\nexport { getNpmPackageName };\nexport { getNpmPackageImportPath };\nimport { assert } from './assert';\nconst invalidNameRE = /[^a-zA-Z-_]/;\nfunction isNpmPackageImport(str) {\n    const res = parseNpmPath(str);\n    return res !== null;\n}\nfunction isNpmPackageName(str) {\n    const res = parseNpmPath(str);\n    return res !== null && res.importPath === null;\n}\nfunction getNpmPackageName(str) {\n    const res = parseNpmPath(str);\n    if (!res)\n        return null;\n    return res.npmPackageName;\n}\nfunction getNpmPackageImportPath(str) {\n    const res = parseNpmPath(str);\n    if (!res)\n        return null;\n    return res.importPath;\n}\nfunction parseNpmPath(str) {\n    if (str === undefined || str.includes('\\\\') || str.startsWith('/')) {\n        return null;\n    }\n    let scope = null;\n    if (str.startsWith('@')) {\n        if (!str.includes('/')) {\n            return null;\n        }\n        const [first, ...rest] = str.split('/');\n        scope = first;\n        str = rest.join('/');\n        assert(scope && scope.startsWith('@'));\n    }\n    if (str === '') {\n        return null;\n    }\n    const [first, ...rest] = str.split('/');\n    const name = first;\n    const importPath = rest.length === 0 ? null : rest.join('/');\n    assert(name);\n    assert(importPath === null || !importPath.startsWith('/'));\n    if (invalidNameRE.test(name) || (scope && invalidNameRE.test(scope.slice(1)))) {\n        return null;\n    }\n    assert(!name.startsWith('/'));\n    const npmPackageName = scope ? `${scope}/${name}` : name;\n    return {\n        npmPackageName,\n        importPath\n    };\n}\n","export { assertDefaultExportUnknown };\nexport { assertDefaultExportObject };\nimport { assert, assertUsage, assertWarning } from './assert';\nimport { isObject } from './isObject';\nconst IGNORE = [\n    // vite-plugin-solid adds `export { $$registrations }`\n    '$$registrations',\n    // @vitejs/plugin-vue adds `export { _rerender_only }`\n    '_rerender_only'\n];\n// support `export { frontmatter }` in .mdx files\nconst FILES_WITH_SIDE_EXPORTS = ['.md', '.mdx'];\nfunction assertDefaultExportUnknown(fileExports, filePath) {\n    assertSingleDefaultExport(fileExports, filePath, true);\n}\nfunction assertDefaultExportObject(fileExports, filePath) {\n    assertSingleDefaultExport(fileExports, filePath, false);\n    const defaultExport = fileExports.default;\n    assertUsage(isObject(defaultExport), `${filePath} should default export an object: its \\`export default\\` is a \\`${typeof defaultExport}\\` but it should be an object instead`);\n}\nfunction assertSingleDefaultExport(fileExports, filePath, defaultExportValueIsUnknown) {\n    const exportsAll = Object.keys(fileExports);\n    const exportsRelevant = exportsAll.filter((exportName) => !IGNORE.includes(exportName));\n    const exportsInvalid = exportsRelevant.filter((e) => e !== 'default');\n    const exportsHasDefault = exportsRelevant.includes('default');\n    if (exportsInvalid.length === 0) {\n        if (exportsHasDefault) {\n            return;\n        }\n        else {\n            assert(exportsRelevant.length === 0);\n            assertUsage(false, `${filePath} doesn't export any value, but it should have a \\`export default\\` instead`);\n        }\n    }\n    else if (!FILES_WITH_SIDE_EXPORTS.some((ext) => filePath.endsWith(ext))) {\n        const exportsInvalidStr = exportsInvalid.join(', ');\n        if (defaultExportValueIsUnknown) {\n            assertWarning(exportsInvalid.length === 0, `${filePath} should only have a default export: remove \\`export { ${exportsInvalidStr} }\\``, { onlyOnce: true, showStackTrace: false });\n        }\n        else {\n            assertWarning(exportsInvalid.length === 0, `${filePath} replace \\`export { ${exportsInvalidStr} }\\` with \\`export default { ${exportsInvalidStr} }\\``, { onlyOnce: true, showStackTrace: false });\n        }\n    }\n}\n","export { objectEntries };\n// Same as `Object.entries()` but with type inference\nfunction objectEntries(obj) {\n    return Object.entries(obj);\n}\n","// TODO/v1-release: remove this\nexport { assertDefaultExports };\nexport { assertExportValues };\nexport { forbiddenDefaultExports };\nimport { assert, assertUsage } from '../utils';\nconst enforceTrue = ['clientRouting'];\nfunction assertExportValues(pageFile) {\n    enforceTrue.forEach((exportName) => {\n        assert(pageFile.fileExports);\n        if (!(exportName in pageFile.fileExports))\n            return;\n        const explainer = `The value of \\`${exportName}\\` is only allowed to be \\`true\\`.`;\n        assertUsage(pageFile.fileExports[exportName] !== false, `${pageFile.filePath} has \\`export { ${exportName} }\\` with the value \\`false\\` which is prohibited: remove \\`export { ${exportName} }\\` instead. (${explainer})`);\n        assertUsage(pageFile.fileExports[exportName] === true, `${pageFile.filePath} has \\`export { ${exportName} }\\` with a forbidden value. ${explainer}`);\n    });\n}\n// Forbid exports such as `export default { render }`, because only `export { render }` can be statically analyzed by `es-module-lexer`.\nconst forbiddenDefaultExports = ['render', 'clientRouting', 'prerender', 'doNotPrerender'];\nfunction assertDefaultExports(defaultExportName, filePath) {\n    assertUsage(!forbiddenDefaultExports.includes(defaultExportName), `${filePath} has \\`export default { ${defaultExportName} }\\` which is prohibited, use \\`export { ${defaultExportName} }\\` instead.`);\n}\n","export { getExportUnion };\nexport { getExports };\nimport { isScriptFile, isTemplateFile } from '../../utils/isScriptFile';\nimport { assert, hasProp, isObject, assertWarning, assertUsage, makeLast, isBrowser, objectEntries } from '../utils';\nimport { assertDefaultExports, forbiddenDefaultExports } from './assertExports';\nfunction getExports(pageFiles, pageConfig) {\n    const configEntries = {};\n    const config = {};\n    const exportsAll = {};\n    // V0.4 design\n    // TODO/v1-release: remove\n    pageFiles.forEach((pageFile) => {\n        const exportValues = getExportValues(pageFile);\n        exportValues.forEach(({ exportName, exportValue, isFromDefaultExport }) => {\n            var _a;\n            assert(exportName !== 'default');\n            exportsAll[exportName] = (_a = exportsAll[exportName]) !== null && _a !== void 0 ? _a : [];\n            exportsAll[exportName].push({\n                exportValue,\n                exportSource: `${pageFile.filePath} > ${isFromDefaultExport ? `\\`export default { ${exportName} }\\`` : `\\`export { ${exportName} }\\``}`,\n                filePath: pageFile.filePath,\n                _filePath: pageFile.filePath,\n                _fileType: pageFile.fileType,\n                _isFromDefaultExport: isFromDefaultExport\n            });\n        });\n    });\n    // V1 design\n    if (pageConfig) {\n        const { configValues } = pageConfig;\n        objectEntries(configValues).forEach(([configName, configValue]) => {\n            var _a, _b, _c;\n            const configElement = pageConfig.configElements[configName];\n            assert(configElement);\n            const { configDefinedByFile, configDefinedAt } = configElement;\n            assert(configDefinedByFile);\n            config[configName] = (_a = config[configName]) !== null && _a !== void 0 ? _a : configValue;\n            configEntries[configName] = (_b = configEntries[configName]) !== null && _b !== void 0 ? _b : [];\n            // Currently each configName has only one entry. Adding an entry for each overriden config value isn't implemented yet. (This is an isomorphic file and it isn't clear whether this can/should be implemented on the client-side. We should load a minimum amount of code on the client-side.)\n            assert(configEntries[configName].length === 0);\n            configEntries[configName].push({\n                configValue,\n                configDefinedAt,\n                configDefinedByFile\n            });\n            // TODO/v1-release: remove\n            const exportName = configName;\n            exportsAll[exportName] = (_c = exportsAll[exportName]) !== null && _c !== void 0 ? _c : [];\n            exportsAll[exportName].push({\n                exportValue: configValue,\n                exportSource: configDefinedAt,\n                filePath: configDefinedByFile,\n                _filePath: configDefinedByFile,\n                _fileType: null,\n                _isFromDefaultExport: null\n            });\n        });\n    }\n    const pageExports = createObjectWithDeprecationWarning();\n    const exports = {};\n    Object.entries(exportsAll).forEach(([exportName, values]) => {\n        values.forEach(({ exportValue, _fileType, _isFromDefaultExport }) => {\n            var _a;\n            exports[exportName] = (_a = exports[exportName]) !== null && _a !== void 0 ? _a : exportValue;\n            // Legacy `pageContext.pageExports`\n            if (_fileType === '.page' && !_isFromDefaultExport) {\n                if (!(exportName in pageExports)) {\n                    pageExports[exportName] = exportValue;\n                }\n            }\n        });\n    });\n    assert(!('default' in exports));\n    assert(!('default' in exportsAll));\n    return {\n        config,\n        configEntries,\n        // TODO/v1-release: remove\n        exports,\n        exportsAll,\n        pageExports\n    };\n}\nfunction getExportValues(pageFile) {\n    const { filePath, fileExports } = pageFile;\n    assert(fileExports); // assume pageFile.loadFile() was called\n    assert(isScriptFile(filePath));\n    const exportValues = [];\n    Object.entries(fileExports)\n        .sort(makeLast(([exportName]) => exportName === 'default')) // `export { bla }` should override `export default { bla }`\n        .forEach(([exportName, exportValue]) => {\n        let isFromDefaultExport = exportName === 'default';\n        if (isFromDefaultExport) {\n            if (isTemplateFile(filePath)) {\n                exportName = 'Page';\n            }\n            else {\n                assertUsage(isObject(exportValue), `The \\`export default\\` of ${filePath} should be an object.`);\n                Object.entries(exportValue).forEach(([defaultExportName, defaultExportValue]) => {\n                    assertDefaultExports(defaultExportName, filePath);\n                    exportValues.push({\n                        exportName: defaultExportName,\n                        exportValue: defaultExportValue,\n                        isFromDefaultExport\n                    });\n                });\n                return;\n            }\n        }\n        exportValues.push({\n            exportName,\n            exportValue,\n            isFromDefaultExport\n        });\n    });\n    exportValues.forEach(({ exportName, isFromDefaultExport }) => {\n        assert(!(isFromDefaultExport && forbiddenDefaultExports.includes(exportName)));\n    });\n    return exportValues;\n}\nfunction createObjectWithDeprecationWarning() {\n    return new Proxy({}, {\n        get(...args) {\n            // We only show the warning in Node.js because when using Client Routing Vue integration uses `Object.assign(pageContextReactive, pageContext)` which will wrongully trigger the warning. There is no cross-browser way to catch whether the property accessor was initiated by an `Object.assign()` call.\n            if (!isBrowser()) {\n                assertWarning(false, '`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports', { onlyOnce: true, showStackTrace: true });\n            }\n            return Reflect.get(...args);\n        }\n    });\n}\nfunction getExportUnion(exportsAll, propName) {\n    var _a, _b;\n    return ((_b = (_a = exportsAll[propName]) === null || _a === void 0 ? void 0 : _a.map((e) => {\n        assertUsage(hasProp(e, 'exportValue', 'string[]'), `${e.exportSource} should be an array of strings.`);\n        return e.exportValue;\n    }).flat()) !== null && _b !== void 0 ? _b : []);\n}\n","export { determinePageIdOld };\nimport { slice, assert } from './utils';\n// TODO/v1-release: remove\nfunction determinePageIdOld(filePath) {\n    const pageSuffix = '.page.';\n    const pageId = slice(filePath.split(pageSuffix), 0, -1).join(pageSuffix);\n    assert(!pageId.includes('\\\\'));\n    return pageId;\n}\n","export { assertPageFilePath };\nimport { assert, isNpmPackageImport, assertPosixPath } from './utils';\nfunction assertPageFilePath(filePath) {\n    assertPosixPath(filePath);\n    assert(filePath.startsWith('/') || isNpmPackageImport(filePath), { filePath });\n}\n","export { getErrorPageId };\nexport { isErrorPageId };\nexport { isErrorPage };\n// TODO/v1-release: consider loading this file only for Client Routing\nimport { assert, assertUsage, unique } from './utils';\nfunction getErrorPageId(pageFilesAll, pageConfigs) {\n    if (pageConfigs.length > 0) {\n        const errorPageConfigs = pageConfigs.filter((p) => p.isErrorPage);\n        if (errorPageConfigs.length === 0)\n            return null;\n        assertUsage(errorPageConfigs.length === 1, 'Only one error page can be defined');\n        return errorPageConfigs[0].pageId;\n    }\n    // TODO/v1-release: remove\n    const errorPageIds = unique(pageFilesAll.map(({ pageId }) => pageId).filter((pageId) => isErrorPageId(pageId, false)));\n    assertUsage(errorPageIds.length <= 1, `Only one _error.page.js is allowed, but found several: ${errorPageIds.join(' ')}`);\n    if (errorPageIds.length > 0) {\n        const errorPageId = errorPageIds[0];\n        assert(errorPageId);\n        return errorPageId;\n    }\n    return null;\n}\n// TODO/v1-release: remove\nfunction isErrorPageId(pageId, _isV1Design) {\n    assert(!pageId.includes('\\\\'));\n    return pageId.includes('/_error');\n}\nfunction isErrorPage(pageId, pageConfigs) {\n    if (pageConfigs.length > 0) {\n        const pageConfig = pageConfigs.find((p) => p.pageId === pageId);\n        assert(pageConfig);\n        return pageConfig.isErrorPage;\n    }\n    else {\n        return isErrorPageId(pageId, false);\n    }\n}\n","export { fileTypes };\nexport { isValidFileType };\nexport { determineFileType };\nimport { assert, assertPosixPath, isNpmPackageImport } from '../utils';\nimport { isScriptFile } from '../../utils/isScriptFile';\nconst fileTypes = [\n    '.page',\n    '.page.server',\n    '.page.route',\n    '.page.client',\n    // New type `.page.css`/`.page.server.css`/`.page.client.css` for `extensions[number].pageFileDist`.\n    //  - Extensions using `pageFileDist` are expected to use a bundler that generates a `.css` colocated next to the original `.page.js` file (e.g. `/renderer/_default.page.server.css` for `/renderer/_default.page.server.js`.\n    //  - Since these `.page.css` files Bundlers We can therefore expect that there isn't any `.page.server.sass`/...\n    '.css'\n];\nfunction isValidFileType(filePath) {\n    return ['.js', '.mjs', '.cjs', '.css'].some((ext) => filePath.endsWith(ext));\n}\nfunction determineFileType(filePath) {\n    assertPosixPath(filePath);\n    {\n        const isCSS = filePath.endsWith('.css');\n        if (isCSS) {\n            assert(isNpmPackageImport(filePath), filePath); // `.css` page files are only supported for npm packages\n            return '.css';\n        }\n    }\n    assert(isScriptFile(filePath), filePath);\n    const fileName = filePath.split('/').slice(-1)[0];\n    const parts = fileName.split('.');\n    const suffix1 = parts.slice(-3)[0];\n    const suffix2 = parts.slice(-2)[0];\n    if (suffix2 === 'page') {\n        return '.page';\n    }\n    assert(suffix1 === 'page', filePath);\n    if (suffix2 === 'server') {\n        return '.page.server';\n    }\n    if (suffix2 === 'client') {\n        return '.page.client';\n    }\n    if (suffix2 === 'route') {\n        return '.page.route';\n    }\n    assert(false, filePath);\n}\n","export { getPageFileObject };\nimport { determinePageIdOld } from '../determinePageIdOld';\nimport { assertPageFilePath } from '../assertPageFilePath';\nimport { isErrorPageId } from '../error-page';\nimport { assert, slice } from '../utils';\nimport { determineFileType } from './fileTypes';\nfunction getPageFileObject(filePath) {\n    const isRelevant = (pageId) => pageFile.pageId === pageId ||\n        (pageFile.isDefaultPageFile &&\n            (isRendererFilePath(pageFile.filePath) || isAncestorDefaultPage(pageId, pageFile.filePath)));\n    const fileType = determineFileType(filePath);\n    const isEnv = (env) => {\n        assert(fileType !== '.page.route'); // We can't determine `.page.route.js`\n        if (env === 'CLIENT_ONLY') {\n            return fileType === '.page.client' || fileType === '.css';\n        }\n        if (env === 'SERVER_ONLY') {\n            return fileType === '.page.server';\n        }\n        if (env === 'CLIENT_AND_SERVER') {\n            return fileType === '.page';\n        }\n        assert(false);\n    };\n    const pageFile = {\n        filePath,\n        fileType,\n        isEnv,\n        isRelevant,\n        isDefaultPageFile: isDefaultFilePath(filePath),\n        isRendererPageFile: fileType !== '.css' && isDefaultFilePath(filePath) && isRendererFilePath(filePath),\n        isErrorPageFile: isErrorPageId(filePath, false),\n        pageId: determinePageIdOld(filePath)\n    };\n    return pageFile;\n}\nfunction isDefaultFilePath(filePath) {\n    assertPageFilePath(filePath);\n    if (isErrorPageId(filePath, false)) {\n        return false;\n    }\n    return filePath.includes('/_default');\n}\nfunction isRendererFilePath(filePath) {\n    assertPageFilePath(filePath);\n    return filePath.includes('/renderer/');\n}\nfunction isAncestorDefaultPage(pageId, defaultPageFilePath) {\n    assertPageFilePath(pageId);\n    assertPageFilePath(defaultPageFilePath);\n    assert(!pageId.endsWith('/'));\n    assert(!defaultPageFilePath.endsWith('/'));\n    assert(isDefaultFilePath(defaultPageFilePath));\n    const defaultPageDir = slice(defaultPageFilePath.split('/'), 0, -1)\n        .filter((filePathSegment) => filePathSegment !== '_default')\n        .join('/');\n    return pageId.startsWith(defaultPageDir);\n}\n","export { assertPageConfigs };\nexport { assertPageConfigGlobal };\nimport { assert, isObject, hasProp } from '../utils';\nfunction assertPageConfigs(pageConfigs) {\n    assert(Array.isArray(pageConfigs) || pageConfigs === null);\n    // TODO: remove obsolete comment?\n    // if `plusConfigFilesCannotBeLoaded === null` => then `import.meta.glob('/**/+config.${scriptFileExtensions}', { eager: true })` cannot be transpiled/loaded => code of virtual file cannot be generated or run => assertPageConfigs() is never called\n    assert(pageConfigs !== null);\n    pageConfigs.forEach((pageConfig) => {\n        assert(isObject(pageConfig));\n        assert(hasProp(pageConfig, 'pageId', 'string'));\n        assert(hasProp(pageConfig, 'routeFilesystem', 'string') || hasProp(pageConfig, 'routeFilesystem', 'null'));\n        assert(hasProp(pageConfig, 'routeFilesystemDefinedBy', 'string') ||\n            hasProp(pageConfig, 'routeFilesystemDefinedBy', 'null'));\n        assert(hasProp(pageConfig, 'loadCodeFiles', 'function'));\n        assert(hasProp(pageConfig, 'isErrorPage', 'boolean'));\n        assert(hasProp(pageConfig, 'configElements', 'object'));\n        assertConfigElements(pageConfig.configElements, false);\n    });\n}\nfunction assertPageConfigGlobal(pageConfigGlobal) {\n    assertConfigElements(pageConfigGlobal, true);\n}\nfunction assertConfigElements(configElements, isGlobalConfig) {\n    assert(isObject(configElements));\n    Object.entries(configElements).forEach(([configName, configElement]) => {\n        assert(isObject(configElement) || configElement === null);\n        if (configElement === null) {\n            assert(isGlobalConfig);\n            return;\n        }\n        assert(hasProp(configElement, 'configDefinedAt', 'string'));\n        assert(hasProp(configElement, 'plusConfigFilePath', 'string') || hasProp(configElement, 'plusConfigFilePath', 'null'));\n        assert(hasProp(configElement, 'configEnv', 'string'));\n        assert(hasProp(configElement, 'codeFilePath', 'string') || hasProp(configElement, 'codeFilePath', 'null'));\n        assert(hasProp(configElement, 'codeFileExport', 'string') || hasProp(configElement, 'codeFileExport', 'null'));\n        assert(hasProp(configElement, 'configValueSerialized', 'string') ||\n            hasProp(configElement, 'configValueSerialized', 'undefined'));\n        if (isGlobalConfig ||\n            // Route files are eagerly loaded (both code files and config value files)\n            configName === 'route') {\n            assert(hasProp(configElement, 'configValue') || hasProp(configElement, 'configValueSerialized'));\n        }\n    });\n}\n","export { types };\nconst types = [\n    ts({\n        is: (val) => val === undefined,\n        match: (str) => str === '!undefined',\n        serialize: () => '!undefined',\n        deserialize: () => undefined\n    }),\n    ts({\n        is: (val) => val === Infinity,\n        match: (str) => str === '!Infinity',\n        serialize: () => '!Infinity',\n        deserialize: () => Infinity\n    }),\n    ts({\n        is: (val) => val === -Infinity,\n        match: (str) => str === '!-Infinity',\n        serialize: () => '!-Infinity',\n        deserialize: () => -Infinity\n    }),\n    ts({\n        is: (val) => typeof val === 'number' && isNaN(val),\n        match: (str) => str === '!NaN',\n        serialize: () => '!NaN',\n        deserialize: () => NaN\n    }),\n    ts({\n        is: (val) => val instanceof Date,\n        match: (str) => str.startsWith('!Date:'),\n        serialize: (val) => '!Date:' + val.toISOString(),\n        deserialize: (str) => new Date(str.slice('!Date:'.length))\n    }),\n    ts({\n        is: (val) => typeof val === 'bigint',\n        match: (str) => str.startsWith('!BigInt:'),\n        serialize: (val) => '!BigInt:' + val.toString(),\n        deserialize: (str) => {\n            if (typeof BigInt === 'undefined') {\n                throw new Error('Your JavaScript environement does not support BigInt. Consider adding a polyfill.');\n            }\n            return BigInt(str.slice('!BigInt:'.length));\n        }\n    }),\n    ts({\n        is: (val) => val instanceof RegExp,\n        match: (str) => str.startsWith('!RegExp:'),\n        serialize: (val) => '!RegExp:' + val.toString(),\n        deserialize: (str) => {\n            str = str.slice('!RegExp:'.length);\n            // const args: string[] = str.match(/\\/(.*?)\\/([gimy])?$/)!\n            const args = str.match(/\\/(.*)\\/(.*)?/);\n            const pattern = args[1];\n            const flags = args[2];\n            return new RegExp(pattern, flags);\n        }\n    }),\n    ts({\n        is: (val) => val instanceof Map,\n        match: (str) => str.startsWith('!Map:'),\n        serialize: (val, serializer) => '!Map:' + serializer(Array.from(val.entries())),\n        deserialize: (str, deserializer) => new Map(deserializer(str.slice('!Map:'.length)))\n    }),\n    ts({\n        is: (val) => val instanceof Set,\n        match: (str) => str.startsWith('!Set:'),\n        serialize: (val, serializer) => '!Set:' + serializer(Array.from(val.values())),\n        deserialize: (str, deserializer) => new Set(deserializer(str.slice('!Set:'.length)))\n    }),\n    // Avoid collisions with the special strings defined above\n    ts({\n        is: (val) => typeof val === 'string' && val.startsWith('!'),\n        match: (str) => str.startsWith('!'),\n        serialize: (val) => '!' + val,\n        deserialize: (str) => str.slice(1)\n    })\n];\n// Type check\nfunction ts(t) {\n    return t;\n}\n","export { parse };\nimport { types } from './types';\nfunction parse(str) {\n    // We don't use the reviver option in `JSON.parse(str, reviver)` because it doesn't support `undefined` values\n    const value = JSON.parse(str);\n    return modifier(value);\n}\nfunction modifier(value) {\n    if (typeof value === 'string') {\n        return reviver(value);\n    }\n    if (typeof value === 'object' && value !== null) {\n        Object.entries(value).forEach(([key, val]) => {\n            ;\n            value[key] = modifier(val);\n        });\n    }\n    return value;\n}\nfunction reviver(value) {\n    for (const { match, deserialize } of types) {\n        if (match(value)) {\n            return deserialize(value, parse);\n        }\n    }\n    return value;\n}\n","// Counterpart: ../../node/plugin/plugins/importUserCode/v1-design/serializePageConfigs.ts\nexport { parsePageConfigs };\nimport { parse } from '@brillout/json-serializer/parse';\nimport { assert, assertUsage, hasProp, isCallable } from '../utils';\nfunction parsePageConfigs(pageConfigs) {\n    pageConfigs.forEach((pageConfig) => {\n        Object.entries(pageConfig.configElements).forEach(([configName, configElement]) => {\n            parseConfigValue(configElement);\n            if (configName === 'route') {\n                assertRouteConfigValue(configElement);\n            }\n        });\n    });\n}\nfunction parseConfigValue(configElement) {\n    const { configValueSerialized } = configElement;\n    if (configValueSerialized !== undefined) {\n        configElement.configValue = parse(configValueSerialized);\n    }\n}\nfunction assertRouteConfigValue(configElement) {\n    assert(hasProp(configElement, 'configValue')); // route files are eagerly loaded\n    const { configValue } = configElement;\n    const configValueType = typeof configValue;\n    assertUsage(configValueType === 'string' || isCallable(configValue), `${configElement.configDefinedAt} has an invalid type '${configValueType}': it should be a string or a function instead, see https://vite-plugin-ssr.com/route`);\n    /* We don't do that to avoid unnecessarily bloating the client-side bundle when using Server Routing\n     *  - When using Server Routing, this file is loaded as well\n     *  - When using Server Routing, client-side validation is superfluous as Route Strings only need to be validated on the server-side\n    if (typeof configValue === 'string') {\n      assertRouteString(configValue, `${configElement.configDefinedAt} defines an`)\n    }\n    */\n}\n","export { parseGlobResults };\nimport { assert, hasProp, isCallable, isObject, cast, assertUsage } from '../utils';\nimport { assertExportValues } from './assertExports';\nimport { getPageFileObject } from './getPageFileObject';\nimport { fileTypes } from './fileTypes';\nimport { assertPageConfigGlobal, assertPageConfigs } from './assertPageConfigs';\nimport { parsePageConfigs } from './parsePageConfigs';\n// TODO: rename to parseVirtualFile\nfunction parseGlobResults(pageFilesExports) {\n    assert(hasProp(pageFilesExports, 'isGeneratedFile'));\n    assert(pageFilesExports.isGeneratedFile !== false, `vite-plugin-ssr was re-installed(/re-built). Restart your app.`);\n    assert(pageFilesExports.isGeneratedFile === true, `\\`isGeneratedFile === ${pageFilesExports.isGeneratedFile}\\``);\n    assert(hasProp(pageFilesExports, 'pageFilesLazy', 'object'));\n    assert(hasProp(pageFilesExports, 'pageFilesEager', 'object'));\n    assert(hasProp(pageFilesExports, 'pageFilesExportNamesLazy', 'object'));\n    assert(hasProp(pageFilesExports, 'pageFilesExportNamesEager', 'object'));\n    assert(hasProp(pageFilesExports.pageFilesLazy, '.page'));\n    assert(hasProp(pageFilesExports.pageFilesLazy, '.page.client') || hasProp(pageFilesExports.pageFilesLazy, '.page.server'));\n    assert(hasProp(pageFilesExports, 'pageFilesList', 'string[]'));\n    assert(hasProp(pageFilesExports, 'pageConfigs'));\n    assert(hasProp(pageFilesExports, 'pageConfigGlobal'));\n    const { pageConfigs, pageConfigGlobal } = pageFilesExports;\n    assertPageConfigs(pageConfigs);\n    parsePageConfigs(pageConfigs);\n    assertPageConfigGlobal(pageConfigGlobal);\n    const pageFilesMap = {};\n    parseGlobResult(pageFilesExports.pageFilesLazy).forEach(({ filePath, pageFile, globValue }) => {\n        var _a;\n        pageFile = pageFilesMap[filePath] = (_a = pageFilesMap[filePath]) !== null && _a !== void 0 ? _a : pageFile;\n        const loadModule = globValue;\n        assertLoadModule(loadModule);\n        pageFile.loadFile = async () => {\n            if (!('fileExports' in pageFile)) {\n                pageFile.fileExports = await loadModule();\n                assertExportValues(pageFile);\n            }\n        };\n    });\n    parseGlobResult(pageFilesExports.pageFilesExportNamesLazy).forEach(({ filePath, pageFile, globValue }) => {\n        var _a;\n        pageFile = pageFilesMap[filePath] = (_a = pageFilesMap[filePath]) !== null && _a !== void 0 ? _a : pageFile;\n        const loadModule = globValue;\n        assertLoadModule(loadModule);\n        pageFile.loadExportNames = async () => {\n            if (!('exportNames' in pageFile)) {\n                const moduleExports = await loadModule();\n                // Vite 2 seems to choke following assertion: https://github.com/brillout/vite-plugin-ssr/issues/455\n                assertUsage('exportNames' in moduleExports, 'You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3');\n                assert(hasProp(moduleExports, 'exportNames', 'string[]'), pageFile.filePath);\n                pageFile.exportNames = moduleExports.exportNames;\n            }\n        };\n    });\n    // `pageFilesEager` contains `.page.route.js` files\n    parseGlobResult(pageFilesExports.pageFilesEager).forEach(({ filePath, pageFile, globValue }) => {\n        var _a;\n        pageFile = pageFilesMap[filePath] = (_a = pageFilesMap[filePath]) !== null && _a !== void 0 ? _a : pageFile;\n        const moduleExports = globValue;\n        assert(isObject(moduleExports));\n        pageFile.fileExports = moduleExports;\n    });\n    parseGlobResult(pageFilesExports.pageFilesExportNamesEager).forEach(({ filePath, pageFile, globValue }) => {\n        var _a;\n        pageFile = pageFilesMap[filePath] = (_a = pageFilesMap[filePath]) !== null && _a !== void 0 ? _a : pageFile;\n        const moduleExports = globValue;\n        assert(isObject(moduleExports));\n        assert(hasProp(moduleExports, 'exportNames', 'string[]'), pageFile.filePath);\n        pageFile.exportNames = moduleExports.exportNames;\n    });\n    pageFilesExports.pageFilesList.forEach((filePath) => {\n        var _a;\n        pageFilesMap[filePath] = (_a = pageFilesMap[filePath]) !== null && _a !== void 0 ? _a : getPageFileObject(filePath);\n    });\n    const pageFiles = Object.values(pageFilesMap);\n    pageFiles.forEach(({ filePath }) => {\n        assert(!filePath.includes('\\\\'));\n    });\n    return { pageFiles, pageConfigs, pageConfigGlobal };\n}\nfunction parseGlobResult(globObject) {\n    const ret = [];\n    Object.entries(globObject).forEach(([fileType, globFiles]) => {\n        cast(fileType);\n        assert(fileTypes.includes(fileType));\n        assert(isObject(globFiles));\n        Object.entries(globFiles).forEach(([filePath, globValue]) => {\n            const pageFile = getPageFileObject(filePath);\n            assert(pageFile.fileType === fileType);\n            ret.push({ filePath, pageFile, globValue });\n        });\n    });\n    return ret;\n}\nfunction assertLoadModule(globValue) {\n    assert(isCallable(globValue));\n}\n","export { setPageFiles };\nexport { setPageFilesAsync };\nexport { getPageFilesAll };\nimport { assert, unique } from '../utils';\nimport { parseGlobResults } from './parseGlobResults';\nimport { getGlobalObject } from '../../utils/getGlobalObject';\nconst globalObject = getGlobalObject('setPageFiles.ts', {});\nfunction setPageFiles(pageFilesExports) {\n    const { pageFiles, pageConfigs, pageConfigGlobal } = parseGlobResults(pageFilesExports);\n    globalObject.pageFilesAll = pageFiles;\n    globalObject.pageConfigs = pageConfigs;\n    globalObject.pageConfigGlobal = pageConfigGlobal;\n}\nfunction setPageFilesAsync(getPageFilesExports) {\n    globalObject.pageFilesGetter = async () => {\n        setPageFiles(await getPageFilesExports());\n    };\n}\nasync function getPageFilesAll(isClientSide, isProduction) {\n    if (isClientSide) {\n        assert(!globalObject.pageFilesGetter);\n        assert(isProduction === undefined);\n    }\n    else {\n        assert(globalObject.pageFilesGetter);\n        assert(typeof isProduction === 'boolean');\n        if (!globalObject.pageFilesAll ||\n            // We reload all glob imports in dev to make auto-reload work\n            !isProduction) {\n            await globalObject.pageFilesGetter();\n        }\n    }\n    const { pageFilesAll, pageConfigs, pageConfigGlobal } = globalObject;\n    assert(pageFilesAll && pageConfigs && pageConfigGlobal);\n    const allPageIds = getAllPageIds(pageFilesAll, pageConfigs);\n    return { pageFilesAll, allPageIds, pageConfigs, pageConfigGlobal };\n}\nfunction getAllPageIds(allPageFiles, pageConfigs) {\n    const fileIds = allPageFiles.filter(({ isDefaultPageFile }) => !isDefaultPageFile).map(({ pageId }) => pageId);\n    const allPageIds = unique(fileIds);\n    const allPageIds2 = pageConfigs.map((p) => p.pageId);\n    return [...allPageIds, ...allPageIds2];\n}\n","export { getPageFilesClientSide };\nexport { getPageFilesServerSide };\nimport { assert, assertUsage, isNotNullish } from '../utils';\nimport { assertPageFilePath } from '../assertPageFilePath';\nfunction getPageFilesClientSide(pageFilesAll, pageId) {\n    return determine(pageFilesAll, pageId, true);\n}\nfunction getPageFilesServerSide(pageFilesAll, pageId) {\n    return determine(pageFilesAll, pageId, false);\n}\nfunction determine(pageFilesAll, pageId, envIsClient) {\n    const env = envIsClient ? 'CLIENT_ONLY' : 'SERVER_ONLY';\n    const pageFilesRelevant = pageFilesAll\n        .filter((p) => p.isRelevant(pageId) && p.fileType !== '.page.route')\n        .sort(getPageFilesSorter(envIsClient, pageId));\n    // Load the `.page.js` files specific to `pageId`\n    const getPageIdFile = (iso) => {\n        const files = pageFilesRelevant.filter((p) => p.pageId === pageId && p.isEnv(iso ? 'CLIENT_AND_SERVER' : env));\n        assertUsage(files.length <= 1, `Merge the following files into a single file: ${files.map((p) => p.filePath).join(' ')}`);\n        const pageIdFile = files[0];\n        assert(pageIdFile === undefined || !pageIdFile.isDefaultPageFile);\n        return pageIdFile;\n    };\n    const pageIdFileEnv = getPageIdFile(false);\n    const pageIdFileIso = getPageIdFile(true);\n    // A page can have only one renderer. In other words: Multiple `renderer/` overwrite each other.\n    // Load only load renderer (`/renderer/_default.*`)\n    const getRendererFile = (iso) => pageFilesRelevant.filter((p) => p.isRendererPageFile && p.isEnv(iso ? 'CLIENT_AND_SERVER' : env))[0];\n    const rendererFileEnv = getRendererFile(false);\n    const rendererFileIso = getRendererFile(true);\n    // A page can load multiple `_defaut.page.*` files of the same `fileType`. In other words: non-renderer `_default.page.*` files are cumulative.\n    // The exception being HTML-only pages because we pick a single page file as client entry. We handle that use case at `renderPage()`.\n    const defaultFilesNonRenderer = pageFilesRelevant.filter((p) => p.isDefaultPageFile && !p.isRendererPageFile && (p.isEnv(env) || p.isEnv('CLIENT_AND_SERVER')));\n    // Ordered by `pageContext.exports` precendence\n    const pageFiles = [pageIdFileEnv, pageIdFileIso, ...defaultFilesNonRenderer, rendererFileEnv, rendererFileIso].filter(isNotNullish);\n    return pageFiles;\n}\nfunction getPageFilesSorter(envIsClient, pageId) {\n    const env = envIsClient ? 'CLIENT_ONLY' : 'SERVER_ONLY';\n    const e1First = -1;\n    const e2First = +1;\n    const noOrder = 0;\n    return (e1, e2) => {\n        // `.page.js` files specific to `pageId` first\n        if (!e1.isDefaultPageFile && e2.isDefaultPageFile) {\n            return e1First;\n        }\n        if (!e2.isDefaultPageFile && e1.isDefaultPageFile) {\n            return e2First;\n        }\n        // Non-renderer `_default.page.*` before `renderer/**/_default.page.*`\n        {\n            const e1_isRenderer = e1.isRendererPageFile;\n            const e2_isRenderer = e2.isRendererPageFile;\n            if (!e1_isRenderer && e2_isRenderer) {\n                return e1First;\n            }\n            if (!e2_isRenderer && e1_isRenderer) {\n                return e2First;\n            }\n            assert(e1_isRenderer === e2_isRenderer);\n        }\n        // Filesystem nearest first\n        {\n            const e1_distance = getPathDistance(pageId, e1.filePath);\n            const e2_distance = getPathDistance(pageId, e2.filePath);\n            if (e1_distance < e2_distance) {\n                return e1First;\n            }\n            if (e2_distance < e1_distance) {\n                return e2First;\n            }\n            assert(e1_distance === e2_distance);\n        }\n        // `.page.server.js`/`.page.client.js` before `.page.js`\n        {\n            if (e1.isEnv(env) && e2.isEnv('CLIENT_AND_SERVER')) {\n                return e1First;\n            }\n            if (e2.isEnv(env) && e1.isEnv('CLIENT_AND_SERVER')) {\n                return e2First;\n            }\n        }\n        return noOrder;\n    };\n}\nfunction getPathDistance(pathA, pathB) {\n    assertPageFilePath(pathA);\n    assertPageFilePath(pathB);\n    // Index of first different character\n    let idx = 0;\n    for (; idx < pathA.length && idx < pathB.length; idx++) {\n        if (pathA[idx] !== pathB[idx])\n            break;\n    }\n    const pathAWithoutCommon = pathA.slice(idx);\n    const pathBWithoutCommon = pathB.slice(idx);\n    const distanceA = pathAWithoutCommon.split('/').length;\n    const distanceB = pathBWithoutCommon.split('/').length;\n    const distance = distanceA + distanceB;\n    return distance;\n}\n","export { findPageConfig };\nimport { assert } from '../utils';\nfunction findPageConfig(pageConfigs, pageId) {\n    var _a;\n    const result = pageConfigs.filter((p) => p.pageId === pageId);\n    assert(result.length <= 1);\n    const pageConfig = (_a = result[0]) !== null && _a !== void 0 ? _a : null;\n    return pageConfig;\n}\n","export { loadPageCode };\nimport { assert, assertDefaultExportUnknown, objectAssign } from '../utils';\nasync function loadPageCode(pageConfig, isDev) {\n    const configValues = {};\n    // In dev, Vite already caches the page's virtual module\n    if (!isDev && 'configValues' in pageConfig) {\n        return pageConfig;\n    }\n    const codeFiles = await pageConfig.loadCodeFiles();\n    codeFiles.forEach((codeFile) => {\n        const { configName, codeFilePath } = codeFile;\n        let configValue;\n        if (codeFile.isPlusFile) {\n            const { codeFileExports } = codeFile;\n            if (configName !== 'client') {\n                assertDefaultExportUnknown(codeFileExports, codeFilePath);\n            }\n            Object.entries(codeFileExports).forEach(([exportName, exportValue]) => {\n                const isSideExport = exportName !== 'default';\n                const configName = isSideExport ? exportName : codeFile.configName;\n                const configValue = exportValue;\n                configValues[configName] = configValue;\n                if (isSideExport) {\n                    const configElementOfMainExport = pageConfig.configElements[codeFile.configName];\n                    assert(configElementOfMainExport);\n                    pageConfig.configElements[configName] = {\n                        configValue,\n                        codeFileExport: exportName,\n                        codeFilePath,\n                        configDefinedByFile: codeFilePath,\n                        configDefinedAt: `${codeFilePath} > export { ${exportName} }`,\n                        configEnv: configElementOfMainExport.configEnv,\n                        plusConfigFilePath: null\n                    };\n                }\n            });\n        }\n        else {\n            configValue = codeFile.codeFileExportValue;\n            configValues[configName] = configValue;\n        }\n    });\n    Object.entries(pageConfig.configElements).map(([configName, configElement]) => {\n        if (configElement.codeFilePath)\n            return;\n        configValues[configName] = configElement.configValue;\n    });\n    objectAssign(pageConfig, { configValues });\n    return pageConfig;\n}\n","import { getPageFilesClientSide, getExports } from '../shared/getPageFiles';\nimport { findPageConfig } from '../shared/page-configs/findPageConfig';\nimport { loadPageCode } from '../shared/page-configs/loadPageCode';\nexport { loadPageFilesClientSide };\nexport { isErrorFetchingStaticAssets };\nconst stamp = '__whileFetchingAssets';\nasync function loadPageFilesClientSide(pageFilesAll, pageConfigs, pageId) {\n    const pageFilesClientSide = getPageFilesClientSide(pageFilesAll, pageId);\n    const pageConfig = findPageConfig(pageConfigs, pageId);\n    let pageConfigLoaded;\n    try {\n        // prettier-ignore\n        const result = await Promise.all([\n            pageConfig && loadPageCode(pageConfig, import.meta.env.DEV),\n            ...pageFilesClientSide.map((p) => { var _a; return (_a = p.loadFile) === null || _a === void 0 ? void 0 : _a.call(p); }),\n        ]);\n        pageConfigLoaded = result[0];\n    }\n    catch (err) {\n        // To trigger this catch: add `throw new Error()` in the global scope of +onRenderClient.js\n        if (isFetchError(err)) {\n            Object.assign(err, { [stamp]: true });\n        }\n        throw err;\n    }\n    const { config, configEntries, exports, exportsAll, pageExports } = getExports(pageFilesClientSide, pageConfigLoaded);\n    const pageContextAddendum = {\n        config,\n        configEntries,\n        exports,\n        exportsAll,\n        pageExports,\n        _pageFilesLoaded: pageFilesClientSide\n    };\n    return pageContextAddendum;\n}\nfunction isErrorFetchingStaticAssets(err) {\n    if (!err) {\n        return false;\n    }\n    return err[stamp] === true;\n}\n// https://stackoverflow.com/questions/75928310/how-to-detect-that-import-some-url-failed-because-some-url-isnt-a-javasc\nfunction isFetchError(err) {\n    if (!(err instanceof Error))\n        return false;\n    // https://github.com/stacks-network/clarity-js-sdk/blob/e757666b59af00b5db04dd1bf0df016e3a459ea2/packages/clarity/src/providers/registry.ts#L40-L45\n    // https://github.com/modernweb-dev/web/blob/0a59b56e4c1b50af81fbf4588f36a1ceb71f3976/integration/test-runner/tests/test-failure/runTestFailureTest.ts#L11-L18\n    const FAILED_TO_FETCH_MESSAGES = [\n        // chromium\n        'Failed to fetch dynamically imported module',\n        // firefox\n        'error loading dynamically imported module',\n        // safari\n        'Importing a module script failed',\n        // ??\n        'error resolving module specifier',\n        // ??\n        'failed to resolve module'\n    ];\n    return FAILED_TO_FETCH_MESSAGES.some((s) => err.message.toLowerCase().includes(s.toLowerCase()));\n}\n","export { getConfigValue };\nexport { getCodeFilePath };\nexport { getPageConfig };\nimport { assert, assertUsage } from '../utils';\n// function getConfigValue(pageConfig: PageConfigData, configName: ConfigNameBuiltIn): unknown\nfunction getConfigValue(pageConfig, configName, type) {\n    const configElement = pageConfig.configElements[configName];\n    if (!configElement || isNullish(pageConfig, configName)) {\n        return null;\n    }\n    const { configValue, configDefinedAt } = configElement;\n    assertUsage(typeof configValue === type, `${configDefinedAt} has an invalid type \\`${typeof configValue}\\`: is should be a ${type} instead`);\n    return configValue;\n}\nfunction getCodeFilePath(pageConfig, configName) {\n    const configElement = pageConfig.configElements[configName];\n    if (!configElement || isNullish(pageConfig, configName)) {\n        return null;\n    }\n    if (configElement.codeFilePath !== null) {\n        return configElement.codeFilePath;\n    }\n    const { configValue, configDefinedAt } = configElement;\n    assertUsage(typeof configValue === 'string', `${configDefinedAt} has an invalid type \\`${typeof configValue}\\`: it should be a \\`string\\` instead`);\n    assertUsage(false, `${configDefinedAt} has an invalid value \\`${configValue}\\`: it should be a file path instead`);\n}\nfunction isNullish(pageConfig, configName) {\n    const configElement = pageConfig.configElements[configName];\n    if (!configElement)\n        return true;\n    const { codeFilePath, configValue } = configElement;\n    if (codeFilePath)\n        return false;\n    return configValue === null || configValue === undefined;\n}\nfunction getPageConfig(pageId, pageConfigs) {\n    const pageConfig = pageConfigs.find((p) => p.pageId === pageId);\n    assert(pageConfigs.length > 0);\n    assert(pageConfig);\n    return pageConfig;\n}\n","import { parse } from '@brillout/json-serializer/parse';\nimport { hasProp, objectAssign, assert, assertUsage } from './utils';\nexport { getPageContextSerializedInHtml };\nfunction getPageContextSerializedInHtml() {\n    const id = 'vite-plugin-ssr_pageContext';\n    const elem = document.getElementById(id);\n    assertUsage(elem, `The element #${id} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${id} from the HTML nor from the DOM.`);\n    const pageContextJson = elem.textContent;\n    assert(pageContextJson);\n    const parseResult = parse(pageContextJson);\n    assert(hasProp(parseResult, 'pageContext', 'object'));\n    const { pageContext } = parseResult;\n    assert(hasProp(pageContext, '_pageId', 'string'));\n    /*\n    if ('_serverSideErrorWhileStreaming' in pageContext) {\n      const err = getProjectError(\n        `An error occurred on the server while rendering/streaming to HTML. Check your server logs.`\n      )\n      throw err\n    }\n    */\n    objectAssign(pageContext, {\n        _pageContextRetrievedFromServer: { ...pageContext },\n        _comesDirectlyFromServer: true\n    });\n    return pageContext;\n}\n","export { getHook };\nexport { assertHook };\nimport { assert, assertUsage, isCallable } from './utils';\nfunction getHook(pageContext, hookName) {\n    if (!(hookName in pageContext.exports)) {\n        return null;\n    }\n    const hookFn = pageContext.exports[hookName];\n    const file = pageContext.exportsAll[hookName][0];\n    assert(file.exportValue === hookFn);\n    const hookFilePath = file.exportSource;\n    assert(hookFilePath);\n    assert(!hookName.endsWith(')'));\n    assertUsage(isCallable(hookFn), `hook ${hookName}() defined by ${hookFilePath} should be a function`);\n    return { hookFn, hookFilePath };\n}\nfunction assertHook(pageContext, hookName) {\n    getHook(pageContext, hookName);\n}\n","import { compareString } from './utils';\nexport { sortPageContext };\n// Sort `pageContext` keys alphabetically, in order to make reading `console.log(pageContext)` easier\nfunction sortPageContext(pageContext) {\n    const entries = Object.entries(pageContext);\n    for (const key in pageContext) {\n        delete pageContext[key];\n    }\n    entries\n        .sort(([key1], [key2]) => compareString(key1, key2))\n        .forEach(([key, val]) => {\n        pageContext[key] = val;\n    });\n}\n","export { addIs404ToPageProps };\nimport { assert, assertWarning, hasProp, isObject } from './utils';\nimport { isErrorPage } from './error-page';\nfunction addIs404ToPageProps(pageContext) {\n    assertIs404(pageContext);\n    addIs404(pageContext);\n}\nfunction assertIs404(pageContext) {\n    if (isErrorPage(pageContext._pageId, pageContext._pageConfigs)) {\n        assert(hasProp(pageContext, 'is404', 'boolean'));\n    }\n}\nfunction addIs404(pageContext) {\n    if (pageContext.is404 === undefined || pageContext.is404 === null)\n        return;\n    const pageProps = pageContext.pageProps || {};\n    if (!isObject(pageProps)) {\n        assertWarning(false, 'pageContext.pageProps should be an object', { showStackTrace: true, onlyOnce: true });\n        return;\n    }\n    pageProps.is404 = pageProps.is404 || pageContext.is404;\n    pageContext.pageProps = pageProps;\n}\n","export { releasePageContext };\nimport { assert, assertUsage, isObject, objectAssign, getGlobalObject } from './utils';\nimport { sortPageContext } from '../shared/sortPageContext';\nconst globalObject = getGlobalObject('releasePageContext.ts', {});\nimport { addIs404ToPageProps } from '../shared/addIs404ToPageProps';\n// Release `pageContext` for user consumption.\n//\n// This adds `assertPassToClient()`.\n//\n// With Vue support (when `pageContext` is made reactive with Vue).\n//\n// For Vue + Cient Routing, the `pageContext` needs to be made reactive:\n// ```js\n// import { reactive } from 'vue'\n// // See entire example at `/examples/vue-full/`\n// const pageContextReactive = reactive(pageContext)\n// ```\nfunction releasePageContext(pageContext, isClientRouting) {\n    if (isClientRouting) {\n        const pageContextTyped = pageContext;\n        assert([true, false].includes(pageContextTyped.isHydration));\n        assert([true, false, null].includes(pageContextTyped.isBackwardNavigation));\n    }\n    else {\n        const pageContextTyped = pageContext;\n        assert(pageContextTyped.isHydration === true);\n        assert(pageContextTyped.isBackwardNavigation === null);\n    }\n    assert('config' in pageContext);\n    assert('configEntries' in pageContext);\n    // TODO/v1-release: remove\n    assert('exports' in pageContext);\n    assert('exportsAll' in pageContext);\n    assert('pageExports' in pageContext);\n    assert(isObject(pageContext.pageExports));\n    const Page = pageContext.exports.Page;\n    objectAssign(pageContext, { Page });\n    // For Vue's reactivity\n    resolveGetters(pageContext);\n    // For prettier `console.log(pageContext)`\n    sortPageContext(pageContext);\n    assert([true, false].includes(pageContext._comesDirectlyFromServer));\n    const pageContextReadyForRelease = !pageContext._comesDirectlyFromServer\n        ? // Not possible to achieve `getAssertPassToClientProxy()` if some `onBeforeRender()` hook defined in `.page.js` was called. (We cannot infer what `pageContext` properties came from the server-side or from the client-side. Which is fine because the user will likely dig into why the property is missing in `const pageContext = await runOnBeforeRenderServerHooks()` anyways, which does support throwing the helpul `assertPassToClient()` error message.)\n            pageContext\n        : getProxy(pageContext);\n    addIs404ToPageProps(pageContext);\n    return pageContextReadyForRelease;\n}\nconst JAVASCRIPT_BUILT_INS = [\n    'then',\n    'toJSON' // Vue tries to access `toJSON`\n];\nconst PASS_TO_CLIENT_BUILT_INS = [\n    '_pageId'\n    // '_serverSideErrorWhileStreaming'\n];\n// Hint the user to use `paassToClient` when accessing undefined `pageContext` props\nfunction getProxy(pageContext) {\n    return new Proxy(pageContext, { get });\n    function isMissing(prop) {\n        if (prop in pageContext)\n            return false;\n        if (JAVASCRIPT_BUILT_INS.includes(prop))\n            return false;\n        if (typeof prop === 'symbol')\n            return false; // Vue tries to access some symbols\n        if (typeof prop !== 'string')\n            return false;\n        if (prop.startsWith('__v_'))\n            return false; // Vue internals upon `reactive(pageContext)`\n        return true;\n    }\n    function get(_, prop) {\n        if (globalObject.disableAssertPassToClient !== prop) {\n            assertPassToClient(pageContext._pageContextRetrievedFromServer, prop, isMissing(prop));\n        }\n        // We disable `assertPassToClient` for the next attempt to read `prop`, because of how Vue's reactivity work.\n        // (When changing a reactive object, Vue tries to read it's old value first. This triggers a `assertPassToClient()` failure if e.g. `pageContextOldReactive.routeParams = pageContextNew.routeParams` and `pageContextOldReactive` has no `routeParams`.)\n        globalObject.disableAssertPassToClient = prop;\n        window.setTimeout(() => {\n            globalObject.disableAssertPassToClient = undefined;\n        }, 0);\n        return pageContext[prop];\n    }\n}\nfunction assertPassToClient(pageContextRetrievedFromServer, prop, isMissing) {\n    if (!isMissing) {\n        return;\n    }\n    if (pageContextRetrievedFromServer === null) {\n        // If we didn't receive any `pageContext` from the server\n        // - passToClient is irrelevant\n        // - We cannot determine passToClientInferred\n        return;\n    }\n    const passToClientInferred = Object.keys(pageContextRetrievedFromServer).filter((prop) => !PASS_TO_CLIENT_BUILT_INS.includes(prop));\n    assertUsage(false, [\n        `pageContext.${prop} isn't available in the browser`,\n        `('${prop}' is missing in the passToClient list [${passToClientInferred\n            .map((prop) => `'${prop}'`)\n            .join(', ')}]).`,\n        `Did you forget to add '${prop}' to the passToClient list?`,\n        `See https://vite-plugin-ssr.com/passToClient`\n    ].join(' '));\n}\n// Remove propery descriptor getters because they break Vue's reactivity.\n// E.g. resolve the `pageContext.urlPathname` getter.\nfunction resolveGetters(pageContext) {\n    Object.entries(pageContext).forEach(([key, val]) => {\n        delete pageContext[key];\n        pageContext[key] = val;\n    });\n}\n","export { executeOnRenderClientHook };\nimport { assert, assertUsage, callHookWithTimeout } from './utils';\nimport { getHook } from '../shared/getHook';\nimport { releasePageContext } from './releasePageContext';\nimport { getPageConfig } from '../shared/page-configs/utils';\nasync function executeOnRenderClientHook(pageContext, isClientRouting) {\n    const pageContextReadyForRelease = releasePageContext(pageContext, isClientRouting);\n    let hook = null;\n    let hookName;\n    {\n        const renderHook = getHook(pageContext, 'render');\n        hook = renderHook;\n        hookName = 'render';\n    }\n    {\n        const renderHook = getHook(pageContext, 'onRenderClient');\n        if (renderHook) {\n            hook = renderHook;\n            hookName = 'onRenderClient';\n        }\n    }\n    if (!hook) {\n        const url = getUrl(pageContext);\n        // V1 design\n        if (pageContext._pageConfigs.length > 0) {\n            assertMissingHook(pageContext._pageId, pageContext._pageConfigs, url);\n            // V0.4 design\n        }\n        else {\n            const pageClientsFilesLoaded = pageContext._pageFilesLoaded.filter((p) => p.fileType === '.page.client');\n            let errMsg;\n            if (pageClientsFilesLoaded.length === 0) {\n                errMsg = 'No file `*.page.client.*` found for URL ' + url;\n            }\n            else {\n                errMsg =\n                    'One of the following files should export a `render()` hook: ' +\n                        pageClientsFilesLoaded.map((p) => p.filePath).join(' ');\n            }\n            assertUsage(false, errMsg);\n        }\n    }\n    assert(hook);\n    const renderHook = hook.hookFn;\n    assert(hookName);\n    // We don't use a try-catch wrapper because rendering errors are usually handled by the UI framework. (E.g. React's Error Boundaries.)\n    const hookResult = await callHookWithTimeout(() => renderHook(pageContextReadyForRelease), hookName, hook.hookFilePath);\n    assertUsage(hookResult === undefined, `The ${hookName}() hook defined by ${hook.hookFilePath} isn't allowed to return a value`);\n}\nfunction getUrl(pageContext) {\n    let url;\n    // try/catch to avoid passToClient assertUsage(), although I'd expect this to not be needed since we're accessing pageContext and not pageContextReadyForRelease\n    try {\n        url = pageContext.urlOriginal;\n    }\n    catch { }\n    url = url !== null && url !== void 0 ? url : window.location.href;\n    return url;\n}\nfunction assertMissingHook(pageId, pageConfigs, url) {\n    var _a, _b;\n    const pageConfig = getPageConfig(pageId, pageConfigs);\n    assert(!((_a = pageConfig.configElements.onRenderClient) === null || _a === void 0 ? void 0 : _a.configValue));\n    assert(((_b = pageConfig.configElements.clientRouting) === null || _b === void 0 ? void 0 : _b.configValue) === true);\n    // We miss abstract page config files that define onRenderClient() but don't apply to any concrete page config\n    let onRenderClientExists = false;\n    pageConfigs.forEach((pageConfig) => {\n        const configElement = pageConfig.configElements.onRenderClient;\n        if (configElement && configElement.configValue) {\n            onRenderClientExists = true;\n        }\n    });\n    assertUsage(false, `No onRenderClient() hook defined${!onRenderClientExists ? '' : ` for URL \\`${url}\\``}, but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);\n}\n"],"names":["isBrowser","isNodeJS","createErrorWithCleanStackTrace","errorMessage","numberOfStackTraceLinesToRemove","err","stackTraceLimit__original","clean","errStack","stackLines","splitByLine","linesRemoved","line","isStackTraceLine","str","getGlobalObject","key","defaultValue","allGlobalObjects","unique","arr","globalObject","makeSure","clientEntryClonflict","clientNotSingleInstance","assertSingleInstance","versions","errMsg","assertUsage","assertWarning","onClientEntry_ServerRouting","isProduction","onClientEntry_ClientRouting","onProjectInfo","projectVersion","condition","onlyOnce","showStackTrace","msg","alreadyLogged","PROJECT_VERSION","projectInfo","logPrefix","internalErrorPrefix","usageErrorPrefix","warningPrefix","infoPrefix","assert","debugInfo","_a","debugStr","debugInfoSerialized","internalError","whiteSpace","usageError","getProjectError","sep","assertInfo","state","assertClientRouting","assertNoContradiction","checkIfClientRouting","assertServerRouting","noContradiction","humanizeTime","milliseconds","seconds","round","plural","minutes","n","rounded","callHookWithTimeout","hookFn","hookName","hookFilePath","timeoutErr","timeoutWarn","getTimeouts","resolve","reject","promise","resolve_","reject_","ret","clearTimeouts","t1","t2","slice","thing","from","to","sliceArray","list","listSlice","start","end","el","isParsable","url","assertUsageUrl","errPrefix","parseUrl","baseServer","urlWithoutHash","hashList","hashOriginal","hash","decodeSafe","urlWithoutSearch","searchList","searchOriginal","search","searchAll","val","origin","pathnameResolved","parseWithNewUrl","pathnameOriginal","urlRecreated","pathname","hasBaseServer","analyzeBaseServer","decodePathname","urlComponent","urlPathname","dir","isTauriProtocol","PROTOCOL_TAURI","PROTOCOL_FAKE","urlParsed","base","assertPathname","urlPathnameWithBase","isBaseServer","baseServerNormalized","getCurrentUrl","options","urlCurrent","isCallable","isObject","value","hasProp","obj","prop","type","propValue","objectAssign","objAddendum","extJavaScript","extTemplates","scriptFileExtensionList","isScriptFile","filePath","yes","ext","isJavaScriptFile","isTemplateFile","higherFirst","getValue","element1","element2","val1","val2","makeFirst","makeLast","element","compareString","str1","str2","isNotNullish","p","sepWin32","assertPosixPath","path","invalidNameRE","isNpmPackageImport","parseNpmPath","scope","first","rest","name","importPath","IGNORE","FILES_WITH_SIDE_EXPORTS","assertDefaultExportUnknown","fileExports","assertSingleDefaultExport","defaultExportValueIsUnknown","exportsRelevant","exportName","exportsInvalid","e","exportsHasDefault","exportsInvalidStr","objectEntries","enforceTrue","assertExportValues","pageFile","explainer","forbiddenDefaultExports","assertDefaultExports","defaultExportName","getExports","pageFiles","pageConfig","configEntries","config","exportsAll","getExportValues","exportValue","isFromDefaultExport","configValues","configName","configValue","_b","_c","configElement","configDefinedByFile","configDefinedAt","pageExports","createObjectWithDeprecationWarning","exports","values","_fileType","_isFromDefaultExport","exportValues","defaultExportValue","args","determinePageIdOld","pageSuffix","pageId","assertPageFilePath","getErrorPageId","pageFilesAll","pageConfigs","errorPageConfigs","errorPageIds","isErrorPageId","errorPageId","_isV1Design","isErrorPage","fileTypes","determineFileType","parts","suffix1","suffix2","getPageFileObject","isRelevant","isRendererFilePath","isAncestorDefaultPage","fileType","env","isDefaultFilePath","defaultPageFilePath","defaultPageDir","filePathSegment","assertPageConfigs","assertConfigElements","assertPageConfigGlobal","pageConfigGlobal","configElements","isGlobalConfig","types","pattern","flags","serializer","deserializer","parse","modifier","reviver","match","deserialize","parsePageConfigs","parseConfigValue","assertRouteConfigValue","configValueSerialized","configValueType","parseGlobResults","pageFilesExports","pageFilesMap","parseGlobResult","globValue","loadModule","assertLoadModule","moduleExports","globObject","globFiles","setPageFiles","getPageFilesAll","isClientSide","allPageIds","getAllPageIds","allPageFiles","fileIds","isDefaultPageFile","allPageIds2","getPageFilesClientSide","determine","getPageFilesServerSide","envIsClient","pageFilesRelevant","getPageFilesSorter","getPageIdFile","iso","files","pageIdFile","pageIdFileEnv","pageIdFileIso","getRendererFile","rendererFileEnv","rendererFileIso","defaultFilesNonRenderer","e1First","e2First","noOrder","e1","e2","e1_isRenderer","e2_isRenderer","e1_distance","getPathDistance","e2_distance","pathA","pathB","idx","pathAWithoutCommon","pathBWithoutCommon","distanceA","distanceB","findPageConfig","result","loadPageCode","isDev","codeFile","codeFilePath","codeFileExports","isSideExport","configElementOfMainExport","stamp","loadPageFilesClientSide","pageFilesClientSide","pageConfigLoaded","isFetchError","isErrorFetchingStaticAssets","s","getConfigValue","isNullish","getCodeFilePath","getPageConfig","getPageContextSerializedInHtml","id","elem","pageContextJson","parseResult","pageContext","getHook","file","assertHook","sortPageContext","entries","key1","key2","addIs404ToPageProps","assertIs404","addIs404","pageProps","releasePageContext","isClientRouting","pageContextTyped","Page","resolveGetters","pageContextReadyForRelease","getProxy","JAVASCRIPT_BUILT_INS","PASS_TO_CLIENT_BUILT_INS","get","isMissing","_","assertPassToClient","pageContextRetrievedFromServer","passToClientInferred","executeOnRenderClientHook","hook","renderHook","getUrl","assertMissingHook","pageClientsFilesLoaded","hookResult","onRenderClientExists"],"mappings":"AAAO,SAASA,GAAY,CAExB,OAAO,OAAO,OAAW,KAAe,OAAO,OAAO,SAAY,QACtE,CCHO,SAASC,IAAW,CASvB,MARI,SAAO,QAAY,KAEnB,CAAC,QAAQ,KAGT,CAAC,QAAQ,UAAY,OAAO,QAAQ,SAAS,KAAS,KAGtD,CAAC,QAAQ,SAAW,QAAQ,QAAQ,OAAS,OAGrD,CCVA,SAASC,EAA+BC,EAAcC,EAAiC,CACnF,IAAIC,EACJ,CACI,IAAIC,EAA4B,MAAM,gBACtC,MAAM,gBAAkB,IACxBD,EAAM,IAAI,MAAMF,CAAY,EAC5B,MAAM,gBAAkBG,CAC3B,CACD,OAAIL,GAAQ,IACRI,EAAI,MAAQE,GAAMF,EAAI,MAAOD,CAA+B,GAEzDC,CACX,CACA,SAASE,GAAMC,EAAUJ,EAAiC,CACtD,GAAI,CAACI,EACD,OAAOA,EAEX,MAAMC,EAAaC,GAAYF,CAAQ,EACvC,IAAIG,EAAe,EAcnB,OAb2BF,EACtB,OAAQG,GAELA,EAAK,SAAS,aAAa,GAAKA,EAAK,SAAS,iBAAiB,EACxD,GAEPD,EAAeP,GAAmCS,GAAiBD,CAAI,GACvED,IACO,IAEJ,EACV,EACI,KAAK;AAAA,CAAI,CAElB,CACA,SAASE,GAAiBD,EAAM,CAC5B,OAAOA,EAAK,WAAW,SAAS,CACpC,CACA,SAASF,GAAYI,EAAK,CAEtB,OAAOA,EAAI,MAAM,OAAO,CAC5B,CC1CO,SAASC,EAEhBC,EAAKC,EAAc,CACf,MAAMC,EAAoB,WAAW,kBAAoB,WAAW,mBAAqB,CAAA,EAEzF,OADsBA,EAAiBF,CAAG,EAAIE,EAAiBF,CAAG,GAAKC,CAE3E,CCLA,SAASE,EAAOC,EAAK,CACjB,OAAO,MAAM,KAAK,IAAI,IAAIA,CAAG,CAAC,CAClC,CCQA,MAAMC,EAAeN,EAAgB,4BAA6B,CAC9D,UAAW,CAAE,EACb,cAAe,IAAI,GACvB,CAAC,EACKO,GAAW,2DACXC,GAAuB,wGAAwGD,4BAC/HE,EAA0B,kEAAkEF,kGAClG,SAASG,GAAuB,CAC5B,CACI,MAAMC,EAAWP,EAAOE,EAAa,SAAS,EAC9C,GAAIK,EAAS,OAAS,EAAG,CACrB,MAAMC,EAAS,wBAAwBD,EAAS,CAAC,yBAAyBA,EAAS,CAAC,+CAIpFE,GAAY,GAAOD,CAAM,EAGhC,CACGN,EAAa,qBAAuBA,EAAa,UAAU,OAAS,GAIpEQ,EAAc,GAAOL,EAAyB,CAAE,SAAU,GAAM,eAAgB,EAAI,CAAE,CAG9F,CACA,SAASM,GAA4BC,EAAc,CAC/CF,EAAcR,EAAa,kBAAoB,GAAME,GAAsB,CAAE,SAAU,GAAM,eAAgB,EAAI,CAAE,EACnHM,EAAcR,EAAa,kBAAoB,OAAWG,EAAyB,CAC/E,SAAU,GACV,eAAgB,EACxB,CAAK,EACDH,EAAa,gBAAkB,GAC3BU,IACAV,EAAa,oBAAsB,IACvCI,GACJ,CACA,SAASO,GAA4BD,EAAc,CAC/CF,EAAcR,EAAa,kBAAoB,GAAOE,GAAsB,CAAE,SAAU,GAAM,eAAgB,EAAI,CAAE,EACpHM,EAAcR,EAAa,kBAAoB,OAAWG,EAAyB,CAC/E,SAAU,GACV,eAAgB,EACxB,CAAK,EACDH,EAAa,gBAAkB,GAC3BU,IACAV,EAAa,oBAAsB,IACvCI,GACJ,CAEA,SAASQ,GAAcC,EAAgB,CACnCb,EAAa,UAAU,KAAKa,CAAc,EAC1CT,GACJ,CACA,SAASG,GAAYO,EAAWhC,EAAc,CAC1C,GAAIgC,EACA,OAEJ,MAAMR,EAAS,kCAAkCxB,IACjD,MAAM,IAAI,MAAMwB,CAAM,CAC1B,CACA,SAASE,EAAcM,EAAWhC,EAAc,CAAE,SAAAiC,EAAU,eAAAC,CAAc,EAAI,CAC1E,GAAIF,EACA,OAEJ,MAAMG,EAAM,8BAA8BnC,IAC1C,GAAIiC,EAAU,CACV,KAAM,CAAE,cAAAG,CAAe,EAAGlB,EACpBL,EAAMoB,IAAa,GAAOE,EAAMF,EACtC,GAAIG,EAAc,IAAIvB,CAAG,EACrB,OAGAuB,EAAc,IAAIvB,CAAG,EAIzB,QAAQ,KADRqB,EACa,IAAI,MAAMC,CAAG,EAGbA,CAHc,CAKnC,CC5FA,MAAME,GAAkB,UACXC,EAAc,CACvB,YAAa,kBACb,eAAgBD,GAChB,eAAgB,kBAChB,iBAAkB,6CACtB,EAEAP,GAAcQ,EAAY,cAAc,ECCxC,MAAMpB,EAAeN,EAAgB,YAAa,CAC9C,cAAe,IAAI,GACvB,CAAC,EACK2B,EAAY,IAAID,EAAY,kBAAkBA,EAAY,kBAC1DE,GAAsB,GAAGD,SACzBE,GAAmB,GAAGF,iBACtBG,GAAgB,GAAGH,aACnBI,GAAa,GAAGJ,UAChBtC,EAAkC,EACxC,SAAS2C,EAAOZ,EAAWa,EAAW,CAClC,IAAIC,EACJ,GAAId,EACA,OAEJ,MAAMe,GAAY,IAAM,CACpB,GAAI,CAACF,EACD,OAAO,KAEX,MAAMG,EAAsB,OAAOH,GAAc,SAAWA,EAAY,IAAM,KAAK,UAAUA,CAAS,EAAI,IAC1G,MAAO,+BAA+BP,EAAY,kDAAkDU,GAC5G,KACUC,EAAgBlD,EAA+B,CACjD,GAAGyC,iCAAkDF,EAAY,6BACjE,SAASA,EAAY,yHACrB,0DACA,2CAA2CA,EAAY,2BACvDS,CACH,EACI,OAAO,OAAO,EACd,KAAK,GAAG,EAAG9C,CAA+B,EAC/C,MAAC6C,EAAK5B,EAAa,eAAiB,MAAQ4B,IAAO,QAAkBA,EAAG,KAAK5B,CAAY,EACnF+B,CACV,CACA,SAASxB,EAAYO,EAAWhC,EAAc,CAC1C,IAAI8C,EACJ,GAAId,EACA,OAEJ,MAAMkB,EAAalD,EAAa,WAAW,GAAG,EAAI,GAAK,IACjDwB,EAAS,GAAGiB,KAAmBS,IAAalD,IAC5CmD,EAAapD,EAA+ByB,EAAQvB,CAA+B,EACzF,MAAC6C,EAAK5B,EAAa,eAAiB,MAAQ4B,IAAO,QAAkBA,EAAG,KAAK5B,CAAY,EACnFiC,CACV,CACA,SAASC,GAAgBpD,EAAc,CACnC,MAAMqD,EAAMrD,EAAa,WAAW,GAAG,EAAI,GAAK,IAEhD,OADoBD,EAA+B,GAAGwC,IAAYc,IAAMrD,IAAgBC,CAA+B,CAE3H,CACA,SAASyB,EAAcM,EAAWhC,EAAc,CAAE,SAAAiC,EAAW,GAAM,eAAAC,EAAiB,EAAO,EAAG,GAAI,CAC9F,IAAIY,EACJ,GAAId,EACA,OAEJ,MAAMG,EAAM,GAAGO,MAAiB1C,IAChC,GAAIiC,EAAU,CACV,KAAM,CAAE,cAAAG,CAAe,EAAGlB,EACpBL,EAAMoB,IAAa,GAAOE,EAAMF,EACtC,GAAIG,EAAc,IAAIvB,CAAG,EACrB,OAGAuB,EAAc,IAAIvB,CAAG,GAG5BiC,EAAK5B,EAAa,eAAiB,MAAQ4B,IAAO,QAAkBA,EAAG,KAAK5B,CAAY,EAErF,QAAQ,KADRgB,EACa,IAAI,MAAMC,CAAG,EAGbA,CAHc,CAKnC,CACA,SAASmB,GAAWtB,EAAWhC,EAAc,CAAE,SAAAiC,CAAQ,EAAI,CACvD,IAAIa,EACJ,GAAId,EACA,OAEJ,MAAMG,EAAM,GAAGQ,MAAc3C,IAC7B,GAAIiC,EAAU,CACV,KAAM,CAAE,cAAAG,CAAe,EAAGlB,EACpBL,EAAMsB,EACZ,GAAIC,EAAc,IAAIvB,CAAG,EACrB,OAGAuB,EAAc,IAAIvB,CAAG,GAG5BiC,EAAK5B,EAAa,eAAiB,MAAQ4B,IAAO,QAAkBA,EAAG,KAAK5B,CAAY,EACzF,QAAQ,IAAIiB,CAAG,CACnB,CC/FA,MAAMoB,EAAQ3C,EAAgB,4BAA6B,CAAA,CAAE,EAC7D,SAAS4C,IAAsB,CAC3BC,GAAsBC,GAAoB,CAAE,EAC5CH,EAAM,gBAAkB,EAC5B,CACA,SAASG,IAAuB,CAC5B,OAAOH,EAAM,kBAAoB,EACrC,CACA,SAASI,IAAsB,CAC3BF,GAAsBF,EAAM,kBAAoB,EAAI,EACpDA,EAAM,gBAAkB,EAC5B,CACA,SAASE,GAAsBG,EAAiB,CAE5CnC,EAAY5B,IAAa,6FAA6F,EACtH6B,EAAckC,EAAiB,8UAA+U,CAAE,eAAgB,GAAO,SAAU,EAAI,CAAE,CAC3Z,CCrBA,SAASC,EAAaC,EAAc,CAChC,MAAMC,EAAUD,EAAe,IAC/B,GAAIC,EAAU,IAAK,CACf,MAAM,EAAIC,EAAMD,CAAO,EACvB,MAAO,GAAG,WAAWE,EAAO,CAAC,IAEjC,CACI,MAAMC,EAAUH,EAAU,GACpBI,EAAIH,EAAME,CAAO,EACvB,MAAO,GAAGC,WAAWF,EAAOE,CAAC,GAChC,CACL,CACA,SAASH,EAAMG,EAAG,CACd,IAAIC,EAAUD,EAAE,QAAQ,CAAC,EACzB,OAAIC,EAAQ,SAAS,IAAI,IACrBA,EAAUA,EAAQ,MAAM,EAAG,EAAE,GAC1BA,CACX,CACA,SAASH,EAAOE,EAAG,CACf,OAAOA,IAAM,IAAM,GAAK,GAC5B,CClBA,SAASE,GAAoBC,EAAQC,EAAUC,EAAc,CACzD,KAAM,CAAE,WAAAC,EAAY,YAAAC,CAAa,EAAGC,GAAYJ,CAAQ,EACxD,IAAIK,EACAC,EACJ,MAAMC,EAAU,IAAI,QAAQ,CAACC,EAAUC,IAAY,CAC/CJ,EAAWK,GAAQ,CACfC,IACAH,EAASE,CAAG,CACxB,EACQJ,EAAU3E,GAAQ,CACdgF,IACAF,EAAQ9E,CAAG,CACvB,CACA,CAAK,EACKgF,EAAgB,IAAM,CACxB,aAAaC,CAAE,EACf,aAAaC,CAAE,CACvB,EACUD,EAAK,WAAW,IAAM,CACxB,MAAMhD,EAAM,GAAGI,kBAA0BgC,uBAA8BC,yBAAoCX,EAAaa,CAAW,IACnI,QAAQ,KAAKvC,CAAG,CACnB,EAAEuC,CAAW,EACRU,EAAK,WAAW,IAAM,CACxB,MAAMlF,EAAMkD,GAAgB,qBAAqBmB,uBAA8BC,yBAAoCX,EAAaY,CAAU,GAAG,EAC7II,EAAO3E,CAAG,CACb,EAAEuE,CAAU,EACb,OAAC,SAAY,CACT,GAAI,CACA,MAAMQ,EAAM,MAAMX,IAClBM,EAAQK,CAAG,CACd,OACM/E,EAAP,CACI2E,EAAO3E,CAAG,CACb,CACT,KACW4E,CACX,CACA,SAASH,GAAYJ,EAAU,CAC3B,IAAIE,EAAa,IACbC,EAAc,EAAI,IACtB,OAAIH,IAAa,kBACbE,EAAa,EAAI,IACjBC,EAAc,EAAI,KAElBH,IAAa,sBACbE,EAAa,GAAK,GAAK,IACvBC,EAAc,GAAK,KAEhB,CAAE,WAAAD,EAAY,YAAAC,EACzB,CClDA,SAASW,EAAMC,EAAOC,EAAMC,EAAI,CAC5B,OAAI,OAAOF,GAAU,SACVG,EAAWH,EAAM,MAAM,EAAE,EAAGC,EAAMC,CAAE,EAAE,KAAK,EAAE,EAG7CC,EAAWH,EAAOC,EAAMC,CAAE,CAEzC,CACA,SAASC,EAAWC,EAAMH,EAAMC,EAAI,CAChC,MAAMG,EAAY,CAAA,EAClB,IAAIC,EAAQL,GAAQ,EAAIA,EAAOG,EAAK,OAASH,EAC7C3C,EAAOgD,GAAS,GAAKA,GAASF,EAAK,MAAM,EACzC,IAAIG,EAAML,GAAM,EAAIA,EAAKE,EAAK,OAASF,EAEvC,IADA5C,EAAOiD,GAAO,GAAKA,GAAOH,EAAK,MAAM,EAE7B,EAAAE,IAAUC,IAGVD,IAAUF,EAAK,SACfE,EAAQ,GAERA,IAAUC,KAPL,CAUT,MAAMC,EAAKJ,EAAKE,CAAK,EACrBhD,EAAOkD,IAAO,MAAS,EACvBH,EAAU,KAAKG,CAAE,EACjBF,IAEJ,OAAOD,CACX,CCrBA,SAASI,GAAWC,EAAK,CAErB,OAAQA,EAAI,WAAW,GAAG,GACtBA,EAAI,WAAW,MAAM,GACrBA,EAAI,WAAW,UAAU,GACzBA,EAAI,WAAW,GAAG,GAClBA,EAAI,WAAW,GAAG,GAClBA,EAAI,WAAW,GAAG,GAClBA,IAAQ,EAChB,CACA,SAASC,GAAeD,EAAKE,EAAW,CACpCtD,EAAOsD,EAAU,SAAS,OAAO,CAAC,EAClCzE,EAAY,OAAOuE,GAAQ,SAAU,GAAGE,sBAA8B,EAClE,CAAAH,GAAWC,CAAG,IAEd,CAACA,EAAI,WAAW,GAAG,GAAK,CAACA,EAAI,SAAS,GAAG,EACzCvE,EAAY,GAAO,GAAGyE,SAAiBF,yBAA2BA,8DAAgE,EAGlIvE,EAAY,GAAO,GAAGyE,qBAA6B,EAE3D,CACA,SAASC,GAASH,EAAKI,EAAY,CAC/BxD,EAAOmD,GAAWC,CAAG,EAAG,CAAE,IAAAA,CAAK,CAAA,EAC/BpD,EAAOwD,EAAW,WAAW,GAAG,EAAG,CAAE,IAAAJ,EAAK,WAAAI,CAAU,CAAE,EAEtD,KAAM,CAACC,EAAgB,GAAGC,CAAQ,EAAIN,EAAI,MAAM,GAAG,EACnDpD,EAAOyD,IAAmB,MAAS,EACnC,MAAME,EAAe,CAAC,GAAI,GAAGD,CAAQ,EAAE,KAAK,GAAG,GAAK,KACpD1D,EAAO2D,IAAiB,MAAQA,EAAa,WAAW,GAAG,CAAC,EAC5D,MAAMC,EAAOD,IAAiB,KAAO,GAAKE,EAAWF,EAAa,MAAM,CAAC,CAAC,EAEpE,CAACG,EAAkB,GAAGC,CAAU,EAAIN,EAAe,MAAM,GAAG,EAClEzD,EAAO8D,IAAqB,MAAS,EACrC,MAAME,EAAiB,CAAC,GAAI,GAAGD,CAAU,EAAE,KAAK,GAAG,GAAK,KACxD/D,EAAOgE,IAAmB,MAAQA,EAAe,WAAW,GAAG,EAAG,CAAE,IAAAZ,EAAK,eAAAY,CAAc,CAAE,EACzF,MAAMC,EAAS,CAAA,EACTC,EAAY,CAAA,EAClB,MAAM,KAAK,IAAI,gBAAgBF,GAAkB,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC/F,EAAKkG,CAAG,IAAM,CAC1EF,EAAOhG,CAAG,EAAIkG,EACdD,EAAUjG,CAAG,EAAI,CAAC,GAAIiG,EAAUjG,CAAG,GAAK,CAAA,EAAKkG,CAAG,CACxD,CAAK,EAED,KAAM,CAAE,OAAAC,EAAQ,iBAAAC,CAAgB,EAAKC,GAAgBR,EAAkBN,CAAU,EACjFxD,EAAOoE,IAAW,MAAQA,IAAWP,EAAWO,CAAM,EAAG,CAAE,OAAAA,CAAM,CAAE,EACnEpE,EAAOqE,EAAiB,WAAW,GAAG,EAAG,CAAE,IAAAjB,EAAK,iBAAAiB,CAAgB,CAAE,EAClErE,EAAOoE,IAAW,MAAQhB,EAAI,WAAWgB,CAAM,EAAG,CAAE,IAAAhB,EAAK,OAAAgB,CAAM,CAAE,EAEjE,MAAMG,EAAmBT,EAAiB,OAAOM,GAAU,IAAI,MAAM,EACrE,CACI,MAAMI,EAAe,GAAGJ,GAAU,KAAKG,IAAmBP,GAAkB,KAAKL,GAAgB,KACjG3D,EAAOoD,IAAQoB,EAAc,CAAE,IAAApB,EAAK,aAAAoB,CAAc,CAAA,CACrD,CAED,GAAI,CAAE,SAAAC,EAAU,cAAAC,CAAa,EAAKC,GAAkBN,EAAkBb,CAAU,EAChF,OAAAiB,EAAWG,GAAeH,CAAQ,EAClCzE,EAAOyE,EAAS,WAAW,GAAG,CAAC,EACxB,CACH,OAAAL,EACA,SAAAK,EACA,iBAAkBF,EAClB,cAAAG,EACA,OAAAT,EACA,UAAAC,EACA,eAAAF,EACA,KAAAJ,EACA,aAAAD,CACR,CACA,CACA,SAASE,EAAWgB,EAAc,CAC9B,GAAI,CACA,OAAO,mBAAmBA,CAAY,CACzC,MACD,CAAS,CACT,GAAI,CACA,OAAO,UAAUA,CAAY,CAChC,MACD,CAAS,CACT,OAAOA,CACX,CACA,SAASD,GAAeE,EAAa,CACjC,OAAOA,EACF,MAAM,GAAG,EACT,IAAKC,GAAQlB,EAAWkB,CAAG,EAAE,MAAM,GAAG,EAAE,KAAK,KAAK,CAAC,EACnD,KAAK,GAAG,CACjB,CACA,SAAST,GAAgBR,EAAkBN,EAAY,CACnD,IAAItD,EAEJ,GAAI4D,EAAiB,WAAW,IAAI,EAChC,MAAO,CAAE,OAAQ,KAAM,iBAAkBA,CAAgB,EAE7D,IAAIkB,EAAkB,GACtB,MAAMC,EAAiB,WACjBC,EAAgB,UAClBpB,EAAiB,WAAWmB,CAAc,IAC1CD,EAAkB,GAClBlB,EAAmBoB,EAAgBpB,EAAiB,MAAMmB,EAAe,MAAM,GAEnF,IAAIb,EACAC,EACJ,GAAI,CAEA,MAAMc,EAAY,IAAI,IAAIrB,CAAgB,EAC1CM,EAASe,EAAU,OACnBd,EAAmBc,EAAU,QAChC,MACD,CAEIf,EAAS,KAET,IAAIgB,EAAO,OAAO,OAAW,OAGxBlF,EAAK,QAAW,KAA4B,OAAS,OAAO,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,SACnHkF,EAAOA,GAAQ,0BAA4B5B,EAQ3Ca,EADkB,IAAI,IAAIP,EAAkBsB,CAAI,EACnB,QAChC,CACD,OAAKf,IACDA,EAAmB,KACnBW,IACAhF,EAAOoE,CAAM,EACbpE,EAAOoE,EAAO,WAAWc,CAAa,CAAC,EACvCd,EAASa,EAAiBb,EAAO,MAAMc,EAAc,MAAM,GAE/DlF,EAAOqE,EAAiB,WAAW,GAAG,EAAG,CAAE,iBAAAP,EAAkB,iBAAAO,CAAgB,CAAE,EAG/ErE,EAAOqE,IAAqBA,EAAiB,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC,EACjE,CAAE,OAAAD,EAAQ,iBAAAC,EACrB,CAOA,SAASgB,GAAeP,EAAa,CACjC9E,EAAO8E,EAAY,WAAW,GAAG,CAAC,EAClC9E,EAAO,CAAC8E,EAAY,SAAS,GAAG,CAAC,EACjC9E,EAAO,CAAC8E,EAAY,SAAS,GAAG,CAAC,CACrC,CACA,SAASH,GAAkBW,EAAqB9B,EAAY,CACxD6B,GAAeC,CAAmB,EAClCtF,EAAOuF,GAAa/B,CAAU,CAAC,EAE/B,IAAIsB,EAAcQ,EAGlB,GAFAtF,EAAO8E,EAAY,WAAW,GAAG,CAAC,EAClC9E,EAAOwD,EAAW,WAAW,GAAG,CAAC,EAC7BA,IAAe,IAEf,MAAO,CAAE,SADQ8B,EACE,cAAe,IAGtC,IAAIE,EAAuBhC,EAK3B,OAJIA,EAAW,SAAS,GAAG,GAAKsB,IAAgBrC,EAAMe,EAAY,EAAG,EAAE,IACnEgC,EAAuB/C,EAAMe,EAAY,EAAG,EAAE,EAC9CxD,EAAO8E,IAAgBU,CAAoB,GAE1CV,EAAY,WAAWU,CAAoB,GAIhDxF,EAAO8E,EAAY,WAAW,GAAG,GAAKA,EAAY,WAAW,MAAM,CAAC,EACpE9E,EAAO8E,EAAY,WAAWU,CAAoB,CAAC,EACnDV,EAAcA,EAAY,MAAMU,EAAqB,MAAM,EACtDV,EAAY,WAAW,GAAG,IAC3BA,EAAc,IAAMA,GACxB9E,EAAO8E,EAAY,WAAW,GAAG,CAAC,EAC3B,CAAE,SAAUA,EAAa,cAAe,EAAI,GARxC,CAAE,SADQQ,EACE,cAAe,GAS1C,CA0BA,SAASC,GAAa/B,EAAY,CAC9B,OAAOA,EAAW,WAAW,GAAG,CACpC,CCrNA,SAASiC,GAAcC,EAAS,CAC5B,MAAMtC,EAAM,OAAO,SAAS,KACtB,CAAE,eAAAY,EAAgB,aAAAL,EAAc,SAAAc,CAAU,EAAGlB,GAASH,EAAK,GAAG,EACpE,IAAIuC,EACJ,OAAID,GAAY,MAAsCA,EAAQ,YAC1DC,EAAa,GAAGlB,IAAWT,GAAkB,KAG7C2B,EAAa,GAAGlB,IAAWT,GAAkB,KAAKL,GAAgB,KAEtE3D,EAAO2F,EAAW,WAAW,GAAG,CAAC,EAC1BA,CACX,CCfO,SAASC,EAAWlD,EAAO,CAC9B,OAAOA,aAAiB,UAAY,OAAOA,GAAU,UACzD,CCFO,SAASmD,EAASC,EAAO,CAC5B,OAAO,OAAOA,GAAU,UAAYA,IAAU,IAClD,CCIA,SAASC,EAAQC,EAAKC,EAAMC,EAAO,UAAW,CAC1C,GAAI,CAACL,EAASG,CAAG,EACb,MAAO,GACX,GAAI,EAAEC,KAAQD,GACV,OAAOE,IAAS,YAEpB,GAAIA,IAAS,UACT,MAAO,GAEX,MAAMC,EAAYH,EAAIC,CAAI,EAC1B,OAAIC,IAAS,QACF,MAAM,QAAQC,CAAS,EAE9BD,IAAS,SACFL,EAASM,CAAS,EAEzBD,IAAS,WACF,MAAM,QAAQC,CAAS,GAAKA,EAAU,MAAMjD,GAAM,OAAOA,GAAO,QAAQ,EAE/EgD,IAAS,WACFN,EAAWO,CAAS,EAE3B,MAAM,QAAQD,CAAI,EACX,OAAOC,GAAc,UAAYD,EAAK,SAASC,CAAS,EAE/DD,IAAS,OACFC,IAAc,KAErBD,IAAS,YACFC,IAAc,OAErBD,IAAS,OACFC,IAAc,GAErBD,IAAS,QACFC,IAAc,GAElB,OAAOA,IAAcD,CAChC,CC1CA,SAASE,EAAaJ,EAAKK,EAAa,CACpC,OAAO,OAAOL,EAAKK,CAAW,CAClC,CCAArG,EAAO/C,EAAS,CAAE,ECWlB,MAAMqJ,GAAgB,CAClB,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,OACA,MACJ,EAEMC,GAAe,CACjB,MACA,SACA,QACA,KACA,KACJ,EACMC,GAA0B,CAAC,GAAGF,GAAe,GAAGC,EAAY,EAElE,SAASE,GAAaC,EAAU,CAC5B,MAAMC,EAAMH,GAAwB,KAAMI,GAAQF,EAAS,SAAS,IAAME,CAAG,CAAC,EAC9E,OAAA5G,EAAO,CAAC6G,GAAiBH,CAAQ,GAAKC,CAAG,EAClCA,CACX,CACA,SAASE,GAAiBH,EAAU,CAChC,MAAO,oBAAoB,KAAKA,CAAQ,CAC5C,CACA,SAASI,GAAeJ,EAAU,CAC9B,OAAOH,GAAa,KAAMK,GAAQF,EAAS,SAAS,IAAME,CAAG,CAAC,CAClE,CCzCA,SAASG,GAAYC,EAAU,CAC3B,MAAO,CAACC,EAAUC,IAAa,CAC3B,MAAMC,EAAOH,EAASC,CAAQ,EACxBG,EAAOJ,EAASE,CAAQ,EAC9B,OAAIC,IAASC,EACF,EAEJD,EAAOC,EAAO,GAAK,CAClC,CACA,CAWA,SAASC,GAAUL,EAAU,CACzB,MAAO,CAACC,EAAUC,IAAa,CAC3B,MAAMC,EAAOH,EAASC,CAAQ,EACxBG,EAAOJ,EAASE,CAAQ,EAG9B,GAFAlH,EAAO,CAAC,GAAM,GAAO,IAAI,EAAE,SAASmH,CAAI,CAAC,EACzCnH,EAAO,CAAC,GAAM,GAAO,IAAI,EAAE,SAASoH,CAAI,CAAC,EACrCD,IAASC,EACT,MAAO,GAEX,GAAID,IAAS,IAAQC,IAAS,GAC1B,MAAO,GAEX,GAAIA,IAAS,IAAQD,IAAS,GAC1B,MAAO,GAEXnH,EAAO,EAAK,CACpB,CACA,CACA,SAASsH,GAASN,EAAU,CACxB,OAAOK,GAAWE,GAAY,CAC1B,MAAMpD,EAAM6C,EAASO,CAAO,EAC5B,OAAIpD,IAAQ,KACD,KAGA,CAACA,CAEpB,CAAK,CACL,CCvDA,SAASqD,GAAcC,EAAMC,EAAM,CAC/B,OAAID,EAAK,cAAgBC,EAAK,YAAa,EAChC,GACPD,EAAK,cAAgBC,EAAK,YAAa,EAChC,EACJ,CACX,CCPO,MAAMC,GAAgBC,GAAMA,GAAM,KCMnCC,GAAW,KASjB,SAASC,GAAgBC,EAAM,CAC3B,MAAMnJ,EAAUW,GAAQ,qBAAqBA,IAC7CS,EAAO+H,IAAS,KAAMnJ,EAAO,MAAM,CAAC,EACpCoB,EAAO,OAAO+H,GAAS,SAAUnJ,EAAO,oBAAoB,OAAOmJ,IAAO,CAAC,EAC3E/H,EAAO+H,IAAS,GAAInJ,EAAO,gBAAgB,CAAC,EAC5CoB,EAAO+H,CAAI,EACX/H,EAAO,CAAC+H,EAAK,SAASF,EAAQ,EAAGjJ,EAAOmJ,CAAI,CAAC,CACjD,CCjBA,MAAMC,EAAgB,cACtB,SAASC,GAAmBlK,EAAK,CAE7B,OADYmK,GAAanK,CAAG,IACb,IACnB,CAiBA,SAASmK,GAAanK,EAAK,CACvB,GAAIA,IAAQ,QAAaA,EAAI,SAAS,IAAI,GAAKA,EAAI,WAAW,GAAG,EAC7D,OAAO,KAEX,IAAIoK,EAAQ,KACZ,GAAIpK,EAAI,WAAW,GAAG,EAAG,CACrB,GAAI,CAACA,EAAI,SAAS,GAAG,EACjB,OAAO,KAEX,KAAM,CAACqK,EAAO,GAAGC,CAAI,EAAItK,EAAI,MAAM,GAAG,EACtCoK,EAAQC,EACRrK,EAAMsK,EAAK,KAAK,GAAG,EACnBrI,EAAOmI,GAASA,EAAM,WAAW,GAAG,CAAC,EAEzC,GAAIpK,IAAQ,GACR,OAAO,KAEX,KAAM,CAACqK,EAAO,GAAGC,CAAI,EAAItK,EAAI,MAAM,GAAG,EAChCuK,EAAOF,EACPG,EAAaF,EAAK,SAAW,EAAI,KAAOA,EAAK,KAAK,GAAG,EAG3D,OAFArI,EAAOsI,CAAI,EACXtI,EAAOuI,IAAe,MAAQ,CAACA,EAAW,WAAW,GAAG,CAAC,EACrDP,EAAc,KAAKM,CAAI,GAAMH,GAASH,EAAc,KAAKG,EAAM,MAAM,CAAC,CAAC,EAChE,MAEXnI,EAAO,CAACsI,EAAK,WAAW,GAAG,CAAC,EAErB,CACH,eAFmBH,EAAQ,GAAGA,KAASG,IAASA,EAGhD,WAAAC,CACR,EACA,CCrDA,MAAMC,GAAS,CAEX,kBAEA,gBACJ,EAEMC,GAA0B,CAAC,MAAO,MAAM,EAC9C,SAASC,GAA2BC,EAAajC,EAAU,CACvDkC,GAA0BD,EAAajC,EAAU,EAAI,CACzD,CAMA,SAASkC,GAA0BD,EAAajC,EAAUmC,EAA6B,CAEnF,MAAMC,EADa,OAAO,KAAKH,CAAW,EACP,OAAQI,GAAe,CAACP,GAAO,SAASO,CAAU,CAAC,EAChFC,EAAiBF,EAAgB,OAAQG,GAAMA,IAAM,SAAS,EAC9DC,EAAoBJ,EAAgB,SAAS,SAAS,EAC5D,GAAIE,EAAe,SAAW,EAAG,CAC7B,GAAIE,EACA,OAGAlJ,EAAO8I,EAAgB,SAAW,CAAC,EACnCjK,EAAY,GAAO,GAAG6H,6EAAoF,UAGzG,CAAC+B,GAAwB,KAAM7B,GAAQF,EAAS,SAASE,CAAG,CAAC,EAAG,CACrE,MAAMuC,EAAoBH,EAAe,KAAK,IAAI,EAC9CH,EACA/J,EAAckK,EAAe,SAAW,EAAG,GAAGtC,0DAAiEyC,QAAyB,CAAE,SAAU,GAAM,eAAgB,EAAK,CAAE,EAGjLrK,EAAckK,EAAe,SAAW,EAAG,GAAGtC,wBAA+ByC,iCAAiDA,QAAyB,CAAE,SAAU,GAAM,eAAgB,EAAK,CAAE,EAG5M,CCzCA,SAASC,GAAcpD,EAAK,CACxB,OAAO,OAAO,QAAQA,CAAG,CAC7B,CCCA,MAAMqD,GAAc,CAAC,eAAe,EACpC,SAASC,GAAmBC,EAAU,CAClCF,GAAY,QAASN,GAAe,CAEhC,GADA/I,EAAOuJ,EAAS,WAAW,EACvB,EAAER,KAAcQ,EAAS,aACzB,OACJ,MAAMC,EAAY,kBAAkBT,sCACpClK,EAAY0K,EAAS,YAAYR,CAAU,IAAM,GAAO,GAAGQ,EAAS,2BAA2BR,yEAAkFA,mBAA4BS,IAAY,EACzN3K,EAAY0K,EAAS,YAAYR,CAAU,IAAM,GAAM,GAAGQ,EAAS,2BAA2BR,iCAA0CS,GAAW,CAC3J,CAAK,CACL,CAEA,MAAMC,GAA0B,CAAC,SAAU,gBAAiB,YAAa,gBAAgB,EACzF,SAASC,GAAqBC,EAAmBjD,EAAU,CACvD7H,EAAY,CAAC4K,GAAwB,SAASE,CAAiB,EAAG,GAAGjD,4BAAmCiD,6CAA6DA,gBAAgC,CACzM,CCfA,SAASC,GAAWC,EAAWC,EAAY,CACvC,MAAMC,EAAgB,CAAA,EAChBC,EAAS,CAAA,EACTC,EAAa,CAAA,EAoBnB,GAjBAJ,EAAU,QAASN,GAAa,CACPW,GAAgBX,CAAQ,EAChC,QAAQ,CAAC,CAAE,WAAAR,EAAY,YAAAoB,EAAa,oBAAAC,CAAmB,IAAO,CACvE,IAAIlK,EACJF,EAAO+I,IAAe,SAAS,EAC/BkB,EAAWlB,CAAU,GAAK7I,EAAK+J,EAAWlB,CAAU,KAAO,MAAQ7I,IAAO,OAASA,EAAK,CAAA,EACxF+J,EAAWlB,CAAU,EAAE,KAAK,CACxB,YAAAoB,EACA,aAAc,GAAGZ,EAAS,cAAca,EAAsB,sBAAsBrB,QAAmB,cAAcA,UACrH,SAAUQ,EAAS,SACnB,UAAWA,EAAS,SACpB,UAAWA,EAAS,SACpB,qBAAsBa,CACtC,CAAa,CACb,CAAS,CACT,CAAK,EAEGN,EAAY,CACZ,KAAM,CAAE,aAAAO,CAAc,EAAGP,EACzBV,GAAciB,CAAY,EAAE,QAAQ,CAAC,CAACC,EAAYC,CAAW,IAAM,CAC/D,IAAIrK,EAAIsK,EAAIC,EACZ,MAAMC,EAAgBZ,EAAW,eAAeQ,CAAU,EAC1DtK,EAAO0K,CAAa,EACpB,KAAM,CAAE,oBAAAC,EAAqB,gBAAAC,CAAiB,EAAGF,EACjD1K,EAAO2K,CAAmB,EAC1BX,EAAOM,CAAU,GAAKpK,EAAK8J,EAAOM,CAAU,KAAO,MAAQpK,IAAO,OAASA,EAAKqK,EAChFR,EAAcO,CAAU,GAAKE,EAAKT,EAAcO,CAAU,KAAO,MAAQE,IAAO,OAASA,EAAK,CAAA,EAE9FxK,EAAO+J,EAAcO,CAAU,EAAE,SAAW,CAAC,EAC7CP,EAAcO,CAAU,EAAE,KAAK,CAC3B,YAAAC,EACA,gBAAAK,EACA,oBAAAD,CAChB,CAAa,EAED,MAAM5B,EAAauB,EACnBL,EAAWlB,CAAU,GAAK0B,EAAKR,EAAWlB,CAAU,KAAO,MAAQ0B,IAAO,OAASA,EAAK,CAAA,EACxFR,EAAWlB,CAAU,EAAE,KAAK,CACxB,YAAawB,EACb,aAAcK,EACd,SAAUD,EACV,UAAWA,EACX,UAAW,KACX,qBAAsB,IACtC,CAAa,CACb,CAAS,EAEL,MAAME,EAAcC,KACdC,EAAU,CAAA,EAChB,cAAO,QAAQd,CAAU,EAAE,QAAQ,CAAC,CAAClB,EAAYiC,CAAM,IAAM,CACzDA,EAAO,QAAQ,CAAC,CAAE,YAAAb,EAAa,UAAAc,EAAW,qBAAAC,CAAoB,IAAO,CACjE,IAAIhL,EACJ6K,EAAQhC,CAAU,GAAK7I,EAAK6K,EAAQhC,CAAU,KAAO,MAAQ7I,IAAO,OAASA,EAAKiK,EAE9Ec,IAAc,SAAW,CAACC,IACpBnC,KAAc8B,IAChBA,EAAY9B,CAAU,EAAIoB,GAG9C,CAAS,CACT,CAAK,EACDnK,EAAO,EAAE,YAAa+K,EAAQ,EAC9B/K,EAAO,EAAE,YAAaiK,EAAW,EAC1B,CACH,OAAAD,EACA,cAAAD,EAEA,QAAAgB,EACA,WAAAd,EACA,YAAAY,CACR,CACA,CACA,SAASX,GAAgBX,EAAU,CAC/B,KAAM,CAAE,SAAA7C,EAAU,YAAAiC,CAAa,EAAGY,EAClCvJ,EAAO2I,CAAW,EAClB3I,EAAOyG,GAAaC,CAAQ,CAAC,EAC7B,MAAMyE,EAAe,CAAA,EACrB,cAAO,QAAQxC,CAAW,EACrB,KAAKrB,GAAS,CAAC,CAACyB,CAAU,IAAMA,IAAe,SAAS,CAAC,EACzD,QAAQ,CAAC,CAACA,EAAYoB,CAAW,IAAM,CACxC,IAAIC,EAAsBrB,IAAe,UACzC,GAAIqB,EACA,GAAItD,GAAeJ,CAAQ,EACvBqC,EAAa,WAEZ,CACDlK,EAAYgH,EAASsE,CAAW,EAAG,6BAA6BzD,wBAA+B,EAC/F,OAAO,QAAQyD,CAAW,EAAE,QAAQ,CAAC,CAACR,EAAmByB,CAAkB,IAAM,CAC7E1B,GAAqBC,EAAmBjD,CAAQ,EAChDyE,EAAa,KAAK,CACd,WAAYxB,EACZ,YAAayB,EACb,oBAAAhB,CACxB,CAAqB,CACrB,CAAiB,EACD,OAGRe,EAAa,KAAK,CACd,WAAApC,EACA,YAAAoB,EACA,oBAAAC,CACZ,CAAS,CACT,CAAK,EACDe,EAAa,QAAQ,CAAC,CAAE,WAAApC,EAAY,oBAAAqB,CAAmB,IAAO,CAC1DpK,EAAO,EAAEoK,GAAuBX,GAAwB,SAASV,CAAU,EAAE,CACrF,CAAK,EACMoC,CACX,CACA,SAASL,IAAqC,CAC1C,OAAO,IAAI,MAAM,GAAI,CACjB,OAAOO,EAAM,CAET,OAAKpO,EAAS,GACV6B,EAAc,GAAO,oHAAqH,CAAE,SAAU,GAAM,eAAgB,EAAI,CAAE,EAE/K,QAAQ,IAAI,GAAGuM,CAAI,CAC7B,CACT,CAAK,CACL,CC/HA,SAASC,GAAmB5E,EAAU,CAClC,MAAM6E,EAAa,SACbC,EAAS/I,EAAMiE,EAAS,MAAM6E,CAAU,EAAG,EAAG,EAAE,EAAE,KAAKA,CAAU,EACvE,OAAAvL,EAAO,CAACwL,EAAO,SAAS,IAAI,CAAC,EACtBA,CACX,CCNA,SAASC,EAAmB/E,EAAU,CAClCoB,GAAgBpB,CAAQ,EACxB1G,EAAO0G,EAAS,WAAW,GAAG,GAAKuB,GAAmBvB,CAAQ,EAAG,CAAE,SAAAA,CAAQ,CAAE,CACjF,CCAA,SAASgF,GAAeC,EAAcC,EAAa,CAC/C,GAAIA,EAAY,OAAS,EAAG,CACxB,MAAMC,EAAmBD,EAAY,OAAQhE,GAAMA,EAAE,WAAW,EAChE,OAAIiE,EAAiB,SAAW,EACrB,MACXhN,EAAYgN,EAAiB,SAAW,EAAG,oCAAoC,EACxEA,EAAiB,CAAC,EAAE,QAG/B,MAAMC,EAAe1N,EAAOuN,EAAa,IAAI,CAAC,CAAE,OAAAH,CAAQ,IAAKA,CAAM,EAAE,OAAQA,GAAWO,EAAcP,CAAa,CAAC,CAAC,EAErH,GADA3M,EAAYiN,EAAa,QAAU,EAAG,0DAA0DA,EAAa,KAAK,GAAG,GAAG,EACpHA,EAAa,OAAS,EAAG,CACzB,MAAME,EAAcF,EAAa,CAAC,EAClC,OAAA9L,EAAOgM,CAAW,EACXA,EAEX,OAAO,IACX,CAEA,SAASD,EAAcP,EAAQS,EAAa,CACxC,OAAAjM,EAAO,CAACwL,EAAO,SAAS,IAAI,CAAC,EACtBA,EAAO,SAAS,SAAS,CACpC,CACA,SAASU,GAAYV,EAAQI,EAAa,CACtC,GAAIA,EAAY,OAAS,EAAG,CACxB,MAAM9B,EAAa8B,EAAY,KAAMhE,GAAMA,EAAE,SAAW4D,CAAM,EAC9D,OAAAxL,EAAO8J,CAAU,EACVA,EAAW,gBAGlB,QAAOiC,EAAcP,CAAa,CAE1C,CChCA,MAAMW,GAAY,CACd,QACA,eACA,cACA,eAIA,MACJ,EAIA,SAASC,GAAkB1F,EAAU,CAI7B,GAHJoB,GAAgBpB,CAAQ,EAENA,EAAS,SAAS,MAAM,EAElC,OAAA1G,EAAOiI,GAAmBvB,CAAQ,EAAGA,CAAQ,EACtC,OAGf1G,EAAOyG,GAAaC,CAAQ,EAAGA,CAAQ,EAEvC,MAAM2F,EADW3F,EAAS,MAAM,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC,EACzB,MAAM,GAAG,EAC1B4F,EAAUD,EAAM,MAAM,EAAE,EAAE,CAAC,EAC3BE,EAAUF,EAAM,MAAM,EAAE,EAAE,CAAC,EACjC,GAAIE,IAAY,OACZ,MAAO,QAGX,GADAvM,EAAOsM,IAAY,OAAQ5F,CAAQ,EAC/B6F,IAAY,SACZ,MAAO,eAEX,GAAIA,IAAY,SACZ,MAAO,eAEX,GAAIA,IAAY,QACZ,MAAO,cAEXvM,EAAO,GAAO0G,CAAQ,CAC1B,CCxCA,SAAS8F,GAAkB9F,EAAU,CACjC,MAAM+F,EAAcjB,GAAWjC,EAAS,SAAWiC,GAC9CjC,EAAS,oBACLmD,EAAmBnD,EAAS,QAAQ,GAAKoD,GAAsBnB,EAAQjC,EAAS,QAAQ,GAC3FqD,EAAWR,GAAkB1F,CAAQ,EAcrC6C,EAAW,CACb,SAAA7C,EACA,SAAAkG,EACA,MAhBWC,GAAQ,CAEnB,GADA7M,EAAO4M,IAAa,aAAa,EAC7BC,IAAQ,cACR,OAAOD,IAAa,gBAAkBA,IAAa,OAEvD,GAAIC,IAAQ,cACR,OAAOD,IAAa,eAExB,GAAIC,IAAQ,oBACR,OAAOD,IAAa,QAExB5M,EAAO,EAAK,CACpB,EAKQ,WAAAyM,EACA,kBAAmBK,EAAkBpG,CAAQ,EAC7C,mBAAoBkG,IAAa,QAAUE,EAAkBpG,CAAQ,GAAKgG,EAAmBhG,CAAQ,EACrG,gBAAiBqF,EAAcrF,CAAe,EAC9C,OAAQ4E,GAAmB5E,CAAQ,CAC3C,EACI,OAAO6C,CACX,CACA,SAASuD,EAAkBpG,EAAU,CAEjC,OADA+E,EAAmB/E,CAAQ,EACvBqF,EAAcrF,CAAe,EACtB,GAEJA,EAAS,SAAS,WAAW,CACxC,CACA,SAASgG,EAAmBhG,EAAU,CAClC,OAAA+E,EAAmB/E,CAAQ,EACpBA,EAAS,SAAS,YAAY,CACzC,CACA,SAASiG,GAAsBnB,EAAQuB,EAAqB,CACxDtB,EAAmBD,CAAM,EACzBC,EAAmBsB,CAAmB,EACtC/M,EAAO,CAACwL,EAAO,SAAS,GAAG,CAAC,EAC5BxL,EAAO,CAAC+M,EAAoB,SAAS,GAAG,CAAC,EACzC/M,EAAO8M,EAAkBC,CAAmB,CAAC,EAC7C,MAAMC,EAAiBvK,EAAMsK,EAAoB,MAAM,GAAG,EAAG,EAAG,EAAE,EAC7D,OAAQE,GAAoBA,IAAoB,UAAU,EAC1D,KAAK,GAAG,EACb,OAAOzB,EAAO,WAAWwB,CAAc,CAC3C,CCtDA,SAASE,GAAkBtB,EAAa,CACpC5L,EAAO,MAAM,QAAQ4L,CAAW,GAAKA,IAAgB,IAAI,EAGzD5L,EAAO4L,IAAgB,IAAI,EAC3BA,EAAY,QAAS9B,GAAe,CAChC9J,EAAO6F,EAASiE,CAAU,CAAC,EAC3B9J,EAAO+F,EAAQ+D,EAAY,SAAU,QAAQ,CAAC,EAC9C9J,EAAO+F,EAAQ+D,EAAY,kBAAmB,QAAQ,GAAK/D,EAAQ+D,EAAY,kBAAmB,MAAM,CAAC,EACzG9J,EAAO+F,EAAQ+D,EAAY,2BAA4B,QAAQ,GAC3D/D,EAAQ+D,EAAY,2BAA4B,MAAM,CAAC,EAC3D9J,EAAO+F,EAAQ+D,EAAY,gBAAiB,UAAU,CAAC,EACvD9J,EAAO+F,EAAQ+D,EAAY,cAAe,SAAS,CAAC,EACpD9J,EAAO+F,EAAQ+D,EAAY,iBAAkB,QAAQ,CAAC,EACtDqD,GAAqBrD,EAAW,eAAgB,EAAK,CAC7D,CAAK,CACL,CACA,SAASsD,GAAuBC,EAAkB,CAC9CF,GAAqBE,EAAkB,EAAI,CAC/C,CACA,SAASF,GAAqBG,EAAgBC,EAAgB,CAC1DvN,EAAO6F,EAASyH,CAAc,CAAC,EAC/B,OAAO,QAAQA,CAAc,EAAE,QAAQ,CAAC,CAAChD,EAAYI,CAAa,IAAM,CAEpE,GADA1K,EAAO6F,EAAS6E,CAAa,GAAKA,IAAkB,IAAI,EACpDA,IAAkB,KAAM,CACxB1K,EAAOuN,CAAc,EACrB,OAEJvN,EAAO+F,EAAQ2E,EAAe,kBAAmB,QAAQ,CAAC,EAC1D1K,EAAO+F,EAAQ2E,EAAe,qBAAsB,QAAQ,GAAK3E,EAAQ2E,EAAe,qBAAsB,MAAM,CAAC,EACrH1K,EAAO+F,EAAQ2E,EAAe,YAAa,QAAQ,CAAC,EACpD1K,EAAO+F,EAAQ2E,EAAe,eAAgB,QAAQ,GAAK3E,EAAQ2E,EAAe,eAAgB,MAAM,CAAC,EACzG1K,EAAO+F,EAAQ2E,EAAe,iBAAkB,QAAQ,GAAK3E,EAAQ2E,EAAe,iBAAkB,MAAM,CAAC,EAC7G1K,EAAO+F,EAAQ2E,EAAe,wBAAyB,QAAQ,GAC3D3E,EAAQ2E,EAAe,wBAAyB,WAAW,CAAC,GAC5D6C,GAEAjD,IAAe,UACftK,EAAO+F,EAAQ2E,EAAe,aAAa,GAAK3E,EAAQ2E,EAAe,uBAAuB,CAAC,CAE3G,CAAK,CACL,CC3CA,MAAM8C,GAAQ,CACP,CACC,GAAKrJ,GAAQA,IAAQ,OACrB,MAAQpG,GAAQA,IAAQ,aACxB,UAAW,IAAM,aACjB,YAAa,IAAA,EACrB,EACO,CACC,GAAKoG,GAAQA,IAAQ,IACrB,MAAQpG,GAAQA,IAAQ,YACxB,UAAW,IAAM,YACjB,YAAa,IAAM,GAC3B,EACO,CACC,GAAKoG,GAAQA,IAAQ,KACrB,MAAQpG,GAAQA,IAAQ,aACxB,UAAW,IAAM,aACjB,YAAa,IAAM,IAC3B,EACO,CACC,GAAKoG,GAAQ,OAAOA,GAAQ,UAAY,MAAMA,CAAG,EACjD,MAAQpG,GAAQA,IAAQ,OACxB,UAAW,IAAM,OACjB,YAAa,IAAM,GAC3B,EACO,CACC,GAAKoG,GAAQA,aAAe,KAC5B,MAAQpG,GAAQA,EAAI,WAAW,QAAQ,EACvC,UAAYoG,GAAQ,SAAWA,EAAI,YAAa,EAChD,YAAcpG,GAAQ,IAAI,KAAKA,EAAI,MAAM,CAAe,CAAC,CACjE,EACO,CACC,GAAKoG,GAAQ,OAAOA,GAAQ,SAC5B,MAAQpG,GAAQA,EAAI,WAAW,UAAU,EACzC,UAAYoG,GAAQ,WAAaA,EAAI,SAAU,EAC/C,YAAcpG,GAAQ,CAClB,GAAI,OAAO,OAAW,IAClB,MAAM,IAAI,MAAM,mFAAmF,EAEvG,OAAO,OAAOA,EAAI,MAAM,CAAiB,CAAC,CAC7C,CACT,EACO,CACC,GAAKoG,GAAQA,aAAe,OAC5B,MAAQpG,GAAQA,EAAI,WAAW,UAAU,EACzC,UAAYoG,GAAQ,WAAaA,EAAI,SAAU,EAC/C,YAAcpG,GAAQ,CAClBA,EAAMA,EAAI,MAAM,CAAiB,EAEjC,MAAMsN,EAAOtN,EAAI,MAAM,eAAe,EAChC0P,EAAUpC,EAAK,CAAC,EAChBqC,EAAQrC,EAAK,CAAC,EACpB,OAAO,IAAI,OAAOoC,EAASC,CAAK,CACnC,CACT,EACO,CACC,GAAKvJ,GAAQA,aAAe,IAC5B,MAAQpG,GAAQA,EAAI,WAAW,OAAO,EACtC,UAAW,CAACoG,EAAKwJ,IAAe,QAAUA,EAAW,MAAM,KAAKxJ,EAAI,QAAO,CAAE,CAAC,EAC9E,YAAa,CAACpG,EAAK6P,IAAiB,IAAI,IAAIA,EAAa7P,EAAI,MAAM,CAAc,CAAC,CAAC,CAC3F,EACO,CACC,GAAKoG,GAAQA,aAAe,IAC5B,MAAQpG,GAAQA,EAAI,WAAW,OAAO,EACtC,UAAW,CAACoG,EAAKwJ,IAAe,QAAUA,EAAW,MAAM,KAAKxJ,EAAI,OAAM,CAAE,CAAC,EAC7E,YAAa,CAACpG,EAAK6P,IAAiB,IAAI,IAAIA,EAAa7P,EAAI,MAAM,CAAc,CAAC,CAAC,CAC3F,EAEO,CACC,GAAKoG,GAAQ,OAAOA,GAAQ,UAAYA,EAAI,WAAW,GAAG,EAC1D,MAAQpG,GAAQA,EAAI,WAAW,GAAG,EAClC,UAAYoG,GAAQ,IAAMA,EAC1B,YAAcpG,GAAQA,EAAI,MAAM,CAAC,CACzC,CACA,ECzEA,SAAS8P,EAAM9P,EAAK,CAEhB,MAAM+H,EAAQ,KAAK,MAAM/H,CAAG,EAC5B,OAAO+P,GAAShI,CAAK,CACzB,CACA,SAASgI,GAAShI,EAAO,CACrB,OAAI,OAAOA,GAAU,SACViI,GAAQjI,CAAK,GAEpB,OAAOA,GAAU,UAAYA,IAAU,MACvC,OAAO,QAAQA,CAAK,EAAE,QAAQ,CAAC,CAAC7H,EAAKkG,CAAG,IAAM,CAE1C2B,EAAM7H,CAAG,EAAI6P,GAAS3J,CAAG,CACrC,CAAS,EAEE2B,EACX,CACA,SAASiI,GAAQjI,EAAO,CACpB,SAAW,CAAE,MAAAkI,EAAO,YAAAC,CAAW,IAAMT,GACjC,GAAIQ,EAAMlI,CAAK,EACX,OAAOmI,EAAYnI,EAAO+H,CAAK,EAGvC,OAAO/H,CACX,CCtBA,SAASoI,GAAiBtC,EAAa,CACnCA,EAAY,QAAS9B,GAAe,CAChC,OAAO,QAAQA,EAAW,cAAc,EAAE,QAAQ,CAAC,CAACQ,EAAYI,CAAa,IAAM,CAC/EyD,GAAiBzD,CAAa,EAC1BJ,IAAe,SACf8D,GAAuB1D,CAAa,CAEpD,CAAS,CACT,CAAK,CACL,CACA,SAASyD,GAAiBzD,EAAe,CACrC,KAAM,CAAE,sBAAA2D,CAAuB,EAAG3D,EAC9B2D,IAA0B,SAC1B3D,EAAc,YAAcmD,EAAMQ,CAAqB,EAE/D,CACA,SAASD,GAAuB1D,EAAe,CAC3C1K,EAAO+F,EAAQ2E,EAAe,aAAa,CAAC,EAC5C,KAAM,CAAE,YAAAH,CAAa,EAAGG,EAClB4D,EAAkB,OAAO/D,EAC/B1L,EAAYyP,IAAoB,UAAY1I,EAAW2E,CAAW,EAAG,GAAGG,EAAc,wCAAwC4D,wFAAsG,CAQxO,CCxBA,SAASC,GAAiBC,EAAkB,CACxCxO,EAAO+F,EAAQyI,EAAkB,iBAAiB,CAAC,EACnDxO,EAAOwO,EAAiB,kBAAoB,GAAO,gEAAgE,EACnHxO,EAAOwO,EAAiB,kBAAoB,GAAM,yBAAyBA,EAAiB,mBAAmB,EAC/GxO,EAAO+F,EAAQyI,EAAkB,gBAAiB,QAAQ,CAAC,EAC3DxO,EAAO+F,EAAQyI,EAAkB,iBAAkB,QAAQ,CAAC,EAC5DxO,EAAO+F,EAAQyI,EAAkB,2BAA4B,QAAQ,CAAC,EACtExO,EAAO+F,EAAQyI,EAAkB,4BAA6B,QAAQ,CAAC,EACvExO,EAAO+F,EAAQyI,EAAiB,cAAe,OAAO,CAAC,EACvDxO,EAAO+F,EAAQyI,EAAiB,cAAe,cAAc,GAAKzI,EAAQyI,EAAiB,cAAe,cAAc,CAAC,EACzHxO,EAAO+F,EAAQyI,EAAkB,gBAAiB,UAAU,CAAC,EAC7DxO,EAAO+F,EAAQyI,EAAkB,aAAa,CAAC,EAC/CxO,EAAO+F,EAAQyI,EAAkB,kBAAkB,CAAC,EACpD,KAAM,CAAE,YAAA5C,EAAa,iBAAAyB,CAAkB,EAAGmB,EAC1CtB,GAAkBtB,CAAW,EAC7BsC,GAAiBtC,CAAW,EAC5BwB,GAAuBC,CAAgB,EACvC,MAAMoB,EAAe,CAAA,EACrBC,EAAgBF,EAAiB,aAAa,EAAE,QAAQ,CAAC,CAAE,SAAA9H,EAAU,SAAA6C,EAAU,UAAAoF,KAAgB,CAC3F,IAAIzO,EACJqJ,EAAWkF,EAAa/H,CAAQ,GAAKxG,EAAKuO,EAAa/H,CAAQ,KAAO,MAAQxG,IAAO,OAASA,EAAKqJ,EACnG,MAAMqF,EAAaD,EACnBE,GAAiBD,CAAU,EAC3BrF,EAAS,SAAW,SAAY,CACtB,gBAAiBA,IACnBA,EAAS,YAAc,MAAMqF,IAC7BtF,GAAmBC,CAAQ,EAE3C,CACA,CAAK,EACDmF,EAAgBF,EAAiB,wBAAwB,EAAE,QAAQ,CAAC,CAAE,SAAA9H,EAAU,SAAA6C,EAAU,UAAAoF,KAAgB,CACtG,IAAIzO,EACJqJ,EAAWkF,EAAa/H,CAAQ,GAAKxG,EAAKuO,EAAa/H,CAAQ,KAAO,MAAQxG,IAAO,OAASA,EAAKqJ,EACnG,MAAMqF,EAAaD,EACnBE,GAAiBD,CAAU,EAC3BrF,EAAS,gBAAkB,SAAY,CACnC,GAAI,EAAE,gBAAiBA,GAAW,CAC9B,MAAMuF,EAAgB,MAAMF,IAE5B/P,EAAY,gBAAiBiQ,EAAe,2FAA2F,EACvI9O,EAAO+F,EAAQ+I,EAAe,cAAe,UAAU,EAAGvF,EAAS,QAAQ,EAC3EA,EAAS,YAAcuF,EAAc,YAErD,CACA,CAAK,EAEDJ,EAAgBF,EAAiB,cAAc,EAAE,QAAQ,CAAC,CAAE,SAAA9H,EAAU,SAAA6C,EAAU,UAAAoF,KAAgB,CAC5F,IAAIzO,EACJqJ,EAAWkF,EAAa/H,CAAQ,GAAKxG,EAAKuO,EAAa/H,CAAQ,KAAO,MAAQxG,IAAO,OAASA,EAAKqJ,EACnG,MAAMuF,EAAgBH,EACtB3O,EAAO6F,EAASiJ,CAAa,CAAC,EAC9BvF,EAAS,YAAcuF,CAC/B,CAAK,EACDJ,EAAgBF,EAAiB,yBAAyB,EAAE,QAAQ,CAAC,CAAE,SAAA9H,EAAU,SAAA6C,EAAU,UAAAoF,KAAgB,CACvG,IAAIzO,EACJqJ,EAAWkF,EAAa/H,CAAQ,GAAKxG,EAAKuO,EAAa/H,CAAQ,KAAO,MAAQxG,IAAO,OAASA,EAAKqJ,EACnG,MAAMuF,EAAgBH,EACtB3O,EAAO6F,EAASiJ,CAAa,CAAC,EAC9B9O,EAAO+F,EAAQ+I,EAAe,cAAe,UAAU,EAAGvF,EAAS,QAAQ,EAC3EA,EAAS,YAAcuF,EAAc,WAC7C,CAAK,EACDN,EAAiB,cAAc,QAAS9H,GAAa,CACjD,IAAIxG,EACJuO,EAAa/H,CAAQ,GAAKxG,EAAKuO,EAAa/H,CAAQ,KAAO,MAAQxG,IAAO,OAASA,EAAKsM,GAAkB9F,CAAQ,CAC1H,CAAK,EACD,MAAMmD,EAAY,OAAO,OAAO4E,CAAY,EAC5C,OAAA5E,EAAU,QAAQ,CAAC,CAAE,SAAAnD,KAAe,CAChC1G,EAAO,CAAC0G,EAAS,SAAS,IAAI,CAAC,CACvC,CAAK,EACM,CAAE,UAAAmD,EAAW,YAAA+B,EAAa,iBAAAyB,EACrC,CACA,SAASqB,EAAgBK,EAAY,CACjC,MAAM1M,EAAM,CAAA,EACZ,cAAO,QAAQ0M,CAAU,EAAE,QAAQ,CAAC,CAACnC,EAAUoC,CAAS,IAAM,CAE1DhP,EAAOmM,GAAU,SAASS,CAAQ,CAAC,EACnC5M,EAAO6F,EAASmJ,CAAS,CAAC,EAC1B,OAAO,QAAQA,CAAS,EAAE,QAAQ,CAAC,CAACtI,EAAUiI,CAAS,IAAM,CACzD,MAAMpF,EAAWiD,GAAkB9F,CAAQ,EAC3C1G,EAAOuJ,EAAS,WAAaqD,CAAQ,EACrCvK,EAAI,KAAK,CAAE,SAAAqE,EAAU,SAAA6C,EAAU,UAAAoF,CAAW,CAAA,CACtD,CAAS,CACT,CAAK,EACMtM,CACX,CACA,SAASwM,GAAiBF,EAAW,CACjC3O,EAAO4F,EAAW+I,CAAS,CAAC,CAChC,CCzFA,MAAMrQ,EAAeN,EAAgB,kBAAmB,CAAA,CAAE,EAC1D,SAASiR,GAAaT,EAAkB,CACpC,KAAM,CAAE,UAAA3E,EAAW,YAAA+B,EAAa,iBAAAyB,CAAgB,EAAKkB,GAAiBC,CAAgB,EACtFlQ,EAAa,aAAeuL,EAC5BvL,EAAa,YAAcsN,EAC3BtN,EAAa,iBAAmB+O,CACpC,CAMA,eAAe6B,GAAgBC,EAAcnQ,EAAc,CACnDmQ,GACAnP,EAAO,CAAC1B,EAAa,eAAe,EACpC0B,EAAOhB,IAAiB,MAAS,IAGjCgB,EAAO1B,EAAa,eAAe,EACnC0B,EAAO,OAAOhB,GAAiB,SAAS,GACpC,CAACV,EAAa,cAEd,CAACU,IACD,MAAMV,EAAa,mBAG3B,KAAM,CAAE,aAAAqN,EAAc,YAAAC,EAAa,iBAAAyB,CAAgB,EAAK/O,EACxD0B,EAAO2L,GAAgBC,GAAeyB,CAAgB,EACtD,MAAM+B,EAAaC,GAAc1D,EAAcC,CAAW,EAC1D,MAAO,CAAE,aAAAD,EAAc,WAAAyD,EAAY,YAAAxD,EAAa,iBAAAyB,CAAgB,CACpE,CACA,SAASgC,GAAcC,EAAc1D,EAAa,CAC9C,MAAM2D,EAAUD,EAAa,OAAO,CAAC,CAAE,kBAAAE,CAAmB,IAAK,CAACA,CAAiB,EAAE,IAAI,CAAC,CAAE,OAAAhE,CAAQ,IAAKA,CAAM,EACvG4D,EAAahR,EAAOmR,CAAO,EAC3BE,EAAc7D,EAAY,IAAKhE,GAAMA,EAAE,MAAM,EACnD,MAAO,CAAC,GAAGwH,EAAY,GAAGK,CAAW,CACzC,CCtCA,SAASC,GAAuB/D,EAAcH,EAAQ,CAClD,OAAOmE,GAAUhE,EAAcH,EAAQ,EAAI,CAC/C,CACA,SAASoE,GAAuBjE,EAAcH,EAAQ,CAClD,OAAOmE,GAAUhE,EAAcH,EAAQ,EAAK,CAChD,CACA,SAASmE,GAAUhE,EAAcH,EAAQqE,EAAa,CAClD,MAAMhD,EAAMgD,EAAc,cAAgB,cACpCC,EAAoBnE,EACrB,OAAQ/D,GAAMA,EAAE,WAAW4D,CAAM,GAAK5D,EAAE,WAAa,aAAa,EAClE,KAAKmI,GAAmBF,EAAarE,CAAM,CAAC,EAE3CwE,EAAiBC,GAAQ,CAC3B,MAAMC,EAAQJ,EAAkB,OAAQlI,GAAMA,EAAE,SAAW4D,GAAU5D,EAAE,MAAMqI,EAAM,oBAAsBpD,CAAG,CAAC,EAC7GhO,EAAYqR,EAAM,QAAU,EAAG,iDAAiDA,EAAM,IAAKtI,GAAMA,EAAE,QAAQ,EAAE,KAAK,GAAG,GAAG,EACxH,MAAMuI,EAAaD,EAAM,CAAC,EAC1B,OAAAlQ,EAAOmQ,IAAe,QAAa,CAACA,EAAW,iBAAiB,EACzDA,CACf,EACUC,EAAgBJ,EAAc,EAAK,EACnCK,EAAgBL,EAAc,EAAI,EAGlCM,EAAmBL,GAAQH,EAAkB,OAAQlI,GAAMA,EAAE,oBAAsBA,EAAE,MAAMqI,EAAM,oBAAsBpD,CAAG,CAAC,EAAE,CAAC,EAC9H0D,EAAkBD,EAAgB,EAAK,EACvCE,EAAkBF,EAAgB,EAAI,EAGtCG,EAA0BX,EAAkB,OAAQlI,GAAMA,EAAE,mBAAqB,CAACA,EAAE,qBAAuBA,EAAE,MAAMiF,CAAG,GAAKjF,EAAE,MAAM,mBAAmB,EAAE,EAG9J,MADkB,CAACwI,EAAeC,EAAe,GAAGI,EAAyBF,EAAiBC,CAAe,EAAE,OAAO7I,EAAY,CAEtI,CACA,SAASoI,GAAmBF,EAAarE,EAAQ,CAC7C,MAAMqB,EAAMgD,EAAc,cAAgB,cACpCa,EAAU,GACVC,EAAU,EACVC,EAAU,EAChB,MAAO,CAACC,EAAIC,IAAO,CAEf,GAAI,CAACD,EAAG,mBAAqBC,EAAG,kBAC5B,OAAOJ,EAEX,GAAI,CAACI,EAAG,mBAAqBD,EAAG,kBAC5B,OAAOF,EAGX,CACI,MAAMI,EAAgBF,EAAG,mBACnBG,EAAgBF,EAAG,mBACzB,GAAI,CAACC,GAAiBC,EAClB,OAAON,EAEX,GAAI,CAACM,GAAiBD,EAClB,OAAOJ,EAEX3Q,EAAO+Q,IAAkBC,CAAa,CACzC,CAED,CACI,MAAMC,EAAcC,GAAgB1F,EAAQqF,EAAG,QAAQ,EACjDM,EAAcD,GAAgB1F,EAAQsF,EAAG,QAAQ,EACvD,GAAIG,EAAcE,EACd,OAAOT,EAEX,GAAIS,EAAcF,EACd,OAAON,EAEX3Q,EAAOiR,IAAgBE,CAAW,CACrC,CAED,CACI,GAAIN,EAAG,MAAMhE,CAAG,GAAKiE,EAAG,MAAM,mBAAmB,EAC7C,OAAOJ,EAEX,GAAII,EAAG,MAAMjE,CAAG,GAAKgE,EAAG,MAAM,mBAAmB,EAC7C,OAAOF,CAEd,CACD,OAAOC,CACf,CACA,CACA,SAASM,GAAgBE,EAAOC,EAAO,CACnC5F,EAAmB2F,CAAK,EACxB3F,EAAmB4F,CAAK,EAExB,IAAIC,EAAM,EACV,KAAOA,EAAMF,EAAM,QAAUE,EAAMD,EAAM,QACjCD,EAAME,CAAG,IAAMD,EAAMC,CAAG,EADiBA,IAC7C,CAGJ,MAAMC,EAAqBH,EAAM,MAAME,CAAG,EACpCE,EAAqBH,EAAM,MAAMC,CAAG,EACpCG,EAAYF,EAAmB,MAAM,GAAG,EAAE,OAC1CG,EAAYF,EAAmB,MAAM,GAAG,EAAE,OAEhD,OADiBC,EAAYC,CAEjC,CCnGA,SAASC,GAAe/F,EAAaJ,EAAQ,CACzC,IAAItL,EACJ,MAAM0R,EAAShG,EAAY,OAAQhE,GAAMA,EAAE,SAAW4D,CAAM,EAC5D,OAAAxL,EAAO4R,EAAO,QAAU,CAAC,GACL1R,EAAK0R,EAAO,CAAC,KAAO,MAAQ1R,IAAO,OAASA,EAAK,IAEzE,CCNA,eAAe2R,GAAa/H,EAAYgI,EAAO,CAC3C,MAAMzH,EAAe,CAAA,EAErB,MAAI,CAACyH,GAAS,iBAAkBhI,KAGd,MAAMA,EAAW,iBACzB,QAASiI,GAAa,CAC5B,KAAM,CAAE,WAAAzH,EAAY,aAAA0H,CAAc,EAAGD,EACrC,IAAIxH,EACJ,GAAIwH,EAAS,WAAY,CACrB,KAAM,CAAE,gBAAAE,CAAiB,EAAGF,EACxBzH,IAAe,UACf5B,GAA2BuJ,EAAiBD,CAAY,EAE5D,OAAO,QAAQC,CAAe,EAAE,QAAQ,CAAC,CAAClJ,EAAYoB,CAAW,IAAM,CACnE,MAAM+H,EAAenJ,IAAe,UAC9BuB,EAAa4H,EAAenJ,EAAagJ,EAAS,WAClDxH,EAAcJ,EAEpB,GADAE,EAAaC,CAAU,EAAIC,EACvB2H,EAAc,CACd,MAAMC,EAA4BrI,EAAW,eAAeiI,EAAS,UAAU,EAC/E/R,EAAOmS,CAAyB,EAChCrI,EAAW,eAAeQ,CAAU,EAAI,CACpC,YAAAC,EACA,eAAgBxB,EAChB,aAAAiJ,EACA,oBAAqBA,EACrB,gBAAiB,GAAGA,gBAA2BjJ,MAC/C,UAAWoJ,EAA0B,UACrC,mBAAoB,IAC5C,EAEA,CAAa,OAGD5H,EAAcwH,EAAS,oBACvB1H,EAAaC,CAAU,EAAIC,CAEvC,CAAK,EACD,OAAO,QAAQT,EAAW,cAAc,EAAE,IAAI,CAAC,CAACQ,EAAYI,CAAa,IAAM,CACvEA,EAAc,eAElBL,EAAaC,CAAU,EAAII,EAAc,YACjD,CAAK,EACDtE,EAAa0D,EAAY,CAAE,aAAAO,CAAY,CAAE,GAClCP,CACX,CC5CA,MAAMsI,GAAQ,wBACd,eAAeC,GAAwB1G,EAAcC,EAAaJ,EAAQ,CACtE,MAAM8G,EAAsB5C,GAAuB/D,EAAcH,CAAM,EACjE1B,EAAa6H,GAAe/F,EAAaJ,CAAM,EACrD,IAAI+G,EACJ,GAAI,CAMAA,GAJe,MAAM,QAAQ,IAAI,CAC7BzI,GAAc+H,GAAa/H,EAAY,EAAmB,EAC1D,GAAGwI,EAAoB,IAAK1K,GAAM,CAAE,IAAI1H,EAAI,OAAQA,EAAK0H,EAAE,YAAc,MAAQ1H,IAAO,OAAS,OAASA,EAAG,KAAK0H,CAAC,EAAI,CACnI,CAAS,GACyB,CAAC,CAC9B,OACMtK,EAAP,CAEI,MAAIkV,GAAalV,CAAG,GAChB,OAAO,OAAOA,EAAK,CAAE,CAAC8U,EAAK,EAAG,EAAI,CAAE,EAElC9U,CACT,CACD,KAAM,CAAE,OAAA0M,EAAQ,cAAAD,EAAe,QAAAgB,EAAS,WAAAd,EAAY,YAAAY,CAAW,EAAKjB,GAAW0I,EAAqBC,CAAgB,EASpH,MAR4B,CACxB,OAAAvI,EACA,cAAAD,EACA,QAAAgB,EACA,WAAAd,EACA,YAAAY,EACA,iBAAkByH,CAC1B,CAEA,CACA,SAASG,GAA4BnV,EAAK,CACtC,OAAKA,EAGEA,EAAI8U,EAAK,IAAM,GAFX,EAGf,CAEA,SAASI,GAAalV,EAAK,CACvB,OAAMA,aAAe,MAIY,CAE7B,8CAEA,4CAEA,mCAEA,mCAEA,0BACR,EACoC,KAAMoV,GAAMpV,EAAI,QAAQ,YAAW,EAAG,SAASoV,EAAE,YAAW,CAAE,CAAC,EAfpF,EAgBf,CCxDA,SAASC,GAAe7I,EAAYQ,EAAYpE,EAAM,CAClD,MAAMwE,EAAgBZ,EAAW,eAAeQ,CAAU,EAC1D,GAAI,CAACI,GAAiBkI,GAAU9I,EAAYQ,CAAU,EAClD,OAAO,KAEX,KAAM,CAAE,YAAAC,EAAa,gBAAAK,CAAiB,EAAGF,EACzC,OAAA7L,EAAY,OAAO0L,IAAgBrE,EAAM,GAAG0E,2BAAyC,OAAOL,uBAAiCrE,WAAc,EACpIqE,CACX,CACA,SAASsI,GAAgB/I,EAAYQ,EAAY,CAC7C,MAAMI,EAAgBZ,EAAW,eAAeQ,CAAU,EAC1D,GAAI,CAACI,GAAiBkI,GAAU9I,EAAYQ,CAAU,EAClD,OAAO,KAEX,GAAII,EAAc,eAAiB,KAC/B,OAAOA,EAAc,aAEzB,KAAM,CAAE,YAAAH,EAAa,gBAAAK,CAAiB,EAAGF,EACzC7L,EAAY,OAAO0L,GAAgB,SAAU,GAAGK,2BAAyC,OAAOL,wCAAkD,EAClJ1L,EAAY,GAAO,GAAG+L,4BAA0CL,uCAAiD,CACrH,CACA,SAASqI,GAAU9I,EAAYQ,EAAY,CACvC,MAAMI,EAAgBZ,EAAW,eAAeQ,CAAU,EAC1D,GAAI,CAACI,EACD,MAAO,GACX,KAAM,CAAE,aAAAsH,EAAc,YAAAzH,CAAa,EAAGG,EACtC,OAAIsH,EACO,GACJzH,GAAgB,IAC3B,CACA,SAASuI,GAActH,EAAQI,EAAa,CACxC,MAAM9B,EAAa8B,EAAY,KAAMhE,GAAMA,EAAE,SAAW4D,CAAM,EAC9D,OAAAxL,EAAO4L,EAAY,OAAS,CAAC,EAC7B5L,EAAO8J,CAAU,EACVA,CACX,CCrCA,SAASiJ,IAAiC,CACtC,MAAMC,EAAK,8BACLC,EAAO,SAAS,eAAeD,CAAE,EACvCnU,EAAYoU,EAAM,gBAAgBD,0MAA2MA,mCAAoC,EACjR,MAAME,EAAkBD,EAAK,YAC7BjT,EAAOkT,CAAe,EACtB,MAAMC,EAActF,EAAMqF,CAAe,EACzClT,EAAO+F,EAAQoN,EAAa,cAAe,QAAQ,CAAC,EACpD,KAAM,CAAE,YAAAC,CAAa,EAAGD,EACxB,OAAAnT,EAAO+F,EAAQqN,EAAa,UAAW,QAAQ,CAAC,EAShDhN,EAAagN,EAAa,CACtB,gCAAiC,CAAE,GAAGA,CAAa,EACnD,yBAA0B,EAClC,CAAK,EACMA,CACX,CCvBA,SAASC,EAAQD,EAAazR,EAAU,CACpC,GAAI,EAAEA,KAAYyR,EAAY,SAC1B,OAAO,KAEX,MAAM1R,EAAS0R,EAAY,QAAQzR,CAAQ,EACrC2R,EAAOF,EAAY,WAAWzR,CAAQ,EAAE,CAAC,EAC/C3B,EAAOsT,EAAK,cAAgB5R,CAAM,EAClC,MAAME,EAAe0R,EAAK,aAC1B,OAAAtT,EAAO4B,CAAY,EACnB5B,EAAO,CAAC2B,EAAS,SAAS,GAAG,CAAC,EAC9B9C,EAAY+G,EAAWlE,CAAM,EAAG,QAAQC,kBAAyBC,wBAAmC,EAC7F,CAAE,OAAAF,EAAQ,aAAAE,EACrB,CACA,SAAS2R,GAAWH,EAAazR,EAAU,CACvC0R,EAAQD,EAAazR,CAAQ,CACjC,CCfA,SAAS6R,GAAgBJ,EAAa,CAClC,MAAMK,EAAU,OAAO,QAAQL,CAAW,EAC1C,UAAWnV,KAAOmV,EACd,OAAOA,EAAYnV,CAAG,EAE1BwV,EACK,KAAK,CAAC,CAACC,CAAI,EAAG,CAACC,CAAI,IAAMnM,GAAckM,EAAMC,CAAI,CAAC,EAClD,QAAQ,CAAC,CAAC1V,EAAKkG,CAAG,IAAM,CACzBiP,EAAYnV,CAAG,EAAIkG,CAC3B,CAAK,CACL,CCVA,SAASyP,GAAoBR,EAAa,CACtCS,GAAYT,CAAW,EACvBU,GAASV,CAAW,CACxB,CACA,SAASS,GAAYT,EAAa,CAC1BlH,GAAYkH,EAAY,QAASA,EAAY,YAAY,GACzDpT,EAAO+F,EAAQqN,EAAa,QAAS,SAAS,CAAC,CAEvD,CACA,SAASU,GAASV,EAAa,CAC3B,GAAIA,EAAY,QAAU,QAAaA,EAAY,QAAU,KACzD,OACJ,MAAMW,EAAYX,EAAY,WAAa,GAC3C,GAAI,CAACvN,EAASkO,CAAS,EAAG,CACtBjV,EAAc,GAAO,4CAA6C,CAAE,eAAgB,GAAM,SAAU,EAAI,CAAE,EAC1G,OAEJiV,EAAU,MAAQA,EAAU,OAASX,EAAY,MACjDA,EAAY,UAAYW,CAC5B,CCnBA,MAAMzV,EAAeN,EAAgB,wBAAyB,CAAA,CAAE,EAchE,SAASgW,GAAmBZ,EAAaa,EAAiB,CACtD,GAAIA,EAAiB,CACjB,MAAMC,EAAmBd,EACzBpT,EAAO,CAAC,GAAM,EAAK,EAAE,SAASkU,EAAiB,WAAW,CAAC,EAC3DlU,EAAO,CAAC,GAAM,GAAO,IAAI,EAAE,SAASkU,EAAiB,oBAAoB,CAAC,MAEzE,CACD,MAAMA,EAAmBd,EACzBpT,EAAOkU,EAAiB,cAAgB,EAAI,EAC5ClU,EAAOkU,EAAiB,uBAAyB,IAAI,EAEzDlU,EAAO,WAAYoT,CAAW,EAC9BpT,EAAO,kBAAmBoT,CAAW,EAErCpT,EAAO,YAAaoT,CAAW,EAC/BpT,EAAO,eAAgBoT,CAAW,EAClCpT,EAAO,gBAAiBoT,CAAW,EACnCpT,EAAO6F,EAASuN,EAAY,WAAW,CAAC,EACxC,MAAMe,EAAOf,EAAY,QAAQ,KACjChN,EAAagN,EAAa,CAAE,KAAAe,CAAI,CAAE,EAElCC,GAAehB,CAAW,EAE1BI,GAAgBJ,CAAW,EAC3BpT,EAAO,CAAC,GAAM,EAAK,EAAE,SAASoT,EAAY,wBAAwB,CAAC,EACnE,MAAMiB,EAA8BjB,EAAY,yBAG1CkB,GAASlB,CAAW,EADlBA,EAER,OAAAQ,GAAoBR,CAAW,EACxBiB,CACX,CACA,MAAME,GAAuB,CACzB,OACA,QACJ,EACMC,GAA2B,CAC7B,SAEJ,EAEA,SAASF,GAASlB,EAAa,CAC3B,OAAO,IAAI,MAAMA,EAAa,CAAE,IAAAqB,CAAK,CAAA,EACrC,SAASC,EAAUzO,EAAM,CASrB,MARI,EAAAA,KAAQmN,GAERmB,GAAqB,SAAStO,CAAI,GAElC,OAAOA,GAAS,UAEhB,OAAOA,GAAS,UAEhBA,EAAK,WAAW,MAAM,EAG7B,CACD,SAASwO,EAAIE,EAAG1O,EAAM,CAClB,OAAI3H,EAAa,4BAA8B2H,GAC3C2O,GAAmBxB,EAAY,gCAAiCnN,EAAMyO,EAAUzO,CAAI,CAAC,EAIzF3H,EAAa,0BAA4B2H,EACzC,OAAO,WAAW,IAAM,CACpB3H,EAAa,0BAA4B,MAC5C,EAAE,CAAC,EACG8U,EAAYnN,CAAI,CAC1B,CACL,CACA,SAAS2O,GAAmBC,EAAgC5O,EAAMyO,EAAW,CAIzE,GAHI,CAACA,GAGDG,IAAmC,KAInC,OAEJ,MAAMC,EAAuB,OAAO,KAAKD,CAA8B,EAAE,OAAQ5O,GAAS,CAACuO,GAAyB,SAASvO,CAAI,CAAC,EAClIpH,EAAY,GAAO,CACf,eAAeoH,mCACf,KAAKA,2CAA8C6O,EAC9C,IAAK7O,GAAS,IAAIA,IAAO,EACzB,KAAK,IAAI,OACd,0BAA0BA,+BAC1B,8CACR,EAAM,KAAK,GAAG,CAAC,CACf,CAGA,SAASmO,GAAehB,EAAa,CACjC,OAAO,QAAQA,CAAW,EAAE,QAAQ,CAAC,CAACnV,EAAKkG,CAAG,IAAM,CAChD,OAAOiP,EAAYnV,CAAG,EACtBmV,EAAYnV,CAAG,EAAIkG,CAC3B,CAAK,CACL,CC5GA,eAAe4Q,GAA0B3B,EAAaa,EAAiB,CACnE,MAAMI,EAA6BL,GAAmBZ,EAAaa,CAAe,EAClF,IAAIe,EAAO,KACPrT,EAGAqT,EADmB3B,EAAQD,EAAa,QAAQ,EAEhDzR,EAAW,SAEf,CACI,MAAMsT,EAAa5B,EAAQD,EAAa,gBAAgB,EACpD6B,IACAD,EAAOC,EACPtT,EAAW,iBAElB,CACD,GAAI,CAACqT,EAAM,CACP,MAAM5R,EAAM8R,GAAO9B,CAAW,EAE9B,GAAIA,EAAY,aAAa,OAAS,EAClC+B,GAAkB/B,EAAY,QAASA,EAAY,aAAchQ,CAAG,MAGnE,CACD,MAAMgS,EAAyBhC,EAAY,iBAAiB,OAAQxL,GAAMA,EAAE,WAAa,cAAc,EACvG,IAAIhJ,EACAwW,EAAuB,SAAW,EAClCxW,EAAS,2CAA6CwE,EAGtDxE,EACI,+DACIwW,EAAuB,IAAKxN,GAAMA,EAAE,QAAQ,EAAE,KAAK,GAAG,EAElE/I,EAAY,GAAOD,CAAM,GAGjCoB,EAAOgV,CAAI,EACX,MAAMC,EAAaD,EAAK,OACxBhV,EAAO2B,CAAQ,EAEf,MAAM0T,EAAa,MAAM5T,GAAoB,IAAMwT,EAAWZ,CAA0B,EAAG1S,EAAUqT,EAAK,YAAY,EACtHnW,EAAYwW,IAAe,OAAW,OAAO1T,uBAA8BqT,EAAK,8CAA8C,CAClI,CACA,SAASE,GAAO9B,EAAa,CACzB,IAAIhQ,EAEJ,GAAI,CACAA,EAAMgQ,EAAY,WACrB,MACD,CAAS,CACT,OAAAhQ,EAAMA,GAAuC,OAAO,SAAS,KACtDA,CACX,CACA,SAAS+R,GAAkB3J,EAAQI,EAAaxI,EAAK,CACjD,IAAIlD,EAAIsK,EACR,MAAMV,EAAagJ,GAActH,EAAQI,CAAW,EACpD5L,EAAO,EAAG,GAAAE,EAAK4J,EAAW,eAAe,kBAAoB,MAAQ5J,IAAO,SAAkBA,EAAG,YAAY,EAC7GF,IAASwK,EAAKV,EAAW,eAAe,iBAAmB,MAAQU,IAAO,OAAS,OAASA,EAAG,eAAiB,EAAI,EAEpH,IAAI8K,EAAuB,GAC3B1J,EAAY,QAAS9B,GAAe,CAChC,MAAMY,EAAgBZ,EAAW,eAAe,eAC5CY,GAAiBA,EAAc,cAC/B4K,EAAuB,GAEnC,CAAK,EACDzW,EAAY,GAAO,mCAAoCyW,EAA4B,cAAclS,MAAnB,qEAA6F,CAC/K","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50]}