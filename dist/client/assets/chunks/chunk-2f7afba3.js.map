{"version":3,"file":"chunk-2f7afba3.js","sources":["../../../../components/button/MoreButton.tsx","../../../../pages/my-lists/bookmark/BookmarkListMain/BookmarkList/BookmarkList.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { API_URL } from '../../renderer/CONSTANT_URL';\r\nimport { useAppSelector } from '../../renderer/store/hooks';\r\n\r\nexport { MoreButton };\r\n\r\nfunction MoreButton({ restaurantId, restaurantTitle }: { restaurantId: string; restaurantTitle: string }) {\r\n    const [show, setShow] = useState(false);\r\n    const moreButtonRef = useRef<HTMLButtonElement>(null);\r\n\r\n    const clicked = useAppSelector((state) => state.myListSlice.clicked);\r\n\r\n    function handleMoreButton() {\r\n        setShow((prev) => !prev);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (show) {\r\n            window.addEventListener('click', clickOutside);\r\n        }\r\n\r\n        return () => {\r\n            window.addEventListener('click', clickOutside);\r\n        };\r\n    }, [show]);\r\n\r\n    function clickOutside(event: MouseEvent) {\r\n        const target = event.target as HTMLElement;\r\n\r\n        if (moreButtonRef.current && !moreButtonRef.current.contains(target)) {\r\n            setShow(false);\r\n        }\r\n    }\r\n\r\n    async function handleDelete() {\r\n        try {\r\n            const list = clicked === 'Î∂ÅÎßàÌÅ¨' ? 'bookmark' : 'like';\r\n\r\n            if (confirm('Ìï¥Îãπ ÏãùÎãπÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {\r\n                const res = await fetch(`${API_URL}/users/${list}/${restaurantId}`, {\r\n                    credentials: 'include',\r\n                    method: 'DELETE',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                });\r\n\r\n                const data = await res.json();\r\n\r\n                if (data.success) {\r\n                    alert(`${restaurantTitle} ÏÇ≠Ï†úÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.`);\r\n                    window.location.reload();\r\n                } else {\r\n                    alert('Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\r\n                }\r\n            } else {\r\n                setShow(false);\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <button\r\n                type=\"button\"\r\n                aria-label=\"ÎçîÎ≥¥Í∏∞ Î≤ÑÌäº\"\r\n                className=\"button-more\"\r\n                onClick={handleMoreButton}\r\n                ref={moreButtonRef}\r\n            />\r\n            {show && (\r\n                <div className=\"container-more-option\">\r\n                    <ul>\r\n                        <li className=\"list-option\" onClick={handleDelete}>\r\n                            <div>\r\n                                <p className=\"txt-delete\">ÏÇ≠Ï†ú</p>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Distance } from './Distance';\r\nimport { MoreButton } from '../../../../../components/button/MoreButton';\r\nimport { API_URL } from '../../../../../renderer/CONSTANT_URL';\r\nimport { useAppSelector } from '../../../../../renderer/store/hooks';\r\nimport type { Bookmark } from '../../../../../server/models/User';\r\nimport type { Restaurant } from '../../../../../server/models/Restaurant';\r\nimport { AssignedLike } from '../../../ListSection/Like/LikeList';\r\n\r\ntype AssignedBookmark = Bookmark & {\r\n    restaurantInfo: Restaurant;\r\n};\r\n\r\nexport function BookmarkList({ lists }: { lists: Bookmark[] }) {\r\n    const [restaurantData, setRestaurantData] = useState<AssignedBookmark[]>([]);\r\n\r\n    const [registerOrder, setRegisterOrder] = useState<AssignedBookmark[]>([]);\r\n    const [nameOrder, setNameOrder] = useState<AssignedBookmark[]>([]);\r\n\r\n    useEffect(() => {\r\n        const setData = async () => {\r\n            const arr: AssignedBookmark[] = [];\r\n\r\n            for (const list of lists) {\r\n                try {\r\n                    if (typeof list._id === 'string') {\r\n                        const data = await getRestaurant(list._id);\r\n                        arr.push(Object.assign(list, data));\r\n                    }\r\n                } catch (err) {\r\n                    console.error(`Î∂ÅÎßàÌÅ¨ Í∑∏Î£πÏóê Ï†ÄÏû•Îêú ÏãùÎãπ _idÏóê ÎåÄÌïú Ï†ïÎ≥¥Î•º Í∞ÄÏ†∏Ïò§Îäî Îç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.`);\r\n                }\r\n            }\r\n\r\n            setRestaurantData(arr);\r\n        };\r\n\r\n        setData();\r\n    }, [lists]);\r\n\r\n    const sort = useAppSelector((state) => state.myListSlice.groupNameOrder);\r\n\r\n    useEffect(() => {\r\n        if (restaurantData.length !== 0) {\r\n            setRegisterOrder(restaurantData);\r\n            setNameOrder(\r\n                [...restaurantData].sort((a, b) => a.restaurantInfo.title.localeCompare(b.restaurantInfo.title, 'en'))\r\n            );\r\n        }\r\n    }, [restaurantData]);\r\n\r\n    async function getRestaurant(_id: string) {\r\n        const res = await fetch(`${API_URL}/restaurants/${_id}`);\r\n        const data = await res.json();\r\n\r\n        return data;\r\n    }\r\n\r\n    return restaurantData && restaurantData.length > 0 ? (\r\n        <ul className=\"ul-groupname\">\r\n            {sort === 'Îì±Î°ùÏàú'\r\n                ? registerOrder.map((restaurant) => {\r\n                      return <ListItem key={Math.random()} list={restaurant} />;\r\n                  })\r\n                : nameOrder.map((restaurant) => {\r\n                      return <ListItem key={Math.random()} list={restaurant} />;\r\n                  })}\r\n        </ul>\r\n    ) : (\r\n        <div className=\"style-wrapper-no-review\">\r\n            <div className=\"txt-no-review\">üò≠</div>\r\n            <p>Î™©Î°ùÏù¥ ÏóÜÏñ¥Ïöî.</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function ListItem({ list }: { list: AssignedBookmark | AssignedLike }) {\r\n    const { _id, title, location, address } = list.restaurantInfo;\r\n    return (\r\n        <li className=\"list-restaurant-inbookmark\">\r\n            <a href={`/search/${_id}`}>\r\n                <div className=\"container-restaurant-title-detail\">\r\n                    <div className=\"style-container-title-date\">\r\n                        <p className=\"txt-title\">{title}</p>\r\n                        <span className=\"txt-date\">{list.registeredAt.slice(0, 13)}</span>\r\n                    </div>\r\n                    <div>\r\n                        <Distance location={location.coordinates || [0, 0]} />\r\n                        <span className=\"txt-address\">{address}</span>\r\n                    </div>\r\n                </div>\r\n            </a>\r\n            <MoreButton restaurantId={_id} restaurantTitle={title} />\r\n        </li>\r\n    );\r\n}\r\n"],"names":["MoreButton","restaurantId","restaurantTitle","show","setShow","useState","moreButtonRef","useRef","clicked","useAppSelector","state","handleMoreButton","prev","useEffect","clickOutside","event","target","handleDelete","list","API_URL","err","jsxs","Fragment","jsx","BookmarkList","lists","restaurantData","setRestaurantData","registerOrder","setRegisterOrder","nameOrder","setNameOrder","arr","data","getRestaurant","sort","a","b","_id","restaurant","ListItem","title","location","address","Distance"],"mappings":"sIAMA,SAASA,EAAW,CAAE,aAAAC,EAAc,gBAAAC,GAAsE,CACtG,KAAM,CAACC,EAAMC,CAAO,EAAIC,WAAS,EAAK,EAChCC,EAAgBC,SAA0B,IAAI,EAE9CC,EAAUC,EAAgBC,GAAUA,EAAM,YAAY,OAAO,EAEnE,SAASC,GAAmB,CAChBP,EAACQ,GAAS,CAACA,CAAI,CAC3B,CAEAC,EAAAA,UAAU,KACFV,GACO,OAAA,iBAAiB,QAASW,CAAY,EAG1C,IAAM,CACF,OAAA,iBAAiB,QAASA,CAAY,CAAA,GAElD,CAACX,CAAI,CAAC,EAET,SAASW,EAAaC,EAAmB,CACrC,MAAMC,EAASD,EAAM,OAEjBT,EAAc,SAAW,CAACA,EAAc,QAAQ,SAASU,CAAM,GAC/DZ,EAAQ,EAAK,CAErB,CAEA,eAAea,GAAe,CACtB,GAAA,CACM,MAAAC,EAAOV,IAAY,MAAQ,WAAa,OAE1C,QAAQ,kBAAkB,GASb,MARD,MAAM,MAAM,GAAGW,WAAiBD,KAAQjB,IAAgB,CAChE,YAAa,UACb,OAAQ,SACR,QAAS,CACL,eAAgB,kBACpB,CAAA,CACH,GAEsB,QAEd,SACL,MAAM,GAAGC,gBAA8B,EACvC,OAAO,SAAS,UAEhB,MAAM,YAAY,EAGtBE,EAAQ,EAAK,QAEZgB,GACL,QAAQ,MAAMA,CAAG,CACrB,CACJ,CAEA,OAEQC,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAC,EAAA,IAAC,SAAA,CACG,KAAK,SACL,aAAW,SACX,UAAU,cACV,QAASZ,EACT,IAAKL,CAAA,CACT,EACCH,SACI,MAAI,CAAA,UAAU,wBACX,SAACoB,EAAAA,IAAA,KAAA,CACG,SAACA,EAAA,IAAA,KAAA,CAAG,UAAU,cAAc,QAASN,EACjC,SAAAM,EAAA,IAAC,MACG,CAAA,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAU,aAAa,SAAE,IAAA,CAAA,CAChC,CAAA,CACJ,CAAA,CACJ,CAAA,EACJ,CAER,CAAA,CAAA,CAER,CCxEgB,SAAAC,EAAa,CAAE,MAAAC,GAAgC,CAC3D,KAAM,CAACC,EAAgBC,CAAiB,EAAItB,EAAA,SAA6B,CAAE,CAAA,EAErE,CAACuB,EAAeC,CAAgB,EAAIxB,EAAA,SAA6B,CAAE,CAAA,EACnE,CAACyB,EAAWC,CAAY,EAAI1B,EAAA,SAA6B,CAAE,CAAA,EAEjEQ,EAAAA,UAAU,IAAM,EACI,SAAY,CACxB,MAAMmB,EAA0B,CAAA,EAEhC,UAAWd,KAAQO,EACX,GAAA,CACI,GAAA,OAAOP,EAAK,KAAQ,SAAU,CAC9B,MAAMe,EAAO,MAAMC,EAAchB,EAAK,GAAG,EACzCc,EAAI,KAAK,OAAO,OAAOd,EAAMe,CAAI,CAAC,SAGtC,QAAQ,MAAM,2CAA2C,CAC7D,CAGJN,EAAkBK,CAAG,CAAA,IAGjB,EACT,CAACP,CAAK,CAAC,EAEV,MAAMU,EAAO1B,EAAgBC,GAAUA,EAAM,YAAY,cAAc,EAEvEG,EAAAA,UAAU,IAAM,CACRa,EAAe,SAAW,IAC1BG,EAAiBH,CAAc,EAC/BK,EACI,CAAC,GAAGL,CAAc,EAAE,KAAK,CAACU,EAAGC,IAAMD,EAAE,eAAe,MAAM,cAAcC,EAAE,eAAe,MAAO,IAAI,CAAC,CAAA,EAE7G,EACD,CAACX,CAAc,CAAC,EAEnB,eAAeQ,EAAcI,EAAa,CAI/B,OAFM,MADD,MAAM,MAAM,GAAGnB,iBAAuBmB,GAAK,GAChC,MAG3B,CAEA,OAAOZ,GAAkBA,EAAe,OAAS,EAC5CH,EAAAA,IAAA,KAAA,CAAG,UAAU,eACT,SAASY,IAAA,MACJP,EAAc,IAAKW,SACPC,EAA6B,CAAA,KAAMD,CAArB,EAAA,KAAK,QAA4B,CAC1D,EACDT,EAAU,IAAKS,SACHC,EAA6B,CAAA,KAAMD,CAArB,EAAA,KAAK,QAA4B,CAC1D,CACX,CAAA,EAEClB,OAAA,MAAA,CAAI,UAAU,0BACX,SAAA,CAACE,EAAA,IAAA,MAAA,CAAI,UAAU,gBAAgB,SAAE,KAAA,EACjCA,EAAAA,IAAC,KAAE,SAAQ,UAAA,CAAA,CACf,CAAA,CAAA,CAER,CAEgB,SAAAiB,EAAS,CAAE,KAAAtB,GAAmD,CAC1E,KAAM,CAAE,IAAAoB,EAAK,MAAAG,EAAO,SAAAC,EAAU,QAAAC,GAAYzB,EAAK,eAE3C,OAAAG,EAAA,KAAC,KAAG,CAAA,UAAU,6BACV,SAAA,CAAAE,EAAAA,IAAC,KAAE,KAAM,WAAWe,IAChB,SAACjB,EAAA,KAAA,MAAA,CAAI,UAAU,oCACX,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,6BACX,SAAA,CAACE,EAAA,IAAA,IAAA,CAAE,UAAU,YAAa,SAAMkB,EAAA,EAChClB,EAAAA,IAAC,QAAK,UAAU,WAAY,WAAK,aAAa,MAAM,EAAG,EAAE,CAAE,CAAA,CAAA,EAC/D,SACC,MACG,CAAA,SAAA,CAAAA,MAACqB,GAAS,SAAUF,EAAS,aAAe,CAAC,EAAG,CAAC,EAAG,EACnDnB,EAAA,IAAA,OAAA,CAAK,UAAU,cAAe,SAAQoB,EAAA,CAAA,EAC3C,CAAA,CAAA,CACJ,CACJ,CAAA,EACCpB,EAAA,IAAAvB,EAAA,CAAW,aAAcsC,EAAK,gBAAiBG,EAAO,CAC3D,CAAA,CAAA,CAER"}