import{r as n,j as t}from"./chunk-0ad0329c.js";import{D as w}from"./chunk-c4e4febb.js";import{b as j,A as p}from"./chunk-0fac4abb.js";function N({restaurantId:o,restaurantTitle:s}){const[a,i]=n.useState(!1),c=n.useRef(null),u=j(e=>e.myListSlice.clicked);function m(){i(e=>!e)}n.useEffect(()=>(a&&window.addEventListener("click",l),()=>{window.addEventListener("click",l)}),[a]);function l(e){const r=e.target;c.current&&!c.current.contains(r)&&i(!1)}async function f(){try{const e=u==="ë¶ë§ˆí¬"?"bookmark":"like";confirm("í•´ë‹¹ ì‹ë‹¹ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")?(await(await fetch(`${p}/users/${e}/${o}`,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"}})).json()).success?(alert(`${s} ì‚­ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`),window.location.reload()):alert("ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."):i(!1)}catch(e){console.error(e)}}return t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button","aria-label":"ë”ë³´ê¸° ë²„íŠ¼",className:"button-more",onClick:m,ref:c}),a&&t.jsx("div",{className:"container-more-option",children:t.jsx("ul",{children:t.jsx("li",{className:"list-option",onClick:f,children:t.jsx("div",{children:t.jsx("p",{className:"txt-delete",children:"ì‚­ì œ"})})})})})]})}function y({lists:o}){const[s,a]=n.useState([]),[i,c]=n.useState([]),[u,m]=n.useState([]);n.useEffect(()=>{(async()=>{const r=[];for(const d of o)try{const h=await f(d._id);r.push(Object.assign(d,h))}catch{console.error("ë¶ë§ˆí¬ ê·¸ë£¹ì— ì €ì¥ëœ ì‹ë‹¹ _idì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}a(r)})()},[]);const l=j(e=>e.myListSlice.groupNameOrder);n.useEffect(()=>{s.length!==0&&(c(s),m([...s].sort((e,r)=>e.restaurantInfo.title.localeCompare(r.restaurantInfo.title,"en"))))},[s]);async function f(e){return await(await fetch(`${p}/restaurants/${e}`)).json()}return s&&s.length>0?t.jsx("ul",{className:"ul-groupname",children:l==="ë“±ë¡ìˆœ"?i.map(e=>t.jsx(x,{list:e},Math.random())):u.map(e=>t.jsx(x,{list:e},Math.random()))}):t.jsxs("div",{className:"style-wrapper-no-review",children:[t.jsx("div",{className:"txt-no-review",children:"ğŸ˜­"}),t.jsx("p",{children:"ëª©ë¡ì´ ì—†ì–´ìš”."})]})}function x({list:o}){const{_id:s,title:a,location:i,address:c}=o.restaurantInfo;return t.jsxs("li",{className:"list-restaurant-inbookmark",children:[t.jsx("a",{href:`/search/${s}`,children:t.jsxs("div",{className:"container-restaurant-title-detail",children:[t.jsxs("div",{className:"style-container-title-date",children:[t.jsx("p",{className:"txt-title",children:a}),t.jsx("span",{className:"txt-date",children:o.registeredAt.slice(0,13)})]}),t.jsxs("div",{children:[t.jsx(w,{location:i.coordinates||[0,0]}),t.jsx("span",{className:"txt-address",children:c})]})]})}),t.jsx(N,{restaurantId:s,restaurantTitle:a})]})}export{y as B,x as L};
