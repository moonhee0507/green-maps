import{j as s,r as c}from"./chunk-0ad0329c.js";import{I as L,b as C,A as j}from"./chunk-f5cf074f.js";import{P,a as M,S as I,b,d as A}from"./chunk-91c16fc8.js";import{a as y}from"./chunk-3258e6a6.js";import{R as v}from"./chunk-8b340eec.js";import{P as R}from"./chunk-7ba4ee63.js";import"./chunk-da345742.js";import"./chunk-41308c4f.js";import"./chunk-dfbf6de9.js";import"./chunk-9ae07e36.js";import"./chunk-2b326172.js";import"./chunk-525dc8c4.js";import"./chunk-4a7b83e5.js";function T({host:t}){return s.jsx("div",{className:"container-notice profile",children:s.jsx("em",{children:s.jsxs("span",{children:[(()=>{switch(t){case"local":return"ìì²´ ê³„ì •";case"kakao":return"ë‹¤ìŒì¹´ì¹´ì˜¤ ê³„ì •";case"naver":return"ë„¤ì´ë²„ ê³„ì •";default:return"ìì²´ ê³„ì •"}})()," ","íšŒì› ì…ë‹ˆë‹¤."]})})})}const S="/images/default-profile.webp";function $({userInfo:t}){return s.jsxs("li",{className:"style-wrapper-profile",children:[s.jsx(O,{userInfo:t}),s.jsx(_,{userInfo:t})]})}function O({userInfo:t}){const{profileImage:l}=t,[r,n]=c.useState(S);return c.useEffect(()=>{t.profileImage?l.includes("http://")?n(l):l&&n(`${L}/${l}`):n(S)},[t]),s.jsxs("dl",{children:[s.jsx("dt",{className:"sr-only",children:"í”„ë¡œí•„ ì‚¬ì§„"}),s.jsx("dd",{children:s.jsx("div",{className:"container-profile-img",children:s.jsx("img",{src:r,alt:"í”„ë¡œí•„ ì‚¬ì§„"})})})]})}function _({userInfo:t}){const{nickName:l,bookmarkList:r,likeList:n,userId:e}=t;return s.jsxs("dl",{className:"wrapper-id-bookmark",children:[s.jsxs("dl",{className:"container-id-nick",children:[s.jsx("dt",{className:"sr-only",children:"ì•„ì´ë””"}),s.jsx("dd",{className:"txt-profile-userId",children:e}),s.jsx("dt",{className:"sr-only",children:"ë‹‰ë„¤ì„"}),s.jsx("dd",{className:"txt-profile-nickName",children:l})]}),s.jsxs("dl",{className:"container-profile-bookmark-like",children:[s.jsx("dt",{children:"ë¶ë§ˆí¬"}),s.jsx("dd",{className:"num-profile-bookmark",children:r.length}),s.jsx("dt",{children:"ì¢‹ì•„ìš”"}),s.jsx("dd",{className:"num-profile-like",children:n.length})]})]})}function D({userInfo:t}){const{nickName:l,userId:r,host:n}=t,e=C(),a=()=>{y(!0),e(P(!0))},m=()=>{y(!0),e(M(!0)),e(I(l))},o=()=>{y(!0),e(b(!0)),e(A(r))};return s.jsxs("li",{className:"list-account",children:[s.jsx("p",{children:"ê³„ì •"}),s.jsxs("ul",{children:[s.jsx("li",{onClick:a,className:"list-edit",children:"í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½"}),s.jsx("li",{onClick:m,className:"list-edit",children:"ë‹‰ë„¤ì„ ë³€ê²½"}),n==="local"?s.jsx("li",{onClick:o,className:"list-edit",children:"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½"}):null]})]})}function F(){return s.jsxs("li",{className:"list-account",children:[s.jsx("p",{children:"ì•ˆë‚´"}),s.jsxs("ul",{children:[s.jsx("li",{className:"list-edit",children:s.jsx("a",{href:"",children:"ê³µì§€ì‚¬í•­"})}),s.jsx("li",{className:"list-edit",children:s.jsx("a",{href:"",children:"1:1 ë¬¸ì˜"})}),s.jsx("li",{className:"list-edit",children:s.jsx("a",{href:"",children:"ìì£¼ ì°¾ëŠ” ì§ˆë¬¸"})})]})]})}function g({userInfo:t}){async function l(){t.host==="kakao"&&await fetch(`${j}/oauth/kakao/logout`,{credentials:"include",method:"POST"}),(await fetch(`${j}/users/logout`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}})).ok===!0&&(window.localStorage.removeItem("#1"),window.localStorage.removeItem("#2"),window.location.href="/")}return s.jsxs("section",{children:[s.jsx("h3",{className:"sr-only",children:"í”„ë¡œí•„"}),s.jsx(T,{host:t.host}),s.jsxs("ul",{className:"ul-profile",children:[s.jsx($,{userInfo:t}),s.jsx(D,{userInfo:t}),s.jsx(F,{})]}),s.jsx("div",{className:"style-wrapper-logout",children:s.jsx("button",{type:"button",onClick:l,className:"styled-button",children:"ë¡œê·¸ì•„ì›ƒ"})})]})}function q({userInfo:t,reviews:l}){const[r,n]=c.useState("");return c.useEffect(()=>{l&&l.length>0&&l.forEach(e=>{typeof e.restaurant=="string"?n(e.restaurant):n(e.restaurant._id)})},[l]),s.jsxs("section",{className:"section-review",children:[s.jsx("h3",{className:"sr-only",children:"ì‹ë‹¹ ë¦¬ë·°"}),s.jsx("div",{className:"wrapper-review",children:l&&l.length>0?l.map((e,a)=>s.jsx(v,{item:e,userInfo:t,restaurantId:r,isFirst:a===0},Math.random())):s.jsxs("div",{className:"style-wrapper-no-review",children:[s.jsx("div",{className:"txt-no-review",children:"ğŸ˜­"}),s.jsx("p",{children:"ë¦¬ë·°ê°€ ì•„ì§ ì—†ì–´ìš”."})]})})]})}const U=["ì‘ì„±í•œ ê¸€","ëŒ“ê¸€ ë‹¨ ê¸€"];function G({userInfo:t}){const[l,r]=c.useState(window.localStorage.getItem("#2")||"ì‘ì„±í•œ ê¸€"),[n,e]=c.useState(null),[a,m]=c.useState({ì‘ì„±í•œê¸€:0,ëŒ“ê¸€ë‹¨ê¸€:0}),{nickName:o}=t,f=c.useRef([]);c.useEffect(()=>{const i=window.localStorage.getItem("#2"),u=[...document.querySelectorAll(".list-summary-community")];if(f.current=u,i){const d=U.indexOf(i);d!==-1&&(u[d].classList.add("on"),r(i))}else u[0].classList.add("on"),r("ì‘ì„±í•œ ê¸€");p(o).then(d=>{m(x=>({...x,ì‘ì„±í•œê¸€:d.posts.length}))}),N(o).then(d=>{m(x=>({...x,ëŒ“ê¸€ë‹¨ê¸€:d.posts.length}))})},[]),c.useEffect(()=>{l==="ì‘ì„±í•œ ê¸€"?p(o).then(i=>{i.success===!0&&i.posts?e(i.posts):e(null)}):l==="ëŒ“ê¸€ ë‹¨ ê¸€"&&N(o).then(i=>{i.success===!0&&i.posts?e(i.posts):e(null)})},[l]);function E(){f.current.forEach(i=>{i&&i.classList.remove("on")})}const p=c.useCallback(async i=>await(await fetch(`${j}/posts/my?boundary=post&owner=${i}`)).json(),[]),N=c.useCallback(async i=>await(await fetch(`${j}/posts/my?boundary=comment&owner=${i}`)).json(),[]);function k(i,u){var x,w;const d=i.currentTarget;E(),d.classList.add("on"),u==="ì‘ì„±í•œ ê¸€"?p(o).then(h=>{h.success===!0&&h.posts?e(h.posts):e(null)}):u==="ëŒ“ê¸€ ë‹¨ ê¸€"&&N(o).then(h=>{h.success===!0&&h.posts?e(h.posts):e(null)}),(x=d.lastElementChild)!=null&&x.innerHTML&&window.localStorage.setItem("#2",(w=d.lastElementChild)==null?void 0:w.innerHTML)}return s.jsxs("section",{children:[s.jsx("h3",{className:"sr-only",children:"ë‚´ê°€ ì“´ ê²Œì‹œê¸€ ë° ëŒ“ê¸€"}),s.jsxs("ul",{className:"ul-summary-community",children:[s.jsxs("li",{className:`list-summary-community ${l==="ì‘ì„±í•œ ê¸€"?"on":""}`,onClick:i=>k(i,"ì‘ì„±í•œ ê¸€"),children:[s.jsx("p",{children:a.ì‘ì„±í•œê¸€}),s.jsx("p",{children:"ì‘ì„±í•œ ê¸€"})]}),s.jsxs("li",{className:`list-summary-community ${l==="ëŒ“ê¸€ ë‹¨ ê¸€"?"on":""}`,onClick:i=>k(i,"ëŒ“ê¸€ ë‹¨ ê¸€"),children:[s.jsx("p",{children:a.ëŒ“ê¸€ë‹¨ê¸€}),s.jsx("p",{children:"ëŒ“ê¸€ ë‹¨ ê¸€"})]})]}),n&&n.length>0?s.jsx(R,{posts:n,limit:20}):s.jsxs("div",{className:"style-wrapper-no-review",children:[s.jsx("div",{className:"txt-no-review",children:"ğŸ˜­"}),s.jsx("p",{children:"ëª©ë¡ì´ ì—†ì–´ìš”."})]})]})}function ts({userInfo:t,reviews:l}){const[r,n]=c.useState("í”„ë¡œí•„");c.useEffect(()=>{const a=window.localStorage.getItem("#1"),m=["í”„ë¡œí•„","ì‹ë‹¹ ë¦¬ë·°","ì»¤ë®¤ë‹ˆí‹° í™œë™"],o=Array.from(document.querySelectorAll(".list-title"));a?(o[m.indexOf(a)].classList.add("on"),n(a)):o[0].classList.add("on")},[]);function e(a){const m=a.currentTarget;Array.from(document.querySelectorAll(".list-title")).forEach(f=>f.classList.remove("on")),m.classList.add("on"),n(m.innerText),window.localStorage.setItem("#1",m.innerText)}return s.jsxs("main",{className:"main-my",children:[s.jsxs("ul",{className:"ul-title-bar",children:[s.jsx("li",{className:"list-title",onClick:e,children:"í”„ë¡œí•„"}),s.jsx("li",{className:"list-title",onClick:e,children:"ì‹ë‹¹ ë¦¬ë·°"}),s.jsx("li",{className:"list-title",onClick:e,children:"ì»¤ë®¤ë‹ˆí‹° í™œë™"})]}),(()=>{switch(r){case"í”„ë¡œí•„":return s.jsx(g,{userInfo:t});case"ì‹ë‹¹ ë¦¬ë·°":return s.jsx(q,{userInfo:t,reviews:l});case"ì»¤ë®¤ë‹ˆí‹° í™œë™":return s.jsx(G,{userInfo:t});default:return s.jsx(g,{userInfo:t})}})()]})}export{ts as default};
//# sourceMappingURL=chunk-0661cb79.js.map
