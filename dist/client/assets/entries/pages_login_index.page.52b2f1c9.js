import{r as i,j as e}from"../chunks/chunk-93156e5d.js";import{T as j}from"../chunks/chunk-7fa71246.js";import{u as w,A as m,b as k}from"../chunks/chunk-c1371adf.js";import{L as x,S as b}from"../chunks/chunk-5ceb8754.js";import{L as y}from"../chunks/chunk-44507791.js";import{u as P}from"../chunks/chunk-3a1767e4.js";import"../chunks/chunk-1ef25d43.js";import"../chunks/chunk-99ce4f1c.js";const C="/images/icon-kakao.webp";function S({setMove:o}){const[s,c]=i.useState(null),l=w(),d=()=>{o(-100),l(x(!0))},h=()=>{const p=window.screenX+(window.outerWidth-500)/2,t=window.screenY+(window.outerHeight-700)/2,g=window.open(`${m}/oauth/kakao`,"kakao_popup",`width=500,height=700,left=${p},top=${t}`);c(g)};i.useEffect(()=>{if(!s)return;const a=setInterval(()=>{if(!s){a&&clearInterval(a);return}const r=s.location.href;if(!r)return;const t=new URL(r).searchParams.get("code");t&&(s.close(),u(t).then(g=>{g.success?n().then(f=>{f.success?window.location.href="/my":console.error("ì¹´ì¹´ì˜¤ ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨")}):console.error("ì¹´ì¹´ì˜¤ API í† í° ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}))},500)},[s]);async function u(a){return await(await fetch(`${m}/oauth/kakao/token?code=${a}`,{credentials:"include",method:"GET"})).json()}async function n(){return await(await fetch(`${m}/oauth/kakao/users`,{credentials:"include",method:"GET"})).json()}return e.jsxs("section",{className:"login-select-stage",children:[e.jsx("h3",{className:"sr-only",children:"ë¡œê·¸ì¸ ë°©ì‹ ì„ íƒ"}),e.jsx("div",{className:"container-rocket",children:e.jsx("span",{children:"ğŸš€"})}),e.jsx("button",{type:"button",onClick:d,className:"styled-button reuse-in-login",children:"ë¡œê·¸ì¸"}),e.jsxs("button",{type:"button",className:"styled-button kakao-login",onClick:h,children:[e.jsx("img",{src:C,alt:"ì¹´ì¹´ì˜¤ ì•„ì´ì½˜",role:"presentation"}),e.jsx("span",{children:"ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸"})]}),e.jsx(y,{href:"/signup",className:"link-to-signup",children:"íšŒì›ê°€ì…"})]})}function N({setMove:o}){const s=w(),[c,l]=i.useState(""),d=()=>{o(n=>n+100),s(x(!1))},h=()=>{o(n=>n-100),s(b(c))},u=n=>{l(n.target.value)};return e.jsxs("section",{className:"login-id-stage",children:[e.jsx("h3",{className:"sr-only",children:"ì•„ì´ë”” ì…ë ¥"}),e.jsx("label",{htmlFor:"loginId",children:"ì•„ì´ë””"}),e.jsx("input",{type:"text",id:"loginId",onChange:u}),e.jsxs("div",{className:"button-group-move",children:[e.jsx("button",{type:"button",onClick:d,"aria-label":"ì´ì „ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ì²« í™”ë©´"}),e.jsx("button",{type:"button",onClick:h,"aria-label":"ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ë¹„ë°€ë²ˆí˜¸"})]})]})}function I({setMove:o}){const s=w(),c=k(t=>t.loginSlice.currentId),[l,d]=i.useState(""),[h,u]=i.useState(!1),n=()=>{o(t=>t+100)},a=t=>{d(t.target.value)},r=t=>{u(t.target.checked)};async function p(){s(x(!1));try{const t=new URLSearchParams;t.append("userId",c),t.append("password",l),t.append("keepLogin",h?"true":"false"),(await(await fetch(`${m}/users/login`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()})).json()).success?(window.alert("ğŸ‰ğŸ‰ë¡œê·¸ì¸ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤ğŸ‰ğŸ‰"),window.location.href="/search"):window.alert("ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}catch(t){console.error(t)}}return e.jsxs("section",{className:"login-password-stage",children:[e.jsx("h3",{className:"sr-only",children:"ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"}),e.jsx("label",{htmlFor:"loginPassword",children:"ë¹„ë°€ë²ˆí˜¸"}),e.jsx("input",{type:"password",id:"loginPassword",onChange:a}),e.jsx("label",{htmlFor:"loginPersist",children:"ë¡œê·¸ì¸ ìœ ì§€"}),e.jsx("input",{type:"checkbox",id:"loginPersist",onChange:r}),e.jsxs("div",{className:"button-group-move",children:[e.jsx("button",{type:"button",onClick:n,"aria-label":"ì´ì „ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ì•„ì´ë””"}),e.jsx("button",{type:"button",onClick:p,"aria-label":"ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ë¡œê·¸ì¸"})]})]})}function v(){const[o,s]=i.useState(0);return e.jsx("main",{className:"main-login",children:e.jsxs("div",{className:"login-stage-wrapper",style:{left:`${o}%`,transition:".5s"},children:[e.jsx(S,{setMove:s}),e.jsx(N,{setMove:s}),e.jsx(I,{setMove:s})]})})}const R={title:"ë¡œê·¸ì¸ | Green Maps",description:"ì±„ì‹ ì‹ë‹¹ ì§€ë„ ì„œë¹„ìŠ¤ ë¡œê·¸ì¸"};function _(){return P(),e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"ë¡œê·¸ì¸"}),e.jsx(v,{})]})}export{_ as Page,R as documentProps};
//# sourceMappingURL=pages_login_index.page.52b2f1c9.js.map
