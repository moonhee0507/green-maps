import{_ as p}from"../chunks/chunk-101896b7.js";import{r as o,j as e,R as f}from"../chunks/chunk-0ad0329c.js";import{T as w}from"../chunks/chunk-fa93ea2c.js";import{N as j}from"../chunks/chunk-c6e08d5d.js";import{u as i,A as m,b as x}from"../chunks/chunk-f5cf074f.js";import{E}from"../chunks/chunk-2b326172.js";import{u as v}from"../chunks/chunk-72fd2dbb.js";import{L as I}from"../chunks/chunk-857879ef.js";import"../chunks/chunk-da345742.js";import"../chunks/chunk-41308c4f.js";import"../chunks/chunk-1de3b966.js";function S(){const[a,s]=o.useState(!1),r=i(n=>n.reviewSlice.editDeleteNotifyModalOn),t=i(n=>n.reviewSlice.sameUserOwner);return o.useEffect(()=>{s(r===!0)},[r]),e.jsxs("article",{className:`modal-edit-delete-notify ${a?"on":""}`,children:[e.jsx("h4",{className:"sr-only",children:"수정, 삭제, 신고용 모달"}),e.jsx("ul",{children:t?e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx(L,{})]}):e.jsx("li",{children:" 🚨 신고하기"})})]})}function y(){const a=i(t=>t.reviewSlice.reviewId),s=i(t=>t.reviewSlice.restaurantId);function r(){window.location.href=`/search/${s}/reviews/${a}/edit`}return e.jsx("li",{onClick:r,children:"🩹 수정하기"})}function L(){const a=i(t=>t.reviewSlice.reviewId),s=i(t=>t.reviewSlice.restaurantId);async function r(){try{(await(await fetch(`${m}/reviews/${a}`,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({restaurantId:s})})).json()).success?window.location.href=`/search/${s}`:alert("다시 시도해주세요.")}catch(t){console.error(t)}}return e.jsx("li",{onClick:r,children:"🗑️ 삭제하기"})}function D(){const a=i(c=>c.reviewSlice.editDeleteNotifyModalOn),[s,r]=o.useState(!1),t=x();o.useEffect(()=>{r(a===!0)},[a]),o.useEffect(()=>(s&&document.addEventListener("click",n),()=>{document.removeEventListener("click",n)}),[s]);function n(c){if(c.target.className==="app modal-mode"){const l=document.querySelector(".app");l==null||l.classList.remove("modal-mode"),t(E(!1))}}return e.jsx("div",{className:`modal-group ${s?"on":""}`,children:e.jsx(S,{})})}const g=f.lazy(()=>p(()=>import("../chunks/chunk-da0fb483.js"),["assets/chunks/chunk-da0fb483.js","assets/chunks/chunk-0ad0329c.js","assets/chunks/chunk-da345742.js","assets/chunks/chunk-f5cf074f.js","assets/chunks/chunk-9ae07e36.js","assets/chunks/chunk-0a2493d9.js","assets/chunks/chunk-8b340eec.js","assets/chunks/chunk-dfbf6de9.js","assets/chunks/chunk-2b326172.js","assets/chunks/chunk-41308c4f.js","assets/chunks/chunk-8275f212.js"]));function F(a){var d;const{routeParams:s}=a,[r,t]=v(),n=((d=a.routeParams)==null?void 0:d.restaurantId)||"",[c,l]=o.useState(null);o.useEffect(()=>{h()},[s]);async function h(){const u=await(await fetch(`${m}/restaurants/${n}`,{headers:{"Cache-Control":"s-maxage=2678400, max-age=0"}})).json();u.success&&l(u.restaurantInfo)}return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"상세정보"}),e.jsx(f.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(g,{restaurantInfo:c,isLoggedIn:r,userInfo:t})}),e.jsx(j,{isLoggedIn:r}),e.jsx(D,{})]})}export{F as Page};
//# sourceMappingURL=pages_search_restaurant_index.page.f59b3fbf.js.map
