{"version":3,"file":"pages_community_post_index.page.8148be23.js","sources":["../../../../pages/community/post/ContentSection/TextArea/TextArea.tsx","../../../../pages/community/post/ContentSection/PostLikeButton.tsx","../../../../pages/community/post/ContentSection/MoreButton.tsx","../../../../pages/community/post/ContentSection/ContentSection.tsx","../../../../pages/community/post/CommentSection/WriteComment/SubmitButton.tsx","../../../../pages/community/post/CommentSection/WriteComment/WriteComment.tsx","../../../../pages/community/post/CommentSection/Notice.tsx","../../../../pages/community/post/CommentSection/CommentList/MoreButton.tsx","../../../../pages/community/post/CommentSection/CommentList/CommentList.tsx","../../../../pages/community/post/CommentSection/CommentSection.tsx","../../../../pages/community/post/ModalGroup/EditDeleteNotifyModal/EditDeleteNotifyModal.tsx","../../../../pages/community/post/ModalGroup/ModalGroup.tsx","../../../../pages/community/post/index.page.tsx"],"sourcesContent":["import React from 'react';\r\nimport DOMPurify from 'isomorphic-dompurify';\r\n\r\nexport { TextArea };\r\n\r\nfunction TextArea(props: { content: string }) {\r\n    const htmlString = props.content;\r\n\r\n    return typeof window !== 'undefined' ? (\r\n        <div\r\n            dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(htmlString) }}\r\n            style={{ wordBreak: 'keep-all', marginTop: '40px' }}\r\n        />\r\n    ) : (\r\n        <div style={{ wordBreak: 'keep-all', marginTop: '40px' }} />\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { API_URL } from '../../../../renderer/CONSTANT_URL';\r\nimport imgHeart from '/images/icon-heart.svg';\r\n\r\nexport { PostLikeButton };\r\n\r\nfunction PostLikeButton(props: { postId: string; like: Array<{ user: string }> | undefined }) {\r\n    const { postId, like } = props;\r\n    const [userId, setUserId] = useState<string | null>(null);\r\n    const [likeCount, setLikeCount] = useState<number>(like ? like.length : 0);\r\n    const [buttonOn, setButtonOn] = useState<boolean>(false);\r\n\r\n    useEffect(() => {\r\n        getUserId();\r\n        async function getUserId() {\r\n            try {\r\n                const res = await fetch(`${API_URL}/users`);\r\n                const data = await res.json();\r\n\r\n                if (data.success) {\r\n                    setUserId(data.user.userId);\r\n                } else {\r\n                    setUserId(null);\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (like) {\r\n            setButtonOn(like.some((userInfo) => userInfo.user === userId));\r\n        }\r\n    }, [userId]);\r\n\r\n    function handleClick() {\r\n        buttonOn ? delLike() : addLike();\r\n        setButtonOn(buttonOn ? false : true);\r\n    }\r\n\r\n    async function addLike() {\r\n        const res = await fetch(`${API_URL}/posts/${postId}/like`, {\r\n            credentials: 'include',\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ user: userId }),\r\n        });\r\n\r\n        if (res.ok) setLikeCount(likeCount + 1);\r\n        else throw new Error();\r\n    }\r\n\r\n    async function delLike() {\r\n        const res = await fetch(`${API_URL}/posts/${postId}/like`, {\r\n            credentials: 'include',\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ user: userId }),\r\n        });\r\n\r\n        if (res.ok) setLikeCount(likeCount - 1);\r\n        else throw new Error();\r\n    }\r\n\r\n    return (\r\n        <button className=\"button-like\" type=\"button\" onClick={handleClick} style={{ margin: '60px auto 0px' }}>\r\n            <img src={imgHeart} alt=\"Ï¢ãÏïÑÏöî Ïù¥ÎØ∏ÏßÄ\" className={`img-like review ${buttonOn ? 'on' : ''}`} />\r\n            <span style={{ minWidth: '20px' }}>{likeCount}</span>\r\n        </button>\r\n    );\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useAppDispatch } from '../../../../renderer/store/hooks';\r\nimport {\r\n    EDIT_DELETE_NOTIFY_MODAL,\r\n    SET_POST_ID,\r\n    SAME_USER_OWNER,\r\n    SET_ACCESS_TARGET,\r\n} from '../../../../renderer/_reducers/_slices/postSlice';\r\nimport appModalMode from '../../../../components/modal/appModalMode';\r\nimport type { UserInfo } from '../../../../server/models/User';\r\n\r\nexport { MoreButton };\r\n\r\nfunction MoreButton({ userInfo, owner, postId }: { userInfo: UserInfo | null; owner: string; postId: string }) {\r\n    const dispatch = useAppDispatch();\r\n\r\n    const moreButtonRef = useRef<HTMLButtonElement>(null);\r\n    const [user, setUser] = useState<UserInfo | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (userInfo !== null) setUser(userInfo);\r\n    }, [userInfo]);\r\n\r\n    function handleClick() {\r\n        appModalMode(true);\r\n\r\n        dispatch(EDIT_DELETE_NOTIFY_MODAL(true));\r\n        dispatch(SAME_USER_OWNER(user?.nickName === owner));\r\n        dispatch(SET_POST_ID(postId));\r\n        dispatch(SET_ACCESS_TARGET('post'));\r\n    }\r\n\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            aria-label=\"ÎçîÎ≥¥Í∏∞ Î≤ÑÌäº\"\r\n            className=\"button-more postitem\"\r\n            onClick={handleClick}\r\n            ref={moreButtonRef}\r\n        />\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { TextArea } from './TextArea/TextArea';\r\nimport type { Post, CommentInPost } from '../../../../server/models/Post';\r\nimport { PostLikeButton } from './PostLikeButton';\r\nimport { isSameDay } from '../../../../components/Date/isSameDay';\r\nimport { MoreButton } from './MoreButton';\r\nimport { UserInfo } from '../../../../server/models/User';\r\n\r\nexport { ContentSection };\r\n\r\nfunction ContentSection({ userInfo, postInfo }: { userInfo: UserInfo | null; postInfo: Post }) {\r\n    const { subject, content, like, owner, photo, registeredAt, comments, title, _id } = postInfo;\r\n\r\n    return (\r\n        <section className=\"section-post-content\">\r\n            <h3 aria-label=\"Í≤åÏãúÍ∏Ä Ï†úÎ™©\" className=\"txt-post-title\">\r\n                {title}\r\n            </h3>\r\n            <div>\r\n                <p aria-label=\"ÏûëÏÑ±Ïûê\" className=\"txt-post-owner\">\r\n                    {owner}\r\n                </p>\r\n                <div className=\"container-post-subinfo\">\r\n                    <LikeCount like={like} />\r\n                    <CommentCount comments={comments} />\r\n                    <Time registeredAt={registeredAt} />\r\n                </div>\r\n            </div>\r\n            <TextArea content={content} />\r\n            <PostLikeButton postId={_id} like={like} />\r\n            <MoreButton userInfo={userInfo} owner={owner} postId={_id} />\r\n        </section>\r\n    );\r\n}\r\n\r\nfunction LikeCount(props: { like?: Array<{ user: string }> }) {\r\n    return (\r\n        <>\r\n            <dt className=\"sr-only\">Ï¢ãÏïÑÏöî Í∞úÏàò</dt>\r\n            <dd className=\"container-count-like\">\r\n                <span>{props.like?.length || 0}</span>\r\n            </dd>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction CommentCount(props: { comments?: Array<CommentInPost> }) {\r\n    return (\r\n        <>\r\n            <dt className=\"sr-only\">ÎåìÍ∏Ä Í∞úÏàò</dt>\r\n            <dd className=\"container-count-comment\">\r\n                <span>{props.comments?.length || 0}</span>\r\n            </dd>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction Time(props: { registeredAt: string }) {\r\n    const { registeredAt } = props;\r\n\r\n    const date = isSameDay(registeredAt)\r\n        ? `${registeredAt.split('. ').at(-1)?.split(':')[0]}:${registeredAt.split('. ').at(-1)?.split(':')[1]}`\r\n        : registeredAt.slice(0, 13);\r\n\r\n    return (\r\n        <>\r\n            <dt className=\"sr-only\">ÏûëÏÑ± ÏãúÍ∞Ñ</dt>\r\n            <dd className=\"container-post-time\">\r\n                <time dateTime=\"\">{date}</time>\r\n            </dd>\r\n        </>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { API_URL } from '../../../../../renderer/CONSTANT_URL';\r\nimport type { UserInfo } from '../../../../../server/models/User';\r\n\r\nexport { SubmitButton };\r\n\r\nfunction SubmitButton({ postId, content }: { postId: string; content: string | null }) {\r\n    const handleClick = async () => {\r\n        const res = await fetch(`${API_URL}/users/`, {\r\n            credentials: 'include',\r\n            method: 'GET',\r\n        });\r\n        const data = (await res.json()) as {\r\n            success: boolean;\r\n            message?: string;\r\n            errorMessage?: string;\r\n            user?: UserInfo;\r\n        };\r\n\r\n        // return data;\r\n        if (data.success && data.user) {\r\n            submit(data.user._id);\r\n        } else {\r\n            if (confirm('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌïú ÏÑúÎπÑÏä§ÏûÖÎãàÎã§.\\nÎ°úÍ∑∏Ïù∏ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {\r\n                window.location.href = `/login`;\r\n            }\r\n        }\r\n    };\r\n\r\n    async function submit(user_id: string) {\r\n        try {\r\n            if (content !== null && content.length > 0) {\r\n                const body = {\r\n                    user_id: user_id,\r\n                    content: content,\r\n                };\r\n\r\n                const res = await fetch(`${API_URL}/posts/${postId}/comment`, {\r\n                    credentials: 'include',\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify(body),\r\n                });\r\n\r\n                const data = await res.json();\r\n\r\n                if (data.success === true) {\r\n                    window.location.reload();\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            onClick={handleClick}\r\n            disabled={content !== null && content.length > 0 ? false : true}\r\n            aria-label=\"ÎåìÍ∏Ä Îì±Î°ù Î≤ÑÌäº\"\r\n        />\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { SubmitButton } from './SubmitButton';\r\n\r\nexport { WriteComment };\r\n\r\nfunction WriteComment({ postId }: { postId: string }) {\r\n    const [content, setContent] = useState<string | null>(null);\r\n\r\n    function handleChange(event: React.ChangeEvent<HTMLTextAreaElement>) {\r\n        setContent(event.target.value);\r\n    }\r\n\r\n    return (\r\n        <form className=\"form-create-comment\">\r\n            <label htmlFor=\"comment\" className=\"sr-only\">\r\n                ÎåìÍ∏Ä ÏûëÏÑ±ÌïòÍ∏∞\r\n            </label>\r\n            <textarea id=\"comment\" onChange={handleChange} minLength={1} maxLength={100} />\r\n            <SubmitButton postId={postId} content={content} />\r\n        </form>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\nexport { Notice };\r\n\r\nfunction Notice() {\r\n    return (\r\n        <div className=\"container-notice comment\">\r\n            <em>Í≤åÏãúÍ∏ÄÍ≥º Í¥ÄÎ†®ÏóÜÎäî ÌôçÎ≥¥ÏÑ± ÎåìÍ∏ÄÍ≥º Ï†ÄÏÜçÌïú ÌëúÌòÑÏùò ÎπÑÎ∞©ÏÑ± ÎåìÍ∏ÄÏùÄ ÏÇ≠Ï†úÎê† Ïàò ÏûàÏäµÎãàÎã§.</em>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useAppDispatch } from '../../../../../renderer/store/hooks';\r\nimport {\r\n    EDIT_DELETE_NOTIFY_MODAL,\r\n    SAME_USER_OWNER,\r\n    SET_ACCESS_TARGET,\r\n    SET_COMMENT_ID,\r\n    SET_POST_ID,\r\n} from '../../../../../renderer/_reducers/_slices/postSlice';\r\nimport type { UserInfo } from '../../../../../server/models/User';\r\nimport type { CommentInPost } from '../../../../../server/models/Post';\r\n\r\nexport { MoreButton };\r\n\r\nfunction MoreButton({\r\n    userInfo,\r\n    postId,\r\n    comment,\r\n}: {\r\n    userInfo: UserInfo | null;\r\n    postId: string;\r\n    comment: CommentInPost;\r\n}) {\r\n    const dispatch = useAppDispatch();\r\n\r\n    const moreButtonRef = useRef<HTMLButtonElement>(null);\r\n    const [user, setUser] = useState<UserInfo | null>(null);\r\n    const [nickname, setNickname] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (userInfo !== null) setUser(userInfo);\r\n        if (typeof comment.owner.user_id === 'object') {\r\n            setNickname(comment.owner.user_id.nickName);\r\n        }\r\n    }, [userInfo, comment]);\r\n\r\n    const handleClick = () => {\r\n        const app = document.querySelector('.app');\r\n        app?.classList.add('modal-mode');\r\n\r\n        dispatch(EDIT_DELETE_NOTIFY_MODAL(true));\r\n        dispatch(SAME_USER_OWNER(user?.nickName === nickname));\r\n        dispatch(SET_ACCESS_TARGET('comment'));\r\n        dispatch(SET_POST_ID(postId));\r\n        dispatch(SET_COMMENT_ID(comment._id));\r\n    };\r\n\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            aria-label=\"ÎçîÎ≥¥Í∏∞ Î≤ÑÌäº\"\r\n            className=\"button-more commentitem\"\r\n            onClick={handleClick}\r\n            ref={moreButtonRef}\r\n        />\r\n    );\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { isSameDay } from '../../../../../components/Date/isSameDay';\r\nimport { MoreButton } from './MoreButton';\r\nimport type { UserInfo } from '../../../../../server/models/User';\r\nimport type { CommentInPost } from '../../../../../server/models/Post';\r\nimport { useAppSelector } from '../../../../../renderer/store/hooks';\r\nimport { API_URL } from '../../../../../renderer/CONSTANT_URL';\r\n\r\nexport { CommentList };\r\n\r\nfunction CommentList({\r\n    userInfo,\r\n    postId,\r\n    comments,\r\n}: {\r\n    userInfo: UserInfo | null;\r\n    postId: string;\r\n    comments?: Array<CommentInPost>;\r\n}) {\r\n    return comments && comments.length > 0 ? (\r\n        <ul>\r\n            {comments.map((comment, i) => {\r\n                return (\r\n                    <CommentListItem\r\n                        key={comment._id}\r\n                        userInfo={userInfo}\r\n                        postId={postId}\r\n                        comment={comment}\r\n                        isLast={i === comments.length - 1}\r\n                    />\r\n                );\r\n            })}\r\n        </ul>\r\n    ) : (\r\n        <div className=\"style-wrapper-no-review\">\r\n            <div className=\"txt-no-review\">üò≠</div>\r\n            <p>ÎåìÍ∏ÄÏù¥ ÏóÜÏñ¥Ïöî.</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction CommentListItem({\r\n    userInfo,\r\n    postId,\r\n    comment,\r\n    isLast,\r\n}: {\r\n    userInfo: UserInfo | null;\r\n    postId: string;\r\n    comment: CommentInPost;\r\n    isLast: boolean;\r\n}) {\r\n    const targetCommentId = useAppSelector((state) => state.postSlice.commentId); // ÌÅ¥Î¶≠Ìïú ÏΩîÎ©òÌä∏Ïùò id\r\n\r\n    const { _id, owner, content, like, registeredAt, updatedAt } = comment;\r\n    const editMode = useAppSelector((state) => state.postSlice.editCommentMode);\r\n\r\n    const [nickname, setNickname] = useState<string>('');\r\n\r\n    useEffect(() => {\r\n        if (typeof owner !== 'undefined' && typeof owner.user_id === 'object') {\r\n            setNickname(owner.user_id.nickName);\r\n        }\r\n    }, [owner]);\r\n\r\n    const date = isSameDay(registeredAt)\r\n        ? `${registeredAt.split('. ').at(-1)?.split(':')[0]}:${registeredAt.split('. ').at(-1)?.split(':')[1]}`\r\n        : registeredAt.slice(0, 13);\r\n\r\n    const listElement = useRef<HTMLLIElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (isLast && listElement.current) {\r\n            listElement.current.scrollIntoView(false);\r\n        }\r\n    }, [isLast]);\r\n\r\n    return (\r\n        <li className=\"li-commentitem\" ref={listElement}>\r\n            <dl className=\"wrapper-commentitem\">\r\n                <dl className=\"container-owner-date\">\r\n                    <dt className=\"sr-only\">ÎåìÍ∏Ä ÏûëÏÑ±Ïûê</dt>\r\n                    <dd className=\"txt-owner\">{nickname}</dd>\r\n                    <dt className=\"sr-only\">Í≤åÏãú ÏãúÍ∞Ñ</dt>\r\n                    <dd className=\"txt-date\">{date}</dd>\r\n                </dl>\r\n                <dl>\r\n                    <dt className=\"sr-only\">ÎåìÍ∏Ä ÎÇ¥Ïö©</dt>\r\n                    {editMode && targetCommentId === _id ? (\r\n                        <TextareaForEdit content={content} />\r\n                    ) : (\r\n                        <dd className=\"txt-content\">{content}</dd>\r\n                    )}\r\n                </dl>\r\n            </dl>\r\n            {editMode && targetCommentId === _id ? (\r\n                <EditCommentButton postId={postId} commentId={comment._id} />\r\n            ) : (\r\n                <MoreButton userInfo={userInfo} postId={postId} comment={comment} />\r\n            )}\r\n        </li>\r\n    );\r\n}\r\n\r\nfunction TextareaForEdit({ content }: { content: string }) {\r\n    const [value, setValue] = useState<string>(content);\r\n\r\n    function handleChange(event: React.ChangeEvent<HTMLTextAreaElement>) {\r\n        setValue(event.target.value);\r\n    }\r\n\r\n    return <textarea id=\"editCommentTextarea\" onChange={handleChange} minLength={1} maxLength={100} value={value} />;\r\n}\r\n\r\nfunction EditCommentButton({ postId, commentId }: { postId: string; commentId: string }) {\r\n    function handleClick() {\r\n        const textarea = document.getElementById('editCommentTextarea') as HTMLTextAreaElement;\r\n\r\n        if (textarea !== null) {\r\n            editComment(textarea.value);\r\n        }\r\n    }\r\n\r\n    async function editComment(content: string) {\r\n        const res = await fetch(`${API_URL}/comments/${commentId}?postId=${postId}`, {\r\n            credentials: 'include',\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ content: content }),\r\n        });\r\n\r\n        const data = await res.json();\r\n\r\n        if (data.success) {\r\n            alert('ÎåìÍ∏ÄÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§.');\r\n        } else {\r\n            alert('Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\r\n        }\r\n\r\n        window.location.reload();\r\n    }\r\n    return (\r\n        <button type=\"button\" className=\"button-more commentitem edit\" onClick={handleClick}>\r\n            ÏàòÏ†ï\r\n        </button>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../../../renderer/store/hooks';\r\nimport { WriteComment } from './WriteComment/WriteComment';\r\nimport { Notice } from './Notice';\r\nimport { CommentList } from './CommentList/CommentList';\r\nimport { Pagination } from '../../../../components/Pagination/Pagination';\r\nimport { CommentPagination } from '../../../../renderer/_reducers/_slices/paginationSlice';\r\nimport type { CommentInPost } from '../../../../server/models/Post';\r\nimport type { UserInfo } from '../../../../server/models/User';\r\n\r\nexport { CommentSection };\r\n\r\nconst perPage = 10;\r\n\r\nfunction CommentSection({\r\n    postId,\r\n    comments,\r\n    userInfo,\r\n}: {\r\n    postId: string;\r\n    comments?: Array<CommentInPost>;\r\n    userInfo: UserInfo | null;\r\n}) {\r\n    const dispatch = useAppDispatch();\r\n\r\n    const paginatedComment = useAppSelector((state) => state.paginationSlice.comment) as CommentPagination;\r\n\r\n    const currentPage = useAppSelector((state) => state.paginationSlice.currentPage);\r\n    const [commentInPage, setCommentInPage] = useState(paginatedComment[currentPage - 1]);\r\n\r\n    useEffect(() => {\r\n        dispatch({ type: 'paginationSlice/CURRENT_PAGE', currentPage: Object.keys(paginatedComment).length });\r\n    }, [paginatedComment]);\r\n\r\n    useEffect(() => {\r\n        setCommentInPage(paginatedComment[currentPage - 1]);\r\n    }, [paginatedComment, currentPage]);\r\n\r\n    return (\r\n        <section className=\"section-post-comment\">\r\n            {comments && comments.length > 0 ? (\r\n                <h3>\r\n                    ÎåìÍ∏Ä <span>({comments.length})</span>\r\n                </h3>\r\n            ) : (\r\n                <h3 className=\"sr-only\">ÎåìÍ∏Ä</h3>\r\n            )}\r\n            <Notice />\r\n            <WriteComment postId={postId} />\r\n            <CommentList postId={postId} comments={commentInPage} userInfo={userInfo} />\r\n            {comments && comments.length > perPage ? <Pagination count={comments.length} perPage={perPage} /> : null}\r\n        </section>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../../../../renderer/store/hooks';\r\nimport { EDIT_DELETE_NOTIFY_MODAL, SET_EDIT_COMMENT_MODE } from '../../../../../renderer/_reducers/_slices/postSlice';\r\nimport { API_URL } from '../../../../../renderer/CONSTANT_URL';\r\nimport appModalMode from '../../../../../components/modal/appModalMode';\r\n\r\nexport { EditDeleteNotifyModal };\r\n\r\nfunction EditDeleteNotifyModal() {\r\n    const [show, setShow] = useState(false);\r\n    const editDeleteNotifyModalOn = useAppSelector((state) => state.postSlice.editDeleteNotifyModalOn);\r\n    const sameUserOwner = useAppSelector((state) => state.postSlice.sameUserOwner);\r\n\r\n    useEffect(() => {\r\n        if (editDeleteNotifyModalOn === true) setShow(true);\r\n        else setShow(false);\r\n    }, [editDeleteNotifyModalOn]);\r\n\r\n    return (\r\n        <article className={`modal-edit-delete-notify ${show ? 'on' : ''}`}>\r\n            <h4 className=\"sr-only\">ÏàòÏ†ï, ÏÇ≠Ï†ú, Ïã†Í≥†Ïö© Î™®Îã¨</h4>\r\n            <ul>\r\n                {sameUserOwner ? (\r\n                    <>\r\n                        <EDIT />\r\n                        <DELETE />\r\n                    </>\r\n                ) : (\r\n                    <li> üö® Ïã†Í≥†ÌïòÍ∏∞</li>\r\n                )}\r\n            </ul>\r\n        </article>\r\n    );\r\n}\r\n\r\nfunction EDIT() {\r\n    const dispatch = useAppDispatch();\r\n    const postId = useAppSelector((state) => state.postSlice.postId);\r\n    const accessTarget = useAppSelector((state) => state.postSlice.accessTarget);\r\n\r\n    function handleClick() {\r\n        if (accessTarget === 'post') {\r\n            window.location.href = `/community/edit/${postId}`;\r\n\r\n            appModalMode(false);\r\n            dispatch(EDIT_DELETE_NOTIFY_MODAL(false));\r\n        } else if (accessTarget === 'comment') {\r\n            dispatch(SET_EDIT_COMMENT_MODE(true));\r\n            appModalMode(false);\r\n            dispatch(EDIT_DELETE_NOTIFY_MODAL(false));\r\n        }\r\n    }\r\n\r\n    return <li onClick={handleClick}>ü©π ÏàòÏ†ïÌïòÍ∏∞</li>;\r\n}\r\n\r\nfunction DELETE() {\r\n    const dispatch = useAppDispatch();\r\n    const postId = useAppSelector((state) => state.postSlice.postId);\r\n    const commentId = useAppSelector((state) => state.postSlice.commentId);\r\n    const accessTarget = useAppSelector((state) => state.postSlice.accessTarget);\r\n\r\n    async function handleClick() {\r\n        if (accessTarget === 'post') {\r\n            deletePost();\r\n        } else if (accessTarget === 'comment') {\r\n            deleteComment();\r\n        }\r\n    }\r\n\r\n    async function deletePost() {\r\n        try {\r\n            const res = await fetch(`${API_URL}/posts/${postId}`, {\r\n                credentials: 'include',\r\n                method: 'DELETE',\r\n            });\r\n\r\n            const data = await res.json();\r\n\r\n            if (data.success) {\r\n                window.location.href = '/community';\r\n            } else {\r\n                alert('Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            appModalMode(false);\r\n            dispatch(EDIT_DELETE_NOTIFY_MODAL(false));\r\n        }\r\n    }\r\n\r\n    async function deleteComment() {\r\n        try {\r\n            const res = await fetch(`${API_URL}/comments/${commentId}?postId=${postId}`, {\r\n                credentials: 'include',\r\n                method: 'DELETE',\r\n            });\r\n\r\n            const data = await res.json();\r\n\r\n            if (data.success) {\r\n                window.location.reload();\r\n            } else {\r\n                alert('Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            appModalMode(false);\r\n            dispatch(EDIT_DELETE_NOTIFY_MODAL(false));\r\n        }\r\n    }\r\n    return <li onClick={handleClick}>üóëÔ∏è ÏÇ≠Ï†úÌïòÍ∏∞</li>;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../../../renderer/store/hooks';\r\nimport { EDIT_DELETE_NOTIFY_MODAL, SET_POST_ID } from '../../../../renderer/_reducers/_slices/postSlice';\r\nimport { EditDeleteNotifyModal } from './EditDeleteNotifyModal/EditDeleteNotifyModal';\r\n\r\nexport { ModalGroup };\r\n\r\nfunction ModalGroup() {\r\n    const on = useAppSelector((state) => state.postSlice.editDeleteNotifyModalOn);\r\n    const [show, setShow] = useState(false);\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    useEffect(() => {\r\n        if (on === true) setShow(true);\r\n        else setShow(false);\r\n    }, [on]);\r\n\r\n    useEffect(() => {\r\n        if (show) {\r\n            document.addEventListener('click', handleClose);\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener('click', handleClose);\r\n        };\r\n    }, [show]);\r\n\r\n    function handleClose(event: MouseEvent) {\r\n        if ((event.target as HTMLElement).className === 'app modal-mode') {\r\n            const app = document.querySelector('.app');\r\n            app?.classList.remove('modal-mode');\r\n\r\n            dispatch(EDIT_DELETE_NOTIFY_MODAL(false));\r\n            dispatch(SET_POST_ID(''));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`modal-group ${show ? 'on' : ''}`}>\r\n            <EditDeleteNotifyModal />\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useAppDispatch } from '../../../renderer/store/hooks';\r\nimport { CommentPagination, SET_COMMENT } from '../../../renderer/_reducers/_slices/paginationSlice';\r\nimport { TopBar } from '../../../components/topBar/topBar';\r\nimport { ContentSection } from './ContentSection/ContentSection';\r\nimport { CommentSection } from './CommentSection/CommentSection';\r\nimport { ModalGroup } from './ModalGroup/ModalGroup';\r\nimport { useCheckLoginStatus } from '../../../renderer/_hooks/useCheckLoginStatus';\r\nimport LoadingMain from '../../../components/Loading/LoadingMain';\r\nimport type { PageContext } from '../../../renderer/types';\r\nimport type { Post } from '../../../server/models/Post';\r\n\r\nexport const documentProps = {\r\n    title: 'Í≤åÏãúÍ∏Ä | Green Maps',\r\n    description: 'Ï±ÑÏãù ÏãùÎãπ ÏßÄÎèÑ ÏÑúÎπÑÏä§ Í≤åÏãúÍ∏Ä ÌéòÏù¥ÏßÄ',\r\n};\r\n\r\nexport { Page };\r\n\r\nfunction Page(pageContext: PageContext) {\r\n    const dispatch = useAppDispatch();\r\n    const [_, userInfo] = useCheckLoginStatus();\r\n\r\n    const [postInfo, setPostInfo] = useState<Post | null>(() => {\r\n        if (pageContext.post) return pageContext.post;\r\n        else return null;\r\n    });\r\n\r\n    // ÎåìÍ∏Ä ÌéòÏù¥ÏßÄ ÎÑ§Ïù¥ÏÖòÏùÑ ÏúÑÌï¥ Ïä§ÌÜ†Ïñ¥Ïóê Ï†ÄÏû•\r\n    useEffect(() => {\r\n        if (postInfo) {\r\n            if (postInfo.comments) {\r\n                const obj: CommentPagination = {};\r\n                // 10Í∞ú(0~9Î≤àÏßÄ)Îäî 0Î≤à ÌÇ§Ïóê Ï†ÄÏû•, (10~19Î≤àÏßÄ)Îäî 1Î≤à ÌÇ§Ïóê Ï†ÄÏû•\r\n                for (let i = 0; i < postInfo.comments.length; i = i + 10) {\r\n                    const arrPerPage = postInfo.comments.slice(i, i + 10);\r\n                    obj[i / 10] = arrPerPage;\r\n                }\r\n\r\n                dispatch(SET_COMMENT(obj));\r\n            }\r\n        }\r\n    }, [postInfo]);\r\n\r\n    return postInfo ? (\r\n        <React.Suspense fallback={<LoadingMain />}>\r\n            <TopBar title={postInfo.subject} />\r\n            <main className=\"main-read-post\">\r\n                <ContentSection userInfo={userInfo} postInfo={postInfo} />\r\n                {postInfo.subject !== 'Í≥µÏßÄÏÇ¨Ìï≠' && (\r\n                    <CommentSection userInfo={userInfo} postId={postInfo._id} comments={postInfo.comments} />\r\n                )}\r\n            </main>\r\n            <ModalGroup />\r\n        </React.Suspense>\r\n    ) : (\r\n        <LoadingMain />\r\n    );\r\n}\r\n"],"names":["TextArea","props","htmlString","jsx","DOMPurify","PostLikeButton","postId","like","userId","setUserId","useState","likeCount","setLikeCount","buttonOn","setButtonOn","useEffect","getUserId","data","API_URL","err","userInfo","handleClick","delLike","addLike","jsxs","imgHeart","MoreButton","owner","dispatch","useAppDispatch","moreButtonRef","useRef","user","setUser","appModalMode","EDIT_DELETE_NOTIFY_MODAL","SAME_USER_OWNER","SET_POST_ID","SET_ACCESS_TARGET","ContentSection","postInfo","subject","content","photo","registeredAt","comments","title","_id","LikeCount","CommentCount","Time","Fragment","_a","date","isSameDay","_b","SubmitButton","submit","user_id","body","WriteComment","setContent","handleChange","event","Notice","comment","nickname","setNickname","app","SET_COMMENT_ID","CommentList","i","CommentListItem","isLast","targetCommentId","useAppSelector","state","updatedAt","editMode","listElement","TextareaForEdit","EditCommentButton","value","setValue","commentId","textarea","editComment","perPage","CommentSection","paginatedComment","currentPage","commentInPage","setCommentInPage","Pagination","EditDeleteNotifyModal","show","setShow","editDeleteNotifyModalOn","sameUserOwner","EDIT","DELETE","accessTarget","SET_EDIT_COMMENT_MODE","deletePost","deleteComment","ModalGroup","on","handleClose","documentProps","Page","pageContext","_","useCheckLoginStatus","setPostInfo","obj","arrPerPage","SET_COMMENT","React","LoadingMain","TopBar"],"mappings":"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"}