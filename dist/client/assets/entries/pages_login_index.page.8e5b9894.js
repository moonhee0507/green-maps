import{r as u,j as e}from"../chunks/chunk-0ad0329c.js";import{T as j}from"../chunks/chunk-e8e2d20b.js";import{b as g,A as p,u as f}from"../chunks/chunk-f5cf074f.js";import{L as x,S as w}from"../chunks/chunk-63b910cd.js";import{L as k}from"../chunks/chunk-3c838518.js";import{u as b}from"../chunks/chunk-80567fa3.js";import"../chunks/chunk-da345742.js";import"../chunks/chunk-41308c4f.js";const y="/images/icon-kakao.webp";function S({setMove:o}){const t=g(),r=()=>{o(-100),t(x(!0))};async function c(){window.location.href=`${p}/oauth/kakao`}u.useEffect(()=>{const a=window.location.search,d=new URLSearchParams(a).get("code");try{a!==""&&(d?i(d).then(h=>{h.success?l().then(m=>{m.success?window.location.href="/my":console.error("ì¹´ì¹´ì˜¤ ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨")}):console.error("ì¹´ì¹´ì˜¤ API í† í° ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}):console.error("ì¹´ì¹´ì˜¤ AuthorizeCodeê°€ ì—†ìŠµë‹ˆë‹¤."))}catch(h){console.error(h)}},[]);async function i(a){return await(await fetch(`${p}/oauth/kakao/token?code=${a}`,{credentials:"include",method:"GET"})).json()}async function l(){return await(await fetch(`${p}/oauth/kakao/users`,{credentials:"include",method:"GET"})).json()}return e.jsxs("section",{className:"login-select-stage",children:[e.jsx("h3",{className:"sr-only",children:"ë¡œê·¸ì¸ ë°©ì‹ ì„ íƒ"}),e.jsx("div",{className:"container-rocket",children:e.jsx("span",{children:"ğŸš€"})}),e.jsx("button",{type:"button",onClick:r,className:"styled-button reuse-in-login",children:"ë¡œê·¸ì¸"}),e.jsxs("button",{type:"button",className:"styled-button kakao-login",onClick:c,children:[e.jsx("img",{src:y,alt:"ì¹´ì¹´ì˜¤ ì•„ì´ì½˜",role:"presentation"}),e.jsx("span",{children:"ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸"})]}),e.jsx(k,{href:"/signup",className:"link-to-signup",children:"íšŒì›ê°€ì…"})]})}function C({setMove:o}){const t=g(),[r,c]=u.useState(""),i=()=>{o(n=>n+100),t(x(!1))},l=()=>{o(n=>n-100),t(w(r))},a=n=>{c(n.target.value)};return e.jsxs("section",{className:"login-id-stage",children:[e.jsx("h3",{className:"sr-only",children:"ì•„ì´ë”” ì…ë ¥"}),e.jsx("label",{htmlFor:"loginId",children:"ì•„ì´ë””"}),e.jsx("input",{type:"text",id:"loginId",onChange:a}),e.jsxs("div",{className:"button-group-move",children:[e.jsx("button",{type:"button",onClick:i,"aria-label":"ì´ì „ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ì²« í™”ë©´"}),e.jsx("button",{type:"button",onClick:l,"aria-label":"ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ë¹„ë°€ë²ˆí˜¸"})]})]})}function N({setMove:o}){const t=g(),r=f(s=>s.loginSlice.currentId),[c,i]=u.useState(""),[l,a]=u.useState(!1),n=()=>{o(s=>s+100)},d=s=>{i(s.target.value)},h=s=>{a(s.target.checked)};async function m(){t(x(!1));try{const s=new URLSearchParams;s.append("userId",r),s.append("password",c),s.append("keepLogin",l?"true":"false"),(await(await fetch(`${p}/users/login`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()})).json()).success?(window.alert("ğŸ‰ğŸ‰ë¡œê·¸ì¸ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤ğŸ‰ğŸ‰"),window.location.href="/search"):window.alert("ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}catch(s){console.error(s)}}return e.jsxs("section",{className:"login-password-stage",children:[e.jsx("h3",{className:"sr-only",children:"ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"}),e.jsx("label",{htmlFor:"loginPassword",children:"ë¹„ë°€ë²ˆí˜¸"}),e.jsx("input",{type:"password",id:"loginPassword",onChange:d}),e.jsx("label",{htmlFor:"loginPersist",children:"ë¡œê·¸ì¸ ìœ ì§€"}),e.jsx("input",{type:"checkbox",id:"loginPersist",onChange:h}),e.jsxs("div",{className:"button-group-move",children:[e.jsx("button",{type:"button",onClick:n,"aria-label":"ì´ì „ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ì•„ì´ë””"}),e.jsx("button",{type:"button",onClick:m,"aria-label":"ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ë¡œê·¸ì¸"})]})]})}function P(){const[o,t]=u.useState(0);return e.jsx("main",{className:"main-login",children:e.jsxs("div",{className:"login-stage-wrapper",style:{left:`${o}%`,transition:".5s"},children:[e.jsx(S,{setMove:t}),e.jsx(C,{setMove:t}),e.jsx(N,{setMove:t})]})})}const U={title:"ë¡œê·¸ì¸ | Green Maps",description:"ì±„ì‹ ì‹ë‹¹ ì§€ë„ ì„œë¹„ìŠ¤ ë¡œê·¸ì¸"};function D(){return b(),e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"ë¡œê·¸ì¸"}),e.jsx(P,{})]})}export{D as Page,U as documentProps};
//# sourceMappingURL=pages_login_index.page.8e5b9894.js.map
