import{_ as P}from"../chunks/chunk-101896b7.js";import{R,r as e,j as s}from"../chunks/chunk-0ad0329c.js";import{T as j}from"../chunks/chunk-8eee58da.js";import{u as o}from"../chunks/chunk-02d17786.js";import{a as x,A as T}from"../chunks/chunk-ee696397.js";import{L as E}from"../chunks/chunk-c9eff144.js";import"../chunks/chunk-41308c4f.js";import"../chunks/chunk-0249643f.js";function A(){import.meta.url,import("_").catch(()=>1);async function*r(){}}const g=R.lazy(()=>P(()=>import("../chunks/chunk-95713502.js"),["assets/chunks/chunk-95713502.js","assets/chunks/chunk-0ad0329c.js","assets/chunks/chunk-02d17786.js","assets/chunks/chunk-54587732.js","assets/chunks/chunk-4ee9bcfe.js","assets/chunks/chunk-ee696397.js","assets/chunks/chunk-15751d2d.js","assets/chunks/chunk-744bc730.js","assets/chunks/chunk-716ac8a7.js","assets/chunks/chunk-dfbf6de9.js"])),B={title:"게시글 검색 | Green Maps",description:"게시글 검색 페이지"};function I(r){var y;const c=x();c({type:"postSlice/SEARCH",KEYWORD:((y=r.routeParams)==null?void 0:y.keyword)||""});const[n,i]=e.useState([]),[a,S]=e.useState(!1);e.useEffect(()=>{typeof a<"u"&&(S(!0),i(r.postInfo.lists))},[]);const p=o(t=>t.postSlice.KEYWORD),u=o(t=>t.postSlice.SUBJECT),l=o(t=>t.postSlice.post.CURRENT_PAGE),m=o(t=>t.postSlice.BOUNDARY),f=o(t=>t.postSlice.ORDERBY),d=20,_=e.useCallback(async()=>{try{return await(await fetch(`${T}/posts?keyword=${p}&subject=${encodeURIComponent(u)}&page=${l}&limit=${d}&boundary=${m}&orderby=${f}`,{headers:{"Content-Type":"application/json"}})).json()}catch(t){console.error(t)}},[p,u,l,m,f]);return e.useEffect(()=>{_().then(t=>{i(t.currentPage===1?t.lists:[...n,...t.lists]),c({type:"postSlice/POST_IN_PAGE",TOTAL:t.total,CURRENT_PAGE:t.currentPage})})},[_]),a?s.jsxs(R.Suspense,{fallback:s.jsx(E,{}),children:[s.jsx(j,{title:"검색 결과"}),s.jsx(g,{posts:n,limit:d})]}):s.jsx(E,{})}export{I as Page,A as __vite_legacy_guard,B as documentProps};
