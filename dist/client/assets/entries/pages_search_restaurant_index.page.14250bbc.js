import{_ as w}from"../chunks/chunk-101896b7.js";import{r as n,j as t,R as p}from"../chunks/chunk-0ad0329c.js";import{T as x}from"../chunks/chunk-8eee58da.js";import{N as E}from"../chunks/chunk-5b1b7faa.js";import{u as i,b as d,A as h}from"../chunks/chunk-ee696397.js";import{E as u}from"../chunks/chunk-2b326172.js";import{n as v}from"../chunks/chunk-54587732.js";import{u as I}from"../chunks/chunk-b60bc363.js";import{L as y}from"../chunks/chunk-c9eff144.js";import"../chunks/chunk-02d17786.js";import"../chunks/chunk-41308c4f.js";import"../chunks/chunk-3c838518.js";import"../chunks/chunk-4ee9bcfe.js";import"../chunks/chunk-0249643f.js";function T(){import.meta.url,import("_").catch(()=>1);async function*r(){}}function S(){const[r,a]=n.useState(!1),s=i(e=>e.reviewSlice.editDeleteNotifyModalOn),o=i(e=>e.reviewSlice.sameUserOwner);return n.useEffect(()=>{a(s===!0)},[s]),t.jsxs("article",{className:`modal-edit-delete-notify ${r?"on":""}`,children:[t.jsx("h4",{className:"sr-only",children:"수정, 삭제, 신고용 모달"}),t.jsx("ul",{children:o?t.jsxs(t.Fragment,{children:[t.jsx(L,{}),t.jsx(_,{})]}):t.jsx("li",{children:" 🚨 신고하기"})})]})}function L(){const r=d(),a=i(e=>e.reviewSlice.reviewId),s=i(e=>e.reviewSlice.restaurantId);function o(){v(`/search/${s}/reviews/${a}/edit`);const e=document.querySelector(".app");e==null||e.classList.remove("modal-mode"),r(u(!1))}return t.jsx("li",{onClick:o,children:"🩹 수정하기"})}function _(){const r=d(),a=i(e=>e.reviewSlice.reviewId),s=i(e=>e.reviewSlice.restaurantId);async function o(){try{(await(await fetch(`${h}/reviews/${a}`,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({restaurantId:s})})).json()).success?v(`/search/${s}`):alert("다시 시도해주세요.")}catch(e){console.error(e)}finally{const e=document.querySelector(".app");e==null||e.classList.remove("modal-mode"),r(u(!1))}}return t.jsx("li",{onClick:o,children:"🗑️ 삭제하기"})}function g(){const r=i(c=>c.reviewSlice.editDeleteNotifyModalOn),[a,s]=n.useState(!1),o=d();n.useEffect(()=>{s(r===!0)},[r]),n.useEffect(()=>(a&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}),[a]);function e(c){if(c.target.className==="app modal-mode"){const l=document.querySelector(".app");l==null||l.classList.remove("modal-mode"),o(u(!1))}}return t.jsx("div",{className:`modal-group ${a?"on":""}`,children:t.jsx(S,{})})}const z={title:"채식 식당 검색 | Green Maps",description:"채식 식당 지도 검색 페이지"},D=p.lazy(()=>w(()=>import("../chunks/chunk-8cf0424b.js"),["assets/chunks/chunk-8cf0424b.js","assets/chunks/chunk-0ad0329c.js","assets/chunks/chunk-02d17786.js","assets/chunks/chunk-ee696397.js","assets/chunks/chunk-54587732.js","assets/chunks/chunk-4ee9bcfe.js","assets/chunks/chunk-9ae07e36.js","assets/chunks/chunk-0a2493d9.js","assets/chunks/chunk-14df68f3.js","assets/chunks/chunk-dfbf6de9.js","assets/chunks/chunk-2b326172.js","assets/chunks/chunk-41308c4f.js","assets/chunks/chunk-76e51bf7.js"]));function J(r){var m;const{routeParams:a}=r,[s,o]=I(),e=((m=r.routeParams)==null?void 0:m.restaurantId)||"",[c,l]=n.useState(null);n.useEffect(()=>{j()},[a]);async function j(){const f=await(await fetch(`${h}/restaurants/${e}`,{headers:{"Cache-Control":"max-age=31536000"}})).json();f.success&&l(f.restaurantInfo)}return t.jsxs(t.Fragment,{children:[t.jsx(x,{title:"상세정보"}),t.jsx(p.Suspense,{fallback:t.jsx(y,{}),children:t.jsx(D,{restaurantInfo:c,isLoggedIn:s,userInfo:o})}),t.jsx(E,{isLoggedIn:s}),t.jsx(g,{})]})}export{J as Page,T as __vite_legacy_guard,z as documentProps};
