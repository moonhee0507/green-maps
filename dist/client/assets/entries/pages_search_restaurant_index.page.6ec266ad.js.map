{"version":3,"mappings":"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","names":["EditDeleteNotifyModal","show","setShow","useState","editDeleteNotifyModalOn","useAppSelector","state","sameUserOwner","useEffect","jsx","jsxs","Fragment","EDIT","DELETE","dispatch","useAppDispatch","reviewId","restaurantId","handleClick","navigate","app","EDIT_DELETE_NOTIFY_MODAL","API_URL","err","ModalGroup","on","handleClose","event","RestaurantDetail","React","Page","pageContext","routeParams","isLoggedIn","userInfo","useCheckLoginStatus","_a","restaurantInfo","setRestaurantInfo","getRestaurantList","data","TopBar","LoadingMain","NavBar"],"sources":["../../../../pages/search/restaurant/ModalGroup/EditDeleteNotifyModal/EditDeleteNotifyModal.tsx","../../../../pages/search/restaurant/ModalGroup/ModalGroup.tsx","../../../../pages/search/restaurant/index.page.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../../../../renderer/store/hooks';\r\nimport { navigate } from 'vite-plugin-ssr/client/router';\r\nimport { EDIT_DELETE_NOTIFY_MODAL } from '../../../../../renderer/_reducers/_slices/reviewSlice';\r\nimport { API_URL } from '../../../../../renderer/CONSTANT_URL';\r\n\r\nexport { EditDeleteNotifyModal };\r\n\r\nfunction EditDeleteNotifyModal() {\r\n    const [show, setShow] = useState(false);\r\n    const editDeleteNotifyModalOn = useAppSelector((state) => state.reviewSlice.editDeleteNotifyModalOn);\r\n    const sameUserOwner = useAppSelector((state) => state.reviewSlice.sameUserOwner);\r\n\r\n    useEffect(() => {\r\n        if (editDeleteNotifyModalOn === true) setShow(true);\r\n        else setShow(false);\r\n    }, [editDeleteNotifyModalOn]);\r\n\r\n    return (\r\n        <article className={`modal-edit-delete-notify ${show ? 'on' : ''}`}>\r\n            <h4 className=\"sr-only\">수정, 삭제, 신고용 모달</h4>\r\n            <ul>\r\n                {sameUserOwner ? (\r\n                    <>\r\n                        <EDIT />\r\n                        <DELETE />\r\n                    </>\r\n                ) : (\r\n                    <li> 🚨 신고하기</li>\r\n                )}\r\n            </ul>\r\n        </article>\r\n    );\r\n}\r\n\r\nfunction EDIT() {\r\n    const dispatch = useAppDispatch();\r\n    const reviewId = useAppSelector((state) => state.reviewSlice.reviewId);\r\n    const restaurantId = useAppSelector((state) => state.reviewSlice.restaurantId);\r\n\r\n    function handleClick() {\r\n        navigate(`/search/${restaurantId}/reviews/${reviewId}/edit`);\r\n        const app = document.querySelector('.app');\r\n        app?.classList.remove('modal-mode');\r\n        dispatch(EDIT_DELETE_NOTIFY_MODAL(false));\r\n    }\r\n\r\n    return <li onClick={handleClick}>🩹 수정하기</li>;\r\n}\r\n\r\nfunction DELETE() {\r\n    const dispatch = useAppDispatch();\r\n    const reviewId = useAppSelector((state) => state.reviewSlice.reviewId);\r\n    const restaurantId = useAppSelector((state) => state.reviewSlice.restaurantId);\r\n\r\n    async function handleClick() {\r\n        try {\r\n            const res = await fetch(`${API_URL}/reviews/${reviewId}`, {\r\n                credentials: 'include',\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ restaurantId: restaurantId }),\r\n            });\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                navigate(`/search/${restaurantId}`);\r\n            } else {\r\n                alert('다시 시도해주세요.');\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            const app = document.querySelector('.app');\r\n            app?.classList.remove('modal-mode');\r\n            dispatch(EDIT_DELETE_NOTIFY_MODAL(false));\r\n        }\r\n    }\r\n    return <li onClick={handleClick}>🗑️ 삭제하기</li>;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../../../renderer/store/hooks';\r\nimport { EDIT_DELETE_NOTIFY_MODAL } from '../../../../renderer/_reducers/_slices/reviewSlice';\r\nimport { EditDeleteNotifyModal } from './EditDeleteNotifyModal/EditDeleteNotifyModal';\r\n\r\nexport { ModalGroup };\r\n\r\nfunction ModalGroup() {\r\n    const on = useAppSelector((state) => state.reviewSlice.editDeleteNotifyModalOn);\r\n    const [show, setShow] = useState(false);\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    useEffect(() => {\r\n        if (on === true) setShow(true);\r\n        else setShow(false);\r\n    }, [on]);\r\n\r\n    useEffect(() => {\r\n        if (show) {\r\n            document.addEventListener('click', handleClose);\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener('click', handleClose);\r\n        };\r\n    }, [show]);\r\n\r\n    function handleClose(event: MouseEvent) {\r\n        if ((event.target as HTMLElement).className === 'app modal-mode') {\r\n            const app = document.querySelector('.app');\r\n            app?.classList.remove('modal-mode');\r\n\r\n            dispatch(EDIT_DELETE_NOTIFY_MODAL(false));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`modal-group ${show ? 'on' : ''}`}>\r\n            <EditDeleteNotifyModal />\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { TopBar } from '../../../components/topBar/topBar';\r\nimport { NavBar } from '../../../components/navBar';\r\nimport { ModalGroup } from './ModalGroup/ModalGroup';\r\nimport { API_URL } from '../../../renderer/CONSTANT_URL';\r\nimport { useCheckLoginStatus } from '../../../renderer/_hooks/useCheckLoginStatus';\r\nimport LoadingMain from '../../../components/Loading/LoadingMain';\r\nimport type { PageContext } from '../../../renderer/types';\r\nimport type { Restaurant } from '../../../server/models/Restaurant';\r\n\r\nconst RestaurantDetail = React.lazy(() => import('./RestaurantDetail/RestaurantDetail'));\r\n\r\nexport { Page };\r\n\r\nfunction Page(pageContext: PageContext) {\r\n    const { routeParams } = pageContext;\r\n\r\n    const [isLoggedIn, userInfo] = useCheckLoginStatus();\r\n    const restaurantId = pageContext.routeParams?.restaurantId || '';\r\n\r\n    const [restaurantInfo, setRestaurantInfo] = useState<Restaurant | null>(null);\r\n\r\n    useEffect(() => {\r\n        getRestaurantList();\r\n    }, [routeParams]);\r\n\r\n    async function getRestaurantList() {\r\n        const res = await fetch(`${API_URL}/restaurants/${restaurantId}`, {\r\n            headers: {\r\n                'Cache-Control': 's-maxage=2678400, max-age=0',\r\n            },\r\n        });\r\n        const data = (await res.json()) as { success: boolean; restaurantInfo: Restaurant; totalReview: number };\r\n\r\n        if (data.success) {\r\n            setRestaurantInfo(data.restaurantInfo);\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <TopBar title=\"상세정보\" />\r\n            <React.Suspense fallback={<LoadingMain />}>\r\n                <RestaurantDetail restaurantInfo={restaurantInfo} isLoggedIn={isLoggedIn} userInfo={userInfo} />\r\n            </React.Suspense>\r\n            <NavBar isLoggedIn={isLoggedIn} />\r\n            <ModalGroup />\r\n        </>\r\n    );\r\n}\r\n"],"file":"assets/entries/pages_search_restaurant_index.page.6ec266ad.js"}