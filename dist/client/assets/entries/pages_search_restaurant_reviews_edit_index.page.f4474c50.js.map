{"version":3,"file":"pages_search_restaurant_reviews_edit_index.page.f4474c50.js","sources":["../../../../pages/search/restaurant/reviews/edit/index.page.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { TopBar } from '../../../../../components/topBar/topBar';\r\nimport { ReviewForm } from '../create/ReviewForm/ReviewForm';\r\nimport { useCheckLoginStatus } from '../../../../../renderer/_hooks/useCheckLoginStatus';\r\nimport { API_URL } from '../../../../../renderer/CONSTANT_URL';\r\nimport LoadingMain from '../../../../../components/Loading/LoadingMain';\r\nimport type { PageContext } from '../../../../../renderer/types';\r\nimport type { Restaurant } from '../../../../../server/models/Restaurant';\r\nimport type { Review } from '../../../../../server/models/Review';\r\n\r\nexport const documentProps = {\r\n    title: '리뷰 수정 | Green Maps',\r\n    description: '채식 식당 리뷰 수정 페이지',\r\n};\r\n\r\nexport { Page };\r\n\r\nfunction Page(pageContext: PageContext) {\r\n    const restaurantId = pageContext.routeParams?.restaurantId || '';\r\n    const reviewId = pageContext.routeParams?.reviewId || '';\r\n\r\n    const [restaurant, setRestaurant] = useState<Restaurant | null>(null);\r\n    const [review, setReview] = useState<Review | null>(null);\r\n\r\n    const [_, userInfo] = useCheckLoginStatus();\r\n\r\n    useEffect(() => {\r\n        getMyReview().then((data) => {\r\n            if (data.success) {\r\n                setReview(data.review);\r\n                setRestaurant(typeof data.review.restaurant === 'object' ? data.review.restaurant : null);\r\n            } else {\r\n                setReview(null);\r\n                setRestaurant(null);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    async function getMyReview() {\r\n        const res = await fetch(`${API_URL}/reviews/${reviewId}`);\r\n        const data = (await res.json()) as { success: boolean; review: Review };\r\n\r\n        return data;\r\n    }\r\n    return (\r\n        <React.Suspense fallback={<LoadingMain />}>\r\n            <TopBar title=\"리뷰 수정\" />\r\n            {review && restaurant && (\r\n                <ReviewForm\r\n                    restaurantId={restaurantId}\r\n                    reviewId={reviewId}\r\n                    title={restaurant.title}\r\n                    photos={review.photo}\r\n                    content={review.content}\r\n                    userInfo={userInfo}\r\n                />\r\n            )}\r\n        </React.Suspense>\r\n    );\r\n}\r\n"],"names":["documentProps","Page","pageContext","restaurantId","_a","reviewId","_b","restaurant","setRestaurant","useState","review","setReview","_","userInfo","useCheckLoginStatus","useEffect","getMyReview","data","API_URL","React","jsx","LoadingMain","TopBar","ReviewForm"],"mappings":"ytBAUO,MAAMA,EAAgB,CACzB,MAAO,qBACP,YAAa,iBACjB,EAIA,SAASC,EAAKC,EAA0B,SAC9B,MAAAC,IAAeC,EAAAF,EAAY,cAAZ,YAAAE,EAAyB,eAAgB,GACxDC,IAAWC,EAAAJ,EAAY,cAAZ,YAAAI,EAAyB,WAAY,GAEhD,CAACC,EAAYC,CAAa,EAAIC,WAA4B,IAAI,EAC9D,CAACC,EAAQC,CAAS,EAAIF,WAAwB,IAAI,EAElD,CAACG,EAAGC,CAAQ,EAAIC,EAAoB,EAE1CC,EAAAA,UAAU,IAAM,CACAC,EAAA,EAAE,KAAMC,GAAS,CACrBA,EAAK,SACLN,EAAUM,EAAK,MAAM,EACPT,EAAA,OAAOS,EAAK,OAAO,YAAe,SAAWA,EAAK,OAAO,WAAa,IAAI,IAExFN,EAAU,IAAI,EACdH,EAAc,IAAI,EACtB,CACH,CACL,EAAG,CAAE,CAAA,EAEL,eAAeQ,GAAc,CAIlB,OAFO,MADF,MAAM,MAAM,GAAGE,aAAmBb,GAAU,GAChC,MAG5B,CACA,cACKc,EAAM,SAAN,CAAe,SAAUC,EAAAA,IAACC,IAAY,EACnC,SAAA,CAACD,EAAAA,IAAAE,EAAA,CAAO,MAAM,OAAQ,CAAA,EACrBZ,GAAUH,GACPa,EAAA,IAACG,EAAA,CACG,aAAApB,EACA,SAAAE,EACA,MAAOE,EAAW,MAClB,OAAQG,EAAO,MACf,QAASA,EAAO,QAChB,SAAAG,CAAA,CACJ,CAER,CAAA,CAAA,CAER"}