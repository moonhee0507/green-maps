import{r as l,j as s}from"../chunks/chunk-0ad0329c.js";import{T as k}from"../chunks/chunk-955d47e2.js";import{c as p,A as h}from"../chunks/chunk-13c5eeef.js";import{L as x}from"../chunks/chunk-ef7fa417.js";import{L as y}from"../chunks/chunk-3c838518.js";import{n as j}from"../chunks/chunk-c949b376.js";import"../chunks/chunk-da345742.js";import"../chunks/chunk-41308c4f.js";import"../chunks/chunk-af981888.js";const b="/images/icon-kakao.png";function w({setMove:t}){const e=p(),r=()=>{t(-100),e(x(!0))};async function c(){j("/api/oauth/kakao")}l.useEffect(()=>{const o=window.location.search,i=new URLSearchParams(o).get("code");i&&a(i).then(g=>{g.success&&u().then(m=>{m.success&&(window.location.href="/my")})})},[]);async function a(o){return await(await fetch(`${h}/oauth/kakao/token?code=${o}`)).json()}async function u(){return await(await fetch(`${h}/oauth/kakao/users`)).json()}return s.jsxs("section",{className:"login-select-stage",children:[s.jsx("h3",{className:"sr-only",children:"ë¡œê·¸ì¸ ë°©ì‹ ì„ íƒ"}),s.jsx("div",{className:"container-rocket",children:s.jsx("span",{children:"ğŸš€"})}),s.jsx("button",{type:"button",onClick:r,className:"styled-button reuse-in-login",children:"ë¡œê·¸ì¸"}),s.jsxs("button",{type:"button",className:"styled-button kakao-login",onClick:c,children:[s.jsx("img",{src:b,alt:"ì¹´ì¹´ì˜¤ ì•„ì´ì½˜"}),s.jsx("span",{children:"ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸"})]}),s.jsx(y,{href:"/signup",className:"link-to-signup",children:"íšŒì›ê°€ì…"})]})}function N({setMove:t}){const e=p(),r=()=>{t(a=>a+100),e(x(!1))},c=()=>{t(a=>a-100)};return s.jsxs("section",{className:"login-id-stage",children:[s.jsx("h3",{className:"sr-only",children:"ì•„ì´ë”” ì…ë ¥"}),s.jsx("label",{htmlFor:"loginId",children:"ì•„ì´ë””"}),s.jsx("input",{type:"text",id:"loginId"}),s.jsxs("div",{className:"button-group-move",children:[s.jsx("button",{type:"button",onClick:r,"aria-label":"ì´ì „ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ì²« í™”ë©´"}),s.jsx("button",{type:"button",onClick:c,"aria-label":"ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ë¹„ë°€ë²ˆí˜¸"})]})]})}function C({setMove:t}){const e=p(),[r,c]=l.useState(""),[a,u]=l.useState(!1),o=()=>{t(n=>n+100)},d=n=>{c(n.target.value)},i=n=>{u(n.target.checked)},g=()=>{e(x(!1)),m()};async function m(){try{const f={userId:document.getElementById("loginId").value,password:r,keepLogin:a};(await(await fetch(`${h}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json()).success?(alert("ğŸ‰ğŸ‰ë¡œê·¸ì¸ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤ğŸ‰ğŸ‰"),j("/search")):alert("ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}catch(n){console.error(n)}}return s.jsxs("section",{className:"login-password-stage",children:[s.jsx("h3",{className:"sr-only",children:"ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"}),s.jsx("label",{htmlFor:"loginPassword",children:"ë¹„ë°€ë²ˆí˜¸"}),s.jsx("input",{type:"password",id:"loginPassword",onChange:d}),s.jsx("label",{htmlFor:"loginPersist",children:"ë¡œê·¸ì¸ ìœ ì§€"}),s.jsx("input",{type:"checkbox",id:"loginPersist",onChange:i}),s.jsxs("div",{className:"button-group-move",children:[s.jsx("button",{type:"button",onClick:o,"aria-label":"ì´ì „ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ì•„ì´ë””"}),s.jsx("button",{type:"button",onClick:g,"aria-label":"ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ì´ë™",children:"ë¡œê·¸ì¸"})]})]})}function S(){const[t,e]=l.useState(0);return s.jsx("main",{className:"main-login",children:s.jsxs("div",{className:"login-stage-wrapper",style:{left:`${t}%`,transition:".5s"},children:[s.jsx(w,{setMove:e}),s.jsx(N,{setMove:e}),s.jsx(C,{setMove:e})]})})}function O(){return l.useEffect(()=>{(async()=>{const e=await(await fetch(`${h}/users`)).json();console.log("ë¡œê·¸ì¸ í˜ì´ì§€ì˜ ìœ ì € ì²´í¬",e),e.success&&(alert("ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤."),j("/search"))})()},[]),s.jsxs(s.Fragment,{children:[s.jsx(k,{title:"ë¡œê·¸ì¸"}),s.jsx(S,{})]})}export{O as Page};
