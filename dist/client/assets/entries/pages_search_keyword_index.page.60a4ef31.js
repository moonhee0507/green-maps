import{j as e,r as o,R as L}from"../chunks/chunk-93156e5d.js";import{T as w}from"../chunks/chunk-7fa71246.js";import{N as _}from"../chunks/chunk-1989159b.js";import{u as m,b as d,A as T}from"../chunks/chunk-c1371adf.js";import{C as P,a as I,b as B}from"../chunks/chunk-f0866dd8.js";import{A as g,f as C,g as y,h as D}from"../chunks/chunk-0bbcfb89.js";import{P as F}from"../chunks/chunk-8764f3c0.js";import{L as O}from"../chunks/chunk-4d100f1e.js";import{u as $}from"../chunks/chunk-3a1767e4.js";import"../chunks/chunk-1ef25d43.js";import"../chunks/chunk-99ce4f1c.js";import"../chunks/chunk-35151331.js";import"../chunks/chunk-101896b7.js";import"../chunks/chunk-e8bc0b58.js";import"../chunks/chunk-3258e6a6.js";import"../chunks/chunk-1de3b966.js";function G(){const t=m(),r=()=>{const s=Array.from(document.querySelectorAll(".checkbox-category-filter")),a=s.length,c=s.filter(i=>i.checked===!0).map(i=>i.value);if(c.length===0){alert("ÏóÖÏ¢ÖÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.");return}a===c.length?t(g("*")):t(g(c))};return e.jsx("button",{type:"button",onClick:r,className:"button-apply-filter",children:"Ï†ÅÏö©"})}const k=Object.keys(P).filter(t=>t!=="Í∏∞ÌÉÄ").sort();function M(){const t=o.useRef([]);o.useEffect(()=>{t.current=Array(k.length).fill(null).map(()=>L.createRef())},[]);const r=()=>{t.current.map(s=>{s.current!==null&&(s.current.checked=!1)})};return e.jsxs("div",{className:"container-filter",children:[e.jsx("em",{className:"txt-filter-name",children:"ÏóÖÏ¢Ö"}),e.jsx("div",{children:e.jsxs("form",{children:[e.jsx(G,{}),e.jsxs("div",{className:"container-button-all",children:[e.jsx("button",{type:"button",onClick:r,children:"Ï†ÑÏ≤¥ Ìï¥Ï†ú"}),e.jsx("button",{type:"reset",children:"Ï†ÑÏ≤¥ ÏÑ†ÌÉù"})]}),e.jsx("div",{className:"wrapper-checkbox-category reuse-in-result",children:k.map((s,a)=>e.jsx(I,{name:s,index:a,ref:t.current[a]},Math.random()))})]})})]})}function U(){const t=m(),r=["Ï±ÑÏãùÏùåÏãùÏ†ê","Ï±ÑÏãùÍ∞ÄÎä•ÏùåÏãùÏ†ê"];o.useEffect(()=>{t(C([]))},[]);const s=()=>{const c=Array.from(document.querySelectorAll(".checkbox-cert-filter")).filter(i=>i.checked===!0).map(i=>i.value);t(C(c))};return e.jsxs("div",{className:"container-filter",children:[e.jsx("em",{className:"txt-filter-name",children:"Ï±ÑÏãù Ïù∏Ï¶ù"}),e.jsx("div",{children:e.jsxs("form",{children:[e.jsx("button",{type:"button",onClick:s,className:"button-apply-filter",children:"Ï†ÅÏö©"}),e.jsx("div",{className:"wrapper-checkbox-category reuse-in-result",children:r.map((a,c)=>e.jsx(Y,{name:a,index:c},Math.random()))})]})})]})}function Y({name:t,index:r}){const s=d(l=>l.mapSlice.selectedCert),[a,c]=o.useState(!0),i=l=>{c(l.target.checked)};return o.useEffect(()=>{c(s.includes(t))},[s]),e.jsxs("div",{className:"container-check-cert",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:i,id:`checkboxCert-${r}`,className:"checkbox-cert-filter",value:t}),e.jsx("label",{htmlFor:`checkboxCert-${r}`,children:t})]})}function q(){return e.jsxs("section",{children:[e.jsx("h3",{className:"sr-only","aria-label":"ÌïÑÌÑ∞"}),e.jsx(M,{}),e.jsx(U,{})]})}function K(){const t=m();o.useEffect(()=>{t(y("relevance"))},[]);const r=s=>{t(y(s.target.value))};return e.jsxs("section",{children:[e.jsx("h3",{className:"sr-only","aria-label":"Ï†ïÎ†¨"}),e.jsx("div",{className:"container-sort",children:e.jsxs("form",{children:[e.jsx("label",{htmlFor:"selectBoxSortInSearch",children:"Ï†ïÎ†¨"}),e.jsxs("select",{name:"",id:"selectBoxSortInSearch",onChange:r,children:[e.jsx("option",{value:"relevance",children:"Í¥ÄÎ†®ÎèÑÏàú"}),e.jsx("option",{value:"rating",children:"Î≥ÑÏ†êÏàú"}),e.jsx("option",{value:"review",children:"Î¶¨Î∑∞Ïàú"}),e.jsx("option",{value:"distance",children:"Í±∞Î¶¨Ïàú"})]})]})})]})}function H(){return e.jsxs("div",{children:[e.jsx(q,{}),e.jsx(K,{})]})}function J({total:t,perPage:r,searchListInPage:s}){const a=o.useCallback(({exist:c})=>c?e.jsxs(e.Fragment,{children:[e.jsx(W,{searchListInPage:s}),e.jsx(F,{count:t??0,perPage:r})]}):e.jsxs("div",{className:"style-wrapper-no-review",children:[e.jsx("div",{className:"txt-no-review",children:"üò≠"}),e.jsx("p",{children:"Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏñ¥Ïöî."})]}),[t,s,r]);return e.jsxs("div",{className:"wrapper-result-in-radius reuse-in-search",children:[e.jsxs("p",{children:["Í≤ÄÏÉâ Í≤∞Í≥º(",t,")"]}),t===null?e.jsx(O,{}):a({exist:t!==0})]})}function W({searchListInPage:t}){return e.jsx("ul",{className:"ul-restaurant-in-radius reuse-in-search",children:t.map((r,s)=>e.jsx(B,{restaurantInfo:r,isFirst:s===0},r._id))})}function z({keyword:t,total:r,perPage:s,searchListInPage:a}){return e.jsxs("main",{className:"main-search-result",children:[e.jsx(H,{}),e.jsx(J,{total:r,perPage:s,searchListInPage:a})]})}const me={title:"Ï±ÑÏãù ÏãùÎãπ Í≤ÄÏÉâ Í≤∞Í≥º | Green Maps",description:"Ï±ÑÏãù ÏãùÎãπ ÏßÄÎèÑ Í≤ÄÏÉâ ÌéòÏù¥ÏßÄ"};function xe(t){var f;const r=m(),[s,a]=$(),c=((f=t.routeParams)==null?void 0:f.keyword)??"",i=d(n=>n.paginationSlice.currentPage),l=d(n=>n.mapSlice.selectedCategory),x=d(n=>n.mapSlice.selectedCert),p=d(n=>n.mapSlice.resultOrderBy),[u,S]=o.useState(null),[b,v]=o.useState([]),[N,E]=o.useState(null),[h,Q]=o.useState(20);o.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(n=>{const{latitude:j,longitude:A}=n.coords;S([A,j])})},[]),o.useEffect(()=>{u!==null&&R().then(n=>{n.success&&(r(D(n.lists)),v(n.lists),E(n.total))})},[c,i,h,p,l,x,u]);const R=o.useCallback(async()=>u===null?{success:!1,lists:[],total:0}:await(await fetch(`${T}/search/?keyword=${c}&page=${i}&limit=${h}&orderBy=${p}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:l,cert:x,currentLocation:u})})).json(),[c,i,h,p,l,x,u]);return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:`${c} üîç`}),e.jsx(z,{keyword:c,total:N,perPage:h,searchListInPage:b}),e.jsx(_,{isLoggedIn:s})]})}export{xe as Page,me as documentProps};
//# sourceMappingURL=pages_search_keyword_index.page.60a4ef31.js.map
