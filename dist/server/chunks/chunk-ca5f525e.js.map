{"version":3,"file":"chunk-ca5f525e.js","sources":["../../../components/button/MoreButton.tsx","../../../pages/my-lists/bookmark/BookmarkListMain/BookmarkList/BookmarkList.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { API_URL } from '../../renderer/CONSTANT_URL';\r\nimport { useAppSelector } from '../../renderer/store/hooks';\r\n\r\nexport { MoreButton };\r\n\r\nfunction MoreButton({ restaurantId, restaurantTitle }: { restaurantId: string; restaurantTitle: string }) {\r\n    const [show, setShow] = useState(false);\r\n    const moreButtonRef = useRef<HTMLButtonElement>(null);\r\n\r\n    const clicked = useAppSelector((state) => state.myListSlice.clicked);\r\n\r\n    function handleMoreButton() {\r\n        setShow((prev) => !prev);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (show) {\r\n            window.addEventListener('click', clickOutside);\r\n        }\r\n\r\n        return () => {\r\n            window.addEventListener('click', clickOutside);\r\n        };\r\n    }, [show]);\r\n\r\n    function clickOutside(event: MouseEvent) {\r\n        const target = event.target as HTMLElement;\r\n\r\n        if (moreButtonRef.current && !moreButtonRef.current.contains(target)) {\r\n            setShow(false);\r\n        }\r\n    }\r\n\r\n    async function handleDelete() {\r\n        try {\r\n            const list = clicked === 'Î∂ÅÎßàÌÅ¨' ? 'bookmark' : 'like';\r\n\r\n            if (confirm('Ìï¥Îãπ ÏãùÎãπÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {\r\n                const res = await fetch(`${API_URL}/users/${list}/${restaurantId}`, {\r\n                    credentials: 'include',\r\n                    method: 'DELETE',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                });\r\n\r\n                const data = await res.json();\r\n\r\n                if (data.success) {\r\n                    alert(`${restaurantTitle} ÏÇ≠Ï†úÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.`);\r\n                    window.location.reload();\r\n                } else {\r\n                    alert('Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\r\n                }\r\n            } else {\r\n                setShow(false);\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <button\r\n                type=\"button\"\r\n                aria-label=\"ÎçîÎ≥¥Í∏∞ Î≤ÑÌäº\"\r\n                className=\"button-more\"\r\n                onClick={handleMoreButton}\r\n                ref={moreButtonRef}\r\n            />\r\n            {show && (\r\n                <div className=\"container-more-option\">\r\n                    <ul>\r\n                        <li className=\"list-option\" onClick={handleDelete}>\r\n                            <div>\r\n                                <p className=\"txt-delete\">ÏÇ≠Ï†ú</p>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Distance } from './Distance';\r\nimport { MoreButton } from '../../../../../components/button/MoreButton';\r\nimport { API_URL } from '../../../../../renderer/CONSTANT_URL';\r\nimport { useAppSelector } from '../../../../../renderer/store/hooks';\r\nimport type { Bookmark } from '../../../../../server/models/User';\r\nimport type { Restaurant } from '../../../../../server/models/Restaurant';\r\nimport { AssignedLike } from '../../../ListSection/Like/LikeList';\r\n\r\ntype AssignedBookmark = Bookmark & {\r\n    restaurantInfo: Restaurant;\r\n};\r\n\r\nexport function BookmarkList({ lists }: { lists: Bookmark[] }) {\r\n    const [restaurantData, setRestaurantData] = useState<AssignedBookmark[]>([]);\r\n\r\n    const [registerOrder, setRegisterOrder] = useState<AssignedBookmark[]>([]);\r\n    const [nameOrder, setNameOrder] = useState<AssignedBookmark[]>([]);\r\n\r\n    useEffect(() => {\r\n        const setData = async () => {\r\n            const arr: AssignedBookmark[] = [];\r\n\r\n            for (const list of lists) {\r\n                try {\r\n                    if (typeof list._id === 'string') {\r\n                        const data = await getRestaurant(list._id);\r\n                        arr.push(Object.assign(list, data));\r\n                    }\r\n                } catch (err) {\r\n                    console.error(`Î∂ÅÎßàÌÅ¨ Í∑∏Î£πÏóê Ï†ÄÏû•Îêú ÏãùÎãπ _idÏóê ÎåÄÌïú Ï†ïÎ≥¥Î•º Í∞ÄÏ†∏Ïò§Îäî Îç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.`);\r\n                }\r\n            }\r\n\r\n            setRestaurantData(arr);\r\n        };\r\n\r\n        setData();\r\n    }, [lists]);\r\n\r\n    const sort = useAppSelector((state) => state.myListSlice.groupNameOrder);\r\n\r\n    useEffect(() => {\r\n        if (restaurantData.length !== 0) {\r\n            setRegisterOrder(restaurantData);\r\n            setNameOrder(\r\n                [...restaurantData].sort((a, b) => a.restaurantInfo.title.localeCompare(b.restaurantInfo.title, 'en'))\r\n            );\r\n        }\r\n    }, [restaurantData]);\r\n\r\n    async function getRestaurant(_id: string) {\r\n        const res = await fetch(`${API_URL}/restaurants/${_id}`);\r\n        const data = await res.json();\r\n\r\n        return data;\r\n    }\r\n\r\n    return restaurantData && restaurantData.length > 0 ? (\r\n        <ul className=\"ul-groupname\">\r\n            {sort === 'Îì±Î°ùÏàú'\r\n                ? registerOrder.map((restaurant) => {\r\n                      return <ListItem key={Math.random()} list={restaurant} />;\r\n                  })\r\n                : nameOrder.map((restaurant) => {\r\n                      return <ListItem key={Math.random()} list={restaurant} />;\r\n                  })}\r\n        </ul>\r\n    ) : (\r\n        <div className=\"style-wrapper-no-review\">\r\n            <div className=\"txt-no-review\">üò≠</div>\r\n            <p>Î™©Î°ùÏù¥ ÏóÜÏñ¥Ïöî.</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function ListItem({ list }: { list: AssignedBookmark | AssignedLike }) {\r\n    const { _id, title, location, address } = list.restaurantInfo;\r\n    return (\r\n        <li className=\"list-restaurant-inbookmark\">\r\n            <a href={`/search/${_id}`}>\r\n                <div className=\"container-restaurant-title-detail\">\r\n                    <div className=\"style-container-title-date\">\r\n                        <p className=\"txt-title\">{title}</p>\r\n                        <span className=\"txt-date\">{list.registeredAt.slice(0, 13)}</span>\r\n                    </div>\r\n                    <div>\r\n                        <Distance location={location.coordinates || [0, 0]} />\r\n                        <span className=\"txt-address\">{address}</span>\r\n                    </div>\r\n                </div>\r\n            </a>\r\n            <MoreButton restaurantId={_id} restaurantTitle={title} />\r\n        </li>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}