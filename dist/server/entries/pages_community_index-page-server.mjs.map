{"version":3,"file":"pages_community_index-page-server.mjs","sources":["../../../pages/community/index.page.server.tsx"],"sourcesContent":["import fetch from 'node-fetch';\r\nimport { API_URL } from '../../renderer/CONSTANT_URL';\r\nimport type { PageContext } from '../../renderer/types';\r\nimport type { Post } from '../../server/models/Post';\r\n\r\nexport const documentProps = {\r\n    title: '커뮤니티 | Green Maps',\r\n    description: '채식 식당 지도 서비스 커뮤니티',\r\n};\r\n\r\nexport { onBeforeRender };\r\n\r\n// 가장 최근 20개 게시글만 서버 사이드로 렌더링됨.\r\nasync function onBeforeRender(pageContext: PageContext) {\r\n    const res = await fetch(`${API_URL}/posts/`);\r\n\r\n    if (res.ok) {\r\n        const postProps = (await res.json()) as {\r\n            total: number;\r\n            countLimit: number;\r\n            currentPage: number;\r\n            lists: Post[];\r\n        };\r\n\r\n        const pageProps = { postProps };\r\n\r\n        return {\r\n            pageContext: { pageProps },\r\n        };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;AAKO,MAAM,gBAAgB;AAAA,EACzB,OAAO;AAAA,EACP,aAAa;AACjB;AAKA,eAAe,eAAe,aAA0B;AACpD,QAAM,MAAM,MAAM,MAAM,GAAG,gBAAgB;AAE3C,MAAI,IAAI,IAAI;AACF,UAAA,YAAa,MAAM,IAAI;AAOvB,UAAA,YAAY,EAAE;AAEb,WAAA;AAAA,MACH,aAAa,EAAE,UAAU;AAAA,IAAA;AAAA,EAEjC;AACJ;"}