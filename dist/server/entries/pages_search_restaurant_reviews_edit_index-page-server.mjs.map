{"version":3,"file":"pages_search_restaurant_reviews_edit_index-page-server.mjs","sources":["../../../pages/search/restaurant/reviews/edit/index.page.server.tsx"],"sourcesContent":["import fetch from 'node-fetch';\r\nimport { API_URL } from '../../../../../renderer/CONSTANT_URL';\r\nimport type { PageContext } from '../../../../../renderer/types';\r\nimport type { Review } from '../../../../../server/models/Review';\r\n\r\ntype Params = {\r\n    restaurantId: string;\r\n    reviewId: string;\r\n};\r\n\r\nexport { onBeforeRender };\r\n\r\nasync function onBeforeRender(pageContext: PageContext) {\r\n    const { reviewId } = pageContext.routeParams as Params;\r\n    const { user } = pageContext;\r\n\r\n    const res = await fetch(`${API_URL}/reviews/${reviewId}`);\r\n    const data = (await res.json()) as { success: boolean; review: Review };\r\n\r\n    if (data.success) {\r\n        return {\r\n            pageContext: {\r\n                review: data.review,\r\n                user: user,\r\n            },\r\n        };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;AAYA,eAAe,eAAe,aAA0B;AAC9C,QAAA,EAAE,SAAS,IAAI,YAAY;AAC3B,QAAA,EAAE,KAAS,IAAA;AAEjB,QAAM,MAAM,MAAM,MAAM,GAAG,mBAAmB,UAAU;AAClD,QAAA,OAAQ,MAAM,IAAI;AAExB,MAAI,KAAK,SAAS;AACP,WAAA;AAAA,MACH,aAAa;AAAA,QACT,QAAQ,KAAK;AAAA,QACb;AAAA,MACJ;AAAA,IAAA;AAAA,EAER;AACJ;"}