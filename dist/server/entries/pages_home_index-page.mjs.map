{"version":3,"file":"pages_home_index-page.mjs","sources":["../../../pages/home/index.page.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport LoadingMain from '../../components/Loading/LoadingMain';\r\nimport imgLoading from '/images/spinner.gif';\r\n\r\nexport { Page };\r\n\r\nexport interface BeforeInstallPromptEvent extends Event {\r\n    readonly platforms: Array<string>;\r\n    readonly userChoice: Promise<{\r\n        outcome: 'accepted' | 'dismissed';\r\n        platform: string;\r\n    }>;\r\n    prompt(): Promise<void>;\r\n}\r\n\r\nfunction Page() {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\r\n    const [Component, setComponent] = useState<any>(() => LoadingMain);\r\n\r\n    const handleBeforeInstallPrompt = (event: BeforeInstallPromptEvent) => {\r\n        event.preventDefault();\r\n\r\n        setDeferredPrompt(event);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const timeoutId = setTimeout(() => {\r\n            setIsLoading(false);\r\n        }, 5000);\r\n\r\n        setComponent(() => React.lazy(() => import('./HomeMain.js')));\r\n\r\n        return () => {\r\n            clearTimeout(timeoutId);\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!isLoading) {\r\n            window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt as any); // (지원 o) chrome 44, edge 79, opera, 삼성브라우저, android webview / (지원 x) 사파리, ios 사파리, firefox\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt as any);\r\n        };\r\n    }, [isLoading]);\r\n\r\n    return (\r\n        <React.Suspense fallback={<LoadingMain />}>\r\n            {isLoading ? (\r\n                <div\r\n                    style={{\r\n                        width: '50px',\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: '50%',\r\n                        transform: 'translate(-50%, -50%)',\r\n                        opacity: '0.33',\r\n                    }}\r\n                >\r\n                    <img src={imgLoading} alt=\"로딩\" style={{ width: '100%' }} id=\"__LOADING__\" />\r\n                </div>\r\n            ) : null}\r\n            <Component deferredPrompt={deferredPrompt} setDeferredPrompt={setDeferredPrompt} />\r\n        </React.Suspense>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAeA,SAAS,OAAO;AACZ,QAAM,CAAC,WAAW,YAAY,IAAI,SAAS,IAAI;AAC/C,QAAM,CAAC,gBAAgB,iBAAiB,IAAI,SAA0C,IAAI;AAC1F,QAAM,CAAC,WAAW,YAAY,IAAI,SAAc,MAAM,WAAW;AAE3D,QAAA,4BAA4B,CAAC,UAAoC;AACnE,UAAM,eAAe;AAErB,sBAAkB,KAAK;AAAA,EAAA;AAG3B,YAAU,MAAM;AACN,UAAA,YAAY,WAAW,MAAM;AAC/B,mBAAa,KAAK;AAAA,OACnB,GAAI;AAEP,iBAAa,MAAM,MAAM,KAAK,MAAM,OAAO,6BAAe,CAAC,CAAC;AAE5D,WAAO,MAAM;AACT,mBAAa,SAAS;AAAA,IAAA;AAAA,EAE9B,GAAG,CAAE,CAAA;AAEL,YAAU,MAAM;AACZ,QAAI,CAAC,WAAW;AACL,aAAA,iBAAiB,uBAAuB,yBAAgC;AAAA,IACnF;AAEA,WAAO,MAAM;AACF,aAAA,oBAAoB,uBAAuB,yBAAgC;AAAA,IAAA;AAAA,EACtF,GACD,CAAC,SAAS,CAAC;AAEd,8BACK,MAAM,UAAN,EAAe,UAAU,oBAAC,eAAY,GAClC,UAAA;AAAA,IACG,YAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACG,OAAO;AAAA,UACH,OAAO;AAAA,UACP,UAAU;AAAA,UACV,KAAK;AAAA,UACL,MAAM;AAAA,UACN,WAAW;AAAA,UACX,SAAS;AAAA,QACb;AAAA,QAEA,UAAC,oBAAA,OAAA,EAAI,KAAK,YAAY,KAAI,MAAK,OAAO,EAAE,OAAO,OAAU,GAAA,IAAG,cAAc,CAAA;AAAA,MAAA;AAAA,IAAA,IAE9E;AAAA,IACJ,oBAAC,WAAU,EAAA,gBAAgC,kBAAsC,CAAA;AAAA,EACrF,EAAA,CAAA;AAER;"}