{"version":3,"file":"pages_community_search_index-page-server.mjs","sources":["../../../pages/community/search/index.page.server.ts"],"sourcesContent":["import fetch from 'node-fetch';\r\nimport type { PageContextBuiltIn } from 'vite-plugin-ssr/types';\r\n\r\nexport { onBeforeRender };\r\n\r\nasync function onBeforeRender(pageContext: PageContextBuiltIn) {\r\n    const { keyword } = pageContext.routeParams;\r\n    try {\r\n        const resPosts = await fetch(\r\n            `${\r\n                process.env.NODE_ENV === 'production' ? 'https://api.green-maps.site/v1' : 'https://localhost:5000/v1'\r\n            }/posts?keyword=${keyword}`,\r\n            {\r\n                headers: {\r\n                    'Cache-Control': 'max-age=31536000',\r\n                },\r\n            }\r\n        );\r\n        const postInfo = await resPosts.json();\r\n\r\n        const pageProps = { postInfo };\r\n\r\n        return {\r\n            pageContext: {\r\n                pageProps,\r\n            },\r\n        };\r\n    } catch (err) {\r\n        console.error(err);\r\n    }\r\n}\r\n"],"names":[],"mappings":";AAKA,eAAe,eAAe,aAAiC;AACrD,QAAA,EAAE,QAAQ,IAAI,YAAY;AAC5B,MAAA;AACA,UAAM,WAAW,MAAM;AAAA,MACnB,GACI,QAAQ,IAAI,aAAa,eAAe,mCAAmC,6CAC7D;AAAA,MAClB;AAAA,QACI,SAAS;AAAA,UACL,iBAAiB;AAAA,QACrB;AAAA,MACJ;AAAA,IAAA;AAEE,UAAA,WAAW,MAAM,SAAS;AAE1B,UAAA,YAAY,EAAE;AAEb,WAAA;AAAA,MACH,aAAa;AAAA,QACT;AAAA,MACJ;AAAA,IAAA;AAAA,WAEC;AACL,YAAQ,MAAM,GAAG;AAAA,EACrB;AACJ;"}