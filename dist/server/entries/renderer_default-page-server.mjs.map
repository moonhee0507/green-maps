{"version":3,"file":"renderer_default-page-server.mjs","sources":["../../../renderer/PageShell.tsx","../../../../../../../../images/icon.png","../../../../../../../../images/icon-180.png","../../../../../../../../images/icon-mask.png","../../../renderer/_default.page.server.tsx"],"sourcesContent":["import 'normalize.css';\r\n// import '/style/index.css';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport store from './store';\r\nimport { Provider } from 'react-redux';\r\nimport { PageContextProvider } from './usePageContext';\r\nimport { Link } from './Link';\r\nimport type { PageContext } from './types';\r\n\r\nexport { PageShell };\r\n\r\nfunction PageShell({ children, pageContext }: { children: React.ReactNode; pageContext: PageContext }) {\r\n    return (\r\n        <Provider store={store}>\r\n            <PageContextProvider pageContext={pageContext}>\r\n                <Layout>\r\n                    <BackgroundArea />\r\n                    <App>{children}</App>\r\n                </Layout>\r\n            </PageContextProvider>\r\n        </Provider>\r\n    );\r\n}\r\n\r\nfunction Layout({ children }: { children: React.ReactNode }) {\r\n    return <div className=\"layout\">{children}</div>;\r\n}\r\n\r\nfunction BackgroundArea() {\r\n    return (\r\n        <div className=\"left-area\">\r\n            <div className=\"txt-intro\">\r\n                <strong>채식 식당 검색과 북마크 서비스</strong>\r\n                <h1>\r\n                    <Link href=\"/\">그린 맵</Link>\r\n                </h1>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * !모바일 웹 vh 관련\r\n */\r\n\r\nfunction App({ children }: { children: React.ReactNode }) {\r\n    const [isMobile, setIsMobile] = useState(false);\r\n\r\n    const __APP_Element__ = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        setIsMobile(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isMobile) {\r\n            const element = __APP_Element__.current as HTMLDivElement;\r\n            if (element !== null) {\r\n                element.style.height = window.innerHeight + 'px';\r\n            }\r\n        }\r\n    }, [isMobile]);\r\n\r\n    return (\r\n        <div className=\"app\" ref={__APP_Element__}>\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n","export default \"__VITE_PUBLIC_ASSET__b9e19bc2__\"","export default \"__VITE_PUBLIC_ASSET__d4a58c9b__\"","export default \"__VITE_PUBLIC_ASSET__eb6142be__\"","import ReactDOMServer from 'react-dom/server';\r\nimport React from 'react';\r\nimport { escapeInject, dangerouslySkipEscape } from 'vite-plugin-ssr/server';\r\nimport store from './store';\r\nimport { Provider } from 'react-redux';\r\nimport { PageShell } from './PageShell';\r\nimport icon512 from '/images/icon.png';\r\nimport icon192 from '/images/icon-192.png';\r\nimport icon180 from '/images/icon-180.png';\r\nimport icon1024 from '/images/icon-1024.png';\r\nimport iconMask from '/images/icon-mask.png';\r\nimport type { PageContextServer } from './types';\r\n\r\nexport { onBeforeRender, render };\r\n\r\nexport const passToClient = [\r\n    'documentProps',\r\n    'pageProps',\r\n    'PRELOADED_STATE',\r\n    'routeParams',\r\n    'token',\r\n    'user',\r\n    'groupName',\r\n    'pageHtml',\r\n    'reviews',\r\n    'restaurantInfo',\r\n    'post',\r\n    'postId',\r\n    'urlPathname',\r\n];\r\n\r\nasync function render(pageContext: PageContextServer) {\r\n    const { pageHtml } = pageContext;\r\n\r\n    const __PAGE_HTML__ = typeof pageHtml !== 'undefined' ? pageHtml : '';\r\n\r\n    const { documentProps } = pageContext.exports;\r\n    const title = (documentProps && documentProps.title) || 'Green Maps';\r\n    const desc = (documentProps && documentProps.description) || '채식 식당 지도 서비스';\r\n\r\n    const manifestUrl = import.meta.env.BASE_URL + 'app.webmanifest';\r\n    const cssUrl = import.meta.env.BASE_URL + 'style/index.css';\r\n    const swUrl = import.meta.env.BASE_URL + 'sw.ts';\r\n\r\n    const PRELOADED_STATE = JSON.stringify(store);\r\n    const LOGIN_MESSAGE = JSON.stringify('로그인이 필요한 서비스입니다.\\n로그인하시겠습니까?');\r\n\r\n    return escapeInject`<!DOCTYPE html>\r\n    <html lang=\"ko\">\r\n        <head>\r\n            <link rel=\"stylesheet\" href=\"${cssUrl}\" type=\"text/css\">\r\n            <meta charset=\"UTF-8\" />\r\n            <title>${title}</title>\r\n            <meta name=\"author\" content=\"moonhee0507\" />\r\n            <link rel=\"icon\" href=\"${icon512}\">\r\n            <meta name=\"description\" content=\"${desc}\" />\r\n            <link rel=\"apple-touch-icon\" href=\"${icon180}\" sizes=\"180x180\">\r\n            <link rel=\"mask-icon\" href=\"${iconMask}\" color=\"#00784a\">\r\n            <meta name=\"theme-color\" media=\"(prefers-color-scheme: light)\" content=\"#00784a\">\r\n            <meta name=\"theme-color\" media=\"(prefers-color-scheme: dark)\"  content=\"#00784a\">\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n            <link rel=\"manifest\" href=\"${manifestUrl}\">\r\n            <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n            <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n            <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap\">\r\n            \r\n            <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\r\n\r\n            <meta property=\"og:image\" content=\"${icon512}\">\r\n            <meta property=\"og:title\" content=\"${title}\">\r\n            <meta property=\"og:description\" content=\"${desc}\" />\r\n            <meta property=\"og:url\" content=\"https://www.green-maps.site/\">\r\n\r\n            <meta property=\"twitter:image\" content=\"${icon512}\">\r\n            <meta property=\"twitter:card\" content=\"${icon512}\">\r\n            <meta property=\"twitter:title\" content=\"Green Maps\">\r\n            <meta property=\"twitter:description\" content=\"${desc}\">\r\n            <meta name=\"naver-site-verification\" content=\"a3db4e78827a23b8b0d328ce26c6c74abb4d4a3a\" />\r\n            <meta name=\"google-site-verification\" content=\"BPU_wLaUb66NU-RLN8MSZzYqXkrTdN67ExNTPROn1YY\" />\r\n            \r\n        </head>\r\n        <body>\r\n            <script type=\"text/javascript\" src=\"//dapi.kakao.com/v2/maps/sdk.js?appkey=136def8e37bfc98bffe8939cd80ab687&libraries=services,clusterer,drawing\"></script>\r\n            <div id=\"page-view\">${dangerouslySkipEscape(__PAGE_HTML__)}</div>\r\n            <script type=\"text/javascript\">\r\n                \r\n                window.__PRELOADED_STATE__ = ${dangerouslySkipEscape(PRELOADED_STATE)};\r\n                \r\n                const map = document.getElementById(\"map\");\r\n                if (map) {\r\n                    map.addEventListener('touchmove', () => {});\r\n                }\r\n\r\n                const navBookmark = document.querySelector('.link-nav.no-login');\r\n                if (navBookmark) {\r\n                    navBookmark.addEventListener('click', () => {\r\n                        const message = ${dangerouslySkipEscape(LOGIN_MESSAGE)};\r\n\r\n                        if (confirm(message)) {\r\n                            window.location.href = '/login';\r\n                        }\r\n                    });\r\n                }\r\n\r\n            </script>\r\n    </html>`;\r\n}\r\n\r\nasync function onBeforeRender(pageContext: PageContextServer) {\r\n    const { Page, pageProps, routeParams, token, user, groupName, reviews, restaurantInfo, post, postId, review } =\r\n        pageContext;\r\n\r\n    let pageHtml;\r\n\r\n    if (!Page) {\r\n        // SPA\r\n        pageHtml = '';\r\n    } else {\r\n        // SSR\r\n        pageHtml = ReactDOMServer.renderToString(\r\n            <Provider store={store}>\r\n                <PageShell pageContext={pageContext}>\r\n                    <Page {...pageProps} routeParams={routeParams} token={token} user={user} />\r\n                </PageShell>\r\n            </Provider>\r\n        );\r\n    }\r\n\r\n    const PRELOADED_STATE = store.getState();\r\n\r\n    return {\r\n        pageContext: {\r\n            pageProps,\r\n            PRELOADED_STATE,\r\n            routeParams,\r\n            token,\r\n            user,\r\n            groupName,\r\n            pageHtml,\r\n            reviews,\r\n            restaurantInfo,\r\n            post,\r\n            postId,\r\n            review,\r\n        },\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAWA,SAAS,UAAU,EAAE,UAAU,eAAwE;AACnG,6BACK,UAAS,EAAA,OACN,8BAAC,qBAAoB,EAAA,aACjB,+BAAC,QACG,EAAA,UAAA;AAAA,IAAA,oBAAC,gBAAe,EAAA;AAAA,IAChB,oBAAC,OAAK,UAAS;AAAA,EAAA,GACnB,GACJ,EACJ,CAAA;AAER;AAEA,SAAS,OAAO,EAAE,YAA2C;AACzD,SAAQ,oBAAA,OAAA,EAAI,WAAU,UAAU,SAAS,CAAA;AAC7C;AAEA,SAAS,iBAAiB;AACtB,6BACK,OAAI,EAAA,WAAU,aACX,UAAC,qBAAA,OAAA,EAAI,WAAU,aACX,UAAA;AAAA,IAAA,oBAAC,YAAO,UAAiB,oBAAA,CAAA;AAAA,wBACxB,MACG,EAAA,UAAA,oBAAC,QAAK,MAAK,KAAI,kBAAI,EACvB,CAAA;AAAA,EAAA,EACJ,CAAA,EACJ,CAAA;AAER;AAMA,SAAS,IAAI,EAAE,YAA2C;AACtD,QAAM,CAAC,UAAU,WAAW,IAAI,SAAS,KAAK;AAExC,QAAA,kBAAkB,OAAuB,IAAI;AAEnD,YAAU,MAAM;AACZ,gBAAY,iEAAiE,KAAK,UAAU,SAAS,CAAC;AAAA,EAC1G,GAAG,CAAE,CAAA;AAEL,YAAU,MAAM;AACZ,QAAI,UAAU;AACV,YAAM,UAAU,gBAAgB;AAChC,UAAI,YAAY,MAAM;AACV,gBAAA,MAAM,SAAS,OAAO,cAAc;AAAA,MAChD;AAAA,IACJ;AAAA,EAAA,GACD,CAAC,QAAQ,CAAC;AAEb,6BACK,OAAI,EAAA,WAAU,OAAM,KAAK,iBACrB,SACL,CAAA;AAER;ACpEA,MAAe,UAAA;ACAf,MAAe,UAAA;ACAf,MAAe,WAAA;;;;ACAf,IAAA;AAeO,MAAM,eAAe;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AAEA,eAAe,OAAO,aAAgC;AAC5C,QAAA,EAAE,SAAa,IAAA;AAErB,QAAM,gBAAgB,OAAO,aAAa,cAAc,WAAW;AAE7D,QAAA,EAAE,cAAc,IAAI,YAAY;AAChC,QAAA,QAAS,iBAAiB,cAAc,SAAU;AAClD,QAAA,OAAQ,iBAAiB,cAAc,eAAgB;AAEvD,QAAA,cAAc;AACd,QAAA,SAAS;AAGT,QAAA,kBAAkB,KAAK,UAAU,KAAK;AACtC,QAAA,gBAAgB,KAAK,UAAU,8BAA8B;AAEnE,SAAO,aAAY,OAAA,KAAA,WAAA,CAAA,oGAG0B,iFAEvB,2GAEkB,sDACQ,yDACI,gEACN,mVAIE,uZAOI,uDACF,6DACK,6IAGE,2DACD,oIAEI,qdAOM,wHAGe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAUP,kOAAA,CAAA,IA9CnC,QAEtB,OAEgB,SACW,MACC,SACP,UAID,aAOQ,SACA,OACM,MAGD,SACD,SAEO,MAO1B,sBAAsB,aAAa,GAGtB,sBAAsB,eAAe,GAU1C,sBAAsB,aAAa,CAAA;AAU7E;AAEA,eAAe,eAAe,aAAgC;AAC1D,QAAM,EAAE,MAAM,WAAW,aAAa,OAAO,MAAM,WAAW,SAAS,gBAAgB,MAAM,QAAQ,OAAA,IACjG;AAEA,MAAA;AAEJ,MAAI,CAAC,MAAM;AAEI,eAAA;AAAA,EAAA,OACR;AAEH,eAAW,eAAe;AAAA,MACrB,oBAAA,UAAA,EAAS,OACN,UAAA,oBAAC,aAAU,aACP,UAAA,oBAAC,MAAM,EAAA,GAAG,WAAW,aAA0B,OAAc,KAAY,CAAA,EAC7E,CAAA,GACJ;AAAA,IAAA;AAAA,EAER;AAEM,QAAA,kBAAkB,MAAM;AAEvB,SAAA;AAAA,IACH,aAAa;AAAA,MACT;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,EAAA;AAER;"}