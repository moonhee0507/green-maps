name: 🚀 Github Page 배포

permissions:
    contents: write

on:
    push:
        # `main`에 변경사항이 있을 때만 이 작업을 실행
        branches:
            - main

jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout main branch
              uses: actions/checkout@v3
              with:
                  ref: main

            - name: Build and Deploy to gh-pages
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                  branch: gh-pages
                  folder: ./dist/client
                  # 이전 build 파일들 제거
                  clean: true
                  # `.nojekyll` 파일을 제거하면 안됨. `gh-pages` 분기의 루트에 빈 `.nojekyll` 파일을 수동으로 추가했고 각 빌드 후에 다시 생성하지 않아도 됨.
                  clean-exclude: |
                      .nojekyll
