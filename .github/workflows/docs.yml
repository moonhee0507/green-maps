name: ğŸš€ Github Deployment
on:
    push:
        # `main`ì— ëŒ€í•œ ìƒˆë¡œìš´ ì»¤ë°‹ì´ ìˆì„ ë•Œë§Œ ì´ ì‘ì—…ì„ ì‹¤í–‰
        branches:
            - main

jobs:
    build-and-deploy:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v3

            - name: Cache npm
              uses: actions/cache@v3
              with:
                  path: ~/.npm
                  key: ${{runner.os}}--build-${{ hashFiles('**/package-lock.json') }}
                  restore-key: ${{ runner.os }}--build-${{hashFiles('**/package-lock.json')}}

            - name: Install npm
              run: npm install

            - name: Build vite-plugin-ssr
              run: npm run build

            - name: Deploy
              uses: moonhee0507/green-maps/github-pages-deploy-action@v4
              with:
                  branch: gh-pages
                  folder: dist/client
                  # Remove previous build files
                  clean: true
                  # `.nojekyll` íŒŒì¼ì„ ì œê±°í•˜ë©´ ì•ˆë¨. `gh-pages` ë¶„ê¸°ì˜ ë£¨íŠ¸ì— ë¹ˆ `.nojekyll` íŒŒì¼ì„ ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í–ˆê³  ê° ë¹Œë“œ í›„ì— ë‹¤ì‹œ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ë¨.
                  clean-exclude: |
                      .nojekyll
